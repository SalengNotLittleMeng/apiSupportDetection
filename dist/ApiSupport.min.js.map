{"version":3,"file":"ApiSupport.min.js","mappings":"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","sources":["webpack://ApiSupport/webpack/universalModuleDefinition","webpack://ApiSupport/./app.js","webpack://ApiSupport/./src/main.js","webpack://ApiSupport/./src/options/merge.js","webpack://ApiSupport/./src/options/default.js","webpack://ApiSupport/./src/plugin/innerPlugin.js","webpack://ApiSupport/./src/plugin/plugins/serviceworker/index.js","webpack://ApiSupport/./src/options/error.js","webpack://ApiSupport/./src/request/request.js","webpack://ApiSupport/./src/request/histroy.js","webpack://ApiSupport/./src/request/owl.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/index.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/config.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/extend.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/logger.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/url.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/pageid.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/constant/version.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/constant/protocol.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/error/manager.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/xhr.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/index.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/event.js","webpack://ApiSupport/./node_modules/int64-convert/index.js","webpack://ApiSupport/./node_modules/@dp/owl/node_modules/uuid/index.js","webpack://ApiSupport/./node_modules/@dp/owl/node_modules/uuid/v1.js","webpack://ApiSupport/./node_modules/@dp/owl/node_modules/uuid/lib/rng-browser.js","webpack://ApiSupport/./node_modules/@dp/owl/node_modules/uuid/lib/bytesToUuid.js","webpack://ApiSupport/./node_modules/@dp/owl/node_modules/uuid/v4.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/error/model.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/constant/category.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/constant/level.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/db.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/ls.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/logan.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/load.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/page/index.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/caniuse.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/constant/patterns.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/page/firstScreen.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/img.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/resource/manager.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/resource/model.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/metric/index.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/pv/index.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/log/manager.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/dimns.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/cookie.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/filter.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/util/filter_config.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/page/catch.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/error/catch.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/resource/catch.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/resource/ajax.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/resource/fetch.js","webpack://ApiSupport/./node_modules/@dp/owl/lib/version.js","webpack://ApiSupport/./src/info/info.js","webpack://ApiSupport/./src/info/device.js","webpack://ApiSupport/./src/plugin/plugin.js","webpack://ApiSupport/./src/adapter/css.js","webpack://ApiSupport/./src/adapter/html.js","webpack://ApiSupport/./src/support/support.js","webpack://ApiSupport/webpack/bootstrap","webpack://ApiSupport/webpack/runtime/compat get default export","webpack://ApiSupport/webpack/runtime/define property getters","webpack://ApiSupport/webpack/runtime/hasOwnProperty shorthand","webpack://ApiSupport/webpack/runtime/make namespace object","webpack://ApiSupport/webpack/startup"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ApiSupport\"] = factory();\n\telse\n\t\troot[\"ApiSupport\"] = factory();\n})(this, () => {\nreturn ","module.exports = require(\"./src/main\");\n","import { mergeOptions } from \"./options/merge\"\nimport { initRequest } from \"./request/request\"\nimport { initInfo } from \"./info/info\"\nimport { initPlugin } from \"./plugin/plugin\"\nimport { collectApiSupportInfo } from \"./support/support\"\nexport default class ApiSupport{\n     constructor(options){\n        this.$options=mergeOptions(options) \n        if(!this.flowLimitController(this)){\n            return\n        }\n        initRequest(this)\n        initPlugin(this)\n        initInfo (this)\n        if(this.$options.immediate){\n            this.run()\n        }\n    }\n    run(){\n        const {filter,timeout}=this.$options\n        function raceTimeout(){\n            return new Promise((reslove)=>{\n                setTimeout(()=>{\n                    reslove()\n                },timeout)\n            })\n        }\n        Promise.race([collectApiSupportInfo(this),raceTimeout()]).then(()=>{\n            let info=null\n            if(typeof filter=='function'){\n                info=filter(this.$info.getFinInfo())\n            }else{\n                info=this.$info.getFinInfo()\n            }\n            this.requestMessage(info)\n        })\n    }\n    // 流量限制\n    flowLimitController(vm){\n        const {limit}=vm.$options\n        return Math.random()<=limit\n    }\n}\n\n","import { defaultOptions } from \"./default\";\nimport { useInnerPlugins } from \"../plugin/innerPlugin\";\nimport {\n  handlerError,\n  NEED_API,\n  NEED_VERIFY_TYPE,\n  API_NEED_ARRAY_OR_OBJECT,\n} from \"./error\";\nconst verifyTypeParams = new Set([\"js\", \"css\", \"html\"]);\nexport function mergeOptions(options) {\n  verifyOptions(options);\n  optionsFilter(options);\n  return deepMerge(defaultOptions, options);\n}\n//配置过滤器，处理配置保证标准化\nfunction optionsFilter(options) {\n  const { api, plugins } = options;\n  if(typeof api=='string'){\n    options.api=[{\n      name:api\n    }]\n  }\n  if (typeof api === \"object\"&&!Array.isArray(api)) {\n    options.api = [api];\n  }\n  if(!plugins){\n    options.plugins=[]\n  }\n  if ((typeof plugins == \"object\"||'string')&&!Array.isArray(plugins)) {\n    options.plugins = [plugins];\n  }\n  options.plugins=useInnerPlugins(options.plugins,options.api)\n  options.api.forEach(item => {\n      if(!item.type){\n        item.type='js'\n      }\n  });\n}\n// 检验配置合法性\nfunction verifyOptions(options) {\n  const { api = null, plugins } = options;\n  if (!api) {\n    handlerError(NEED_API);\n  }\n  if ((typeof api!=='string')&&(!isObjectOrArray(api))) {\n    handlerError(API_NEED_ARRAY_OR_OBJECT);\n  }\n  if (options.type && verifyTypeParams.has(options.type)) {\n    handlerError(NEED_VERIFY_TYPE);\n  }\n}\n\nfunction isObjectOrArray(params) {\n return (typeof params === \"object\" && params !== null) || Array.isArray(params);\n}\nfunction deepMerge(target, ...sources) {\n  if (!sources.length) return target;\n  const source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!target[key]) Object.assign(target, { [key]: {} });\n        deepMerge(target[key], source[key]);\n      } else {\n        Object.assign(target, { [key]: source[key] });\n      }\n    }\n  }\n\n  return deepMerge(target, ...sources);\n}\n\nfunction isObject(item) {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n","export const defaultOptions={\n    api:[\n    ],\n    request:null,\n    plugins:[],\n    filter:function(data){\n        return data\n    },\n    owlOptions:{\n            project: '',\n            pageUrl:\"\",\n            devMode: false, // 请根据环境来赋值，线上环境设为false，线下环境设为true\n            autoCatch: {\n                pv: false,\n                page:false,\n                ajax:false,\n                resource:false,\n                js:false\n            },\n            metric:{\n                combo:false\n            }\n    },\n    raptorKey:'sdk_data',\n    immediate:true,\n    timeout:3000,\n    limit:1\n}","import ServiceWorkerPlugin from \"./plugins/serviceworker\";\n// 这里的每个key一定要跟插件的name属性对齐\nconst InnnerPluginMap=new Map([\n    ['serviceWorker',ServiceWorkerPlugin]\n])\n// 如果用户传入字符串作为插件，则认为使用内置插件进行处理\n// 也可以添加一个参数innerPlugin:true,表明是内置插件，通过这种方式添加插件，可以注入参数\nexport function useInnerPlugins(plugins,apis){\n    return plugins.map(plugin=>{\n        if(typeof plugin=='string'){\n           return addInnerPlugin(plugin,apis)\n        }\n        // 处理带参数的内置插件的情况\n        if(typeof plugin=='object'&&typeof plugin!==null){\n            if(plugin.innerPlugin){\n                const {params={},name=''}=plugin\n                return addInnerPlugin(name,apis,params)\n            }\n        }\n        return plugin\n    })\n}\n\nfunction addInnerPlugin(pluginName,apis,params={}){\n    if(!InnnerPluginMap.has(pluginName)){\n        return undefined\n    }\n    // 对api中没有注册的插件名进行补充\n    if(!apis.find(api=>api.name==pluginName)){\n        apis.push({\n            name:pluginName\n        })\n    }\n    const Ctor=InnnerPluginMap.get(pluginName)\n    return new Ctor(params)\n}","const MESSAGE_EVENT_NAME=\"service_client_sdk\"\nconst unUseEventData=new Set([\n    'eventType',\n    'type'\n])\nconst BaseData={\n    hitCache:false,\n    hitPreload:false,\n    error:null,\n    errorCode:0,\n    supportServiceWorker:true\n}\nexport default class ServiceWorkerPlugin{\n    constructor(options={}){\n        this.name='serviceWorker',\n        this.type='js'\n        this.test=initServiceWorker,\n        this.filter=serviceWorkerDataFilter\n        this.async=true\n    }\n}\n\nfunction initServiceWorker(){\n    const vm=this\n    return new Promise((reslove)=>{\n        if (!navigator.serviceWorker) {\n            reslove(false)\n            return\n        }\n        navigator.serviceWorker.register(\"./sw.js\").then((registration)=>{\n            initMessageListener(reslove,vm)\n            messageServiceWorkerErrorHandler(reslove,vm)\n        }).catch(e=>{\n            console.log(e)\n            reslove(false)\n        })\n    })\n}\n// 跟service worker层进行通信\nfunction initMessageListener(cb,vm){\n    navigator.serviceWorker.addEventListener(\"message\", function (event) {\n        const { data } = event;\n        // 考虑预加载时需要合并两次的问题\n        if (data.eventType == MESSAGE_EVENT_NAME) {\n            // 删除无用的参数\n            unUseEventData.forEach((value)=>{\n                if(data[value]){\n                    delete data[value]\n                }\n            })\n           vm.setExtraData(data)\n            cb(true)\n        }\n      });\n}\n\n// 传输失败的兜底机制\nfunction messageServiceWorkerErrorHandler(cb,vm){\n    window.addEventListener('unload',()=>{\n        vm.setExtraData(createServiceWorkerMessageErrorInfo())\n        cb(false)\n    })\n}\n\nfunction createServiceWorkerMessageErrorInfo(){\n    return {\n        error:'未收到传输消息',\n        errorCode:1001\n    }\n}\nfunction serviceWorkerDataFilter(data){\n    if(!data){\n        return {\n            ...BaseData,\n            error:'timeout',\n            errorCode:1002,\n            supportServiceWorker:true,\n            isInit:false,\n            hitPreload:false,\n            hitCache:false\n        }\n    }\n    data.supportServiceWorker=data.support\n    delete data.support\n    return {\n      ...BaseData,\n      ...data\n    }\n}","export const NEED_API = \"api parameter required\";\nexport const API_NEED_ARRAY_OR_OBJECT =\n  \"The api parameter should be an array or object type\";\nexport const PLUGINS_NEED_ARRAY_OR_OBJECT =\n  \"The plugins parameter should be an array or object type\";\nexport const NEED_VERIFY_TYPE =\n  \"The parameter 'type' should be 'js','css' or 'html'\";\nexport const PLUGIN_NEED_NAME = \"The plugin requires a parameter name\";\nexport function handlerError(tips) {\n  throw Error(tips);\n}\n","import histroyDara from './histroy'\nimport { initOwlMetricInst,getOwlMetricInst } from './owl';\nfunction request(params) {\n  const inst=getOwlMetricInst()\n  inst.setExtraData(JSON.stringify(params))\n    inst.setMetric(inst.raptorKey,1)\n      inst.report()\n}\n\nexport async function requestMessage(data) {\n  try {\n    if(!navigator.onLine){\n      histroyDara.addHistroyData({\n        ...data,\n        errorCode:3000\n      })\n      return\n    }\n    await request(data);\n  } catch (e) {\n    console.log(e)\n  }\n}\n\nexport function initRequest(vm) {\n  if (\n    vm.$options &&\n    vm.$options.request &&\n    typeof vm.$options.request == \"function\"\n  ) {\n    vm.requestMessage = vm.$options.request;\n  }else{\n    initOwlMetricInst(vm)\n    vm.requestMessage = requestMessage;\n  }\n  histroyDara.useHistroyData(vm.requestMessage)\n}\n\n\n\n","// 考虑上报失败的问题，如果因为离线等原因未上报成功，则在下一次进入页面时重新进行之前的上报操作\n\nclass HistoryData{\n    constructor(){\n      this.key=\"API_SUPPORT_SDK_STORAGE\"\n    }\n    addHistroyData(data){\n      let history=localStorage.getItem(this.key)\n      if(!history){\n          history=[]\n      }else{\n        history=JSON.parse(history)\n        if(history instanceof Array){\n          history.push(data)\n        }\n      }\n      localStorage.setItem(this.key,JSON.stringify(history))\n    }\n    useHistroyData(fn){\n      let history=localStorage.getItem(this.key)\n      if(!history){\n        return \n      }\n      history=JSON.parse(history)\n      if(history instanceof Array){\n        setTimeout(()=>{\n          history.forEach(data=>{\n            fn(data)\n          })\n          localStorage.removeItem(this.key)\n        })\n      }else{\n        localStorage.removeItem(this.key)\n      }\n    }\n  }\n\n  export default new HistoryData()","import Owl from '@dp/owl'\nlet metricInst=null\nexport function initOwlMetricInst(vm){\n    if(metricInst){\n        return metricInst\n    }\n    const {$options}=vm\n    window.\n    Owl.start($options.owlOptions);\n    metricInst =Owl.MetricManager();\n    metricInst.raptorKey=$options.raptorKey\n    return metricInst\n}\nexport function getOwlMetricInst(){\n    if(metricInst){\n        return metricInst\n    }\n    return initOwlMetricInst()\n}","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CfgManager = require('./config');\nvar ErrManager = require('./error/manager');\nvar PageManager = require('./page/index');\nvar ResManager = require('./resource/manager');\nvar MetricManager = require('./metric/index');\nvar PvManager = require('./pv/index');\nvar LogManager = require('./log/manager');\n\nvar Dimns = require('./dimns');\nvar Util = require('./util/index');\nvar configFilter = require('./util/filter');\nvar Logger = require('./util/logger');\nvar guid = require('./util/pageid');\nvar Extend = require('./util/extend');\nvar Logan = require('./util/logan');\nvar Event = require('./util/event');\n\nvar category = require('./constant/category');\nvar version = require('./constant/version').version;\nvar EM = require('./error/model');\n\nvar catchPage = require('./page/catch');\nvar catchError = require('./error/catch');\nvar catchResource = require('./resource/catch');\n\nvar OWL = function () {\n    function OWL(config, opts) {\n        _classCallCheck(this, OWL);\n\n        var cfgManager = new CfgManager(config);\n        this.errManager = new ErrManager(cfgManager);\n        this.pageManager = new PageManager(cfgManager, this.errManager);\n        this.resManager = new ResManager(cfgManager, this.errManager);\n        this.metricManager = new MetricManager(cfgManager);\n        this.pvManager = new PvManager(cfgManager);\n        this.logManager = new LogManager(cfgManager);\n        this.cfgManager = cfgManager;\n        this.cfgManager.setExtension(Dimns.getExt());\n\n        // 待配置 devMode 后再做 configFilter\n        if (!(opts && opts.noFilter)) {\n            configFilter(this.cfgManager);\n        }\n    }\n\n    _createClass(OWL, [{\n        key: 'config',\n        value: function config(_config) {\n            this.cfgManager.set(_config);\n        }\n    }, {\n        key: 'getConfig',\n        value: function getConfig(key) {\n            return this.cfgManager.get(key);\n        }\n    }, {\n        key: 'debug',\n        value: function debug() {\n            this.cfgManager.set({ devMode: true });\n            Logger.setDebug();\n        }\n        /**\n         *  上报自定义异常\n         *  @param {any} err - 异常信息\n         *  @param {Object} opts\n         *  @param {Boolean} opts.combo - 是否合并请求\n         *  @param {string} opts.category - 异常分类\n         *  @param {string} opts.level - 异常级别\n         *  @param {Object} opts.tags - 其他自定义信息\n         */\n\n    }, {\n        key: 'addError',\n        value: function addError(err, opts) {\n            // 基于不同的参数条件，使用不同的方法\n            var name = opts && opts.combo || this.getConfig('error').combo ? 'push' : 'report';\n            this.errManager[name](err, opts);\n        }\n    }, {\n        key: 'sendErrors',\n        value: function sendErrors() {\n            this.errManager.report();\n        }\n        /**\n         *  上报自定义性能指标\n         *  @param {Object} point - 性能指标信息\n         *  @param {Number} point.position - 指标点位置\n         *  @param {Number} point.duration - 耗时\n         *  @param {Number} point.timeStamp - 时间戳\n         */\n\n    }, {\n        key: 'addPoint',\n        value: function addPoint(point) {\n            if (!point || point.position === undefined) return;\n\n            var newPoint = void 0;\n            if (point.duration !== undefined) {\n                newPoint = point;\n            } else {\n                var timing = Util.getPerfTiming();\n                var navStart = timing && timing.navigationStart;\n                if (typeof navStart == 'number') {\n                    newPoint = {\n                        position: point.position,\n                        duration: (point.timeStamp || +new Date()) - navStart\n                    };\n                }\n            }\n            if (newPoint) {\n                this.pageManager.setUserReady();\n                this.pageManager.push(newPoint);\n            }\n        }\n    }, {\n        key: 'sendPoints',\n        value: function sendPoints() {\n            this.pageManager.report(true);\n        }\n        /**\n         *  上报自定义请求信息\n         *  @param {Object} api - 请求信息\n         *  @param {string} api.name - 请求名称\n         *  @param {Number} api.networkCode - 网络状态码\n         *  @param {Number} api.statusCode - 业务状态码\n         *  @param {Number} api.responseTime - 请求耗时\n         *  @param {string} [api.content] - 异常堆栈\n         */\n\n    }, {\n        key: 'addApi',\n        value: function addApi(api) {\n            var validTypes = ['undefined', 'number'];\n            if (!api || validTypes.indexOf(_typeof(api.networkCode)) < 0 || validTypes.indexOf(_typeof(api.statusCode)) < 0) return Logger.log('参数对象属性类型错误');\n\n            var networkCode = api.networkCode !== undefined ? api.networkCode : '';\n            var statusCode = api.statusCode !== undefined ? api.statusCode : '';\n            var newApi = {\n                type: 'api',\n                connectType: api.connectType || '',\n                resourceUrl: api.name,\n                statusCode: networkCode + '|' + statusCode,\n                responsetime: api.responseTime && api.responseTime.toString() || '0'\n            };\n            if (api.content) {\n                newApi.firstCategory = category.AJAX;\n                newApi.secondCategory = api.secondCategory || api.name;\n                newApi.logContent = api.content;\n            }\n            this.resManager.pushApi(newApi);\n        }\n    }, {\n        key: 'reportApi',\n        value: function reportApi() {\n            this.addApi.apply(this, arguments);\n        }\n    }, {\n        key: 'sendApis',\n        value: function sendApis() {\n            this.resManager.report();\n        }\n        // 记录Logan日志\n\n    }, {\n        key: 'addLog',\n        value: function addLog() {\n            Logan._log.apply(Logan, arguments);\n        }\n    }, {\n        key: 'createLog',\n        value: function createLog() {\n            return new LogManager(this.cfgManager);\n        }\n        // 重置参数并重新上报pv\n\n    }, {\n        key: 'resetPv',\n        value: function resetPv(opts) {\n            var _this = this;\n\n            opts = opts || {};\n            var cfgManager = this.cfgManager;\n            var from = cfgManager.get('pageUrl');\n            var to = opts.pageUrl || Util.getPageUrl();\n            // if (!to || to === from) return\n            var project = opts.project || cfgManager.get('project');\n            var configs = {\n                project: project,\n                pageUrl: to,\n                pageId: opts.pageId || 'owl-' + guid()\n            };\n            cfgManager.set(configs);\n\n            if (opts.delay) {\n                // 连续快速resetPv时，只上报一次\n                this.resetPvTimer && clearTimeout(this.resetPvTimer);\n                this.resetPvTimer = setTimeout(function () {\n                    _this.pvManager.report(configs);\n                    Logan._log('[Navigation]:' + JSON.stringify({ project: project, from: from, to: to }), 'owl', 'info', ['navi']);\n                }, 200);\n            } else {\n                this.pvManager.report(configs);\n                Logan._log('[Navigation]:' + JSON.stringify({ project: project, from: from, to: to }), 'owl', 'info', ['navi']);\n            }\n        }\n    }, {\n        key: 'reportPv',\n        value: function reportPv() {\n            this.pvManager.report();\n        }\n        // 创建新的自定义指标实例\n\n    }, {\n        key: 'newMetricInst',\n        value: function newMetricInst() {\n            return new MetricManager(this.cfgManager);\n        }\n        // 新增, 更新, 移除异常过滤方法\n\n    }, {\n        key: 'updateFilter',\n        value: function updateFilter(key, fn) {\n            if (fn) {\n                this.cfgManager.addFilter(key, fn);\n            } else {\n                this.cfgManager.removeFilter(key);\n            }\n        }\n    }, {\n        key: 'removeFilter',\n        value: function removeFilter(key) {\n            this.cfgManager.removeFilter(key);\n        }\n        /**\n         * 为函数提供try-catch封装, 避免异常被抛出的同时上报异常\n         * \n         * @param {Function} func - 需封装的函数\n         * @param {Object} context - 函数执行的上下文\n         * @param {Object} opts - 等同于addError的opts\n         */\n\n    }, {\n        key: 'wrap',\n        value: function wrap(func, context, opts) {\n            if (typeof func !== 'function') return func;\n            try {\n                if (func.__owl_wrapped__) return func;\n                if (func.__owl_wrapper__) return func.__owl_wrapper__;\n            } catch (e) {\n                return func;\n            }\n\n            var wrapped = function wrapped() {\n                try {\n                    return func.apply(context, arguments);\n                } catch (e) {\n                    Owl.addError(e, opts);\n                }\n            };\n            for (var property in func) {\n                if (func.prototype.hasOwnProperty(property)) {\n                    wrapped[property] = func[property];\n                }\n            }\n            wrapped.prototype = func.prototype;\n            func.__owl_wrapper__ = wrapped;\n            wrapped.__owl_wrapper__ = true;\n\n            return wrapped;\n        }\n        // 设置维度信息,支持:region,operator,network,container,os,unionId,latlng\n        // latlng用于设置位置信息,值为:'${lat},${lng}'格式,如:'121.426805,31.221485'\n\n    }, {\n        key: 'setDimension',\n        value: function setDimension(obj) {\n            this.cfgManager.setExtension(obj);\n        }\n    }, {\n        key: 'getDimension',\n        value: function getDimension(key) {\n            this.cfgManager.getExtension(key);\n        }\n    }, {\n        key: 'reportFST',\n        value: function reportFST() {\n            var pageCfg = this.cfgManager.get('page');\n            if (pageCfg.sensoryIndex || pageCfg.manualReportFST) return;\n\n            this.cfgManager.set({ page: { manualReportFST: true } });\n            this.pageManager.manualReportFST();\n        }\n    }, {\n        key: 'createInstance',\n        value: function createInstance(config) {\n            var instance = null;\n            try {\n                if (window.Owl && window.Owl.OWL && config && config.project) {\n                    if (typeof config.devMode === 'undefined') {\n                        config.devMode = window.Owl.cfgManager.get('devMode');\n                    }\n                    instance = new window.Owl.OWL(config);\n                }\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n            return instance;\n        }\n    }, {\n        key: 'getResTimingInfo',\n        value: function getResTimingInfo(url) {\n            if (!(window.performance && typeof window.performance.getEntriesByName === 'function')) return null;\n            try {\n                if (typeof url === 'string') {\n                    var temp = window.performance.getEntriesByName(url, 'resource');\n                    if (temp instanceof Array && temp.length && temp[0]) {\n                        var duration = parseInt(Math.round(temp[0].duration));\n                        return isNaN(duration) ? null : { name: url, duration: duration };\n                    }\n                } else if (url instanceof Array) {\n                    var result = [];\n                    for (var i = 0; i < url.length; i++) {\n                        if (typeof url[i] === 'string') {\n                            var info = this.getResTimingInfo(url[i]);\n                            result.push(info ? info : null);\n                        } else {\n                            result.push(null);\n                        }\n                    }\n                    return result;\n                }\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n            return null;\n        }\n    }, {\n        key: 'SDKMetrics',\n        value: function SDKMetrics(config) {\n            try {\n                if (!(config && config.project)) return;\n\n                var instance = this.createInstance({\n                    project: config.project,\n                    devMode: config.devMode,\n                    metric: { combo: false }\n                });\n                if (!(instance && instance.metricManager)) return;\n\n                var metricManager = instance.metricManager;\n                var tags = {\n                    project: config.userProject || '',\n                    version: config.version || ''\n                };\n                if (_typeof(config.tags) === 'object') {\n                    tags = Extend(tags, config.tags);\n                }\n                metricManager.setTags(tags);\n                metricManager.setExtraData(config.version || '');\n\n                var random = Math.random();\n                var pvConf = Extend({ auto: true, sample: 0.01 }, config.pv);\n                if (pvConf.auto && random < pvConf.sample) {\n                    metricManager.setMetric('sdkPV', 1);\n                }\n\n                var resConf = Extend({ auto: true, sample: 0.01 }, config.resource);\n                if (config.url && resConf.auto && random < resConf.sample) {\n                    var duration = void 0;\n                    var info = this.getResTimingInfo(config.url);\n                    if (info instanceof Array) {\n                        for (var i = 0; i < info.length; i++) {\n                            if (info[i] && typeof info[i].duration !== 'undefined') {\n                                duration = info[i].duration;\n                                break;\n                            }\n                        }\n                    } else if (info && typeof info.duration !== 'undefined') {\n                        duration = info.duration;\n                    }\n                    if (!isNaN(duration)) metricManager.setMetric('sdkCDNTiming', duration);\n                }\n                metricManager.report();\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n        }\n    }]);\n\n    return OWL;\n}();\n\nvar Owl = new OWL({}, { noFilter: true });\nOwl.OWL = OWL;\n// Important(2021-03-30): mws-sdk 内判断 window.Owl.__version__ < '1.8.10' 时会重新加载 owl_latest.js 文件\n//   但这种判断方式不兼容 1.10.x 版本，导致版本为 1.10.x 时也会重新加载 owl 并覆盖此前的 window.Owl\n//   已反馈 mws-sdk 同学修复，但因为有 mws-sdk 缓存，因此暂时强制写为 1.9.5，至少两周后的新版本才可改回正常逻辑\n// Owl.__version__ = version\nOwl.__version__ = '1.9.5';\nOwl.errorModel = EM;\nOwl.MetricManager = function () {\n    var cfgManager = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Owl.cfgManager;\n\n    return new MetricManager(cfgManager);\n};\n\nOwl.start = function (configs) {\n    if (Util.checkIsSpider()) return;\n    if (window.Owl && window.Owl.isStarted) return;\n    this.isStarted = true;\n\n    var cfgManager = this.cfgManager;\n    configs = configs || {};\n    configs.pageUrl = configs.pageUrl || Util.getPageUrl();\n    cfgManager.set(configs);\n\n    var project = cfgManager.get('project');\n    var loganCfg = cfgManager.get('logan');\n    if (loganCfg && loganCfg.enable) {\n        Logan.ready({\n            LoganAPI: loganCfg.Logan,\n            project: project,\n            pageUrl: cfgManager.get('pageUrl'),\n            loganConfig: loganCfg.config,\n            version: loganCfg.version || '2.1.2'\n        });\n    }\n\n    // 不同环境下设定特定过滤规则\n    configFilter(cfgManager);\n\n    // auto capture performance, error & resource\n    catchPage(this.pageManager);\n    catchError(this.errManager);\n    catchResource(this.resManager);\n\n    var captureCfg = cfgManager.get('autoCatch') || {};\n    captureCfg.pv && this.reportPv(); // 自动上报一次pv\n\n    var spaCfg = cfgManager.get('SPA') || {};\n    if (spaCfg.autoPV || spaCfg.getFST) {\n        // 自动监听路由变化\n        Util.hackHistoryStateFuncs();\n\n        // 路由变化的回调\n        var that = this;\n        Event.on('validStateChange', function (pathInfo) {\n            try {\n                spaCfg.autoPV && that.resetPv({ delay: true });\n\n                // 页面加载完成后再进行路由页面的首屏监听计算以提升准确性\n                if (spaCfg.getFST && document.readyState == 'complete') {\n                    var path = pathInfo.path;\n                    var prevPath = that.prevRoutePath;\n                    that.prevRoutePath = path;\n                    that.pageManager.getRouteFst(path, prevPath);\n                }\n            } catch (e) {\n                Util.reportSysWarn(e);\n            }\n        });\n    }\n\n    var handleApiCall = function handleApiCall(args) {\n        try {\n            if (args && args.length) {\n                var name = args[0]; // api name\n                if (!name || typeof name != 'string') return Logger.warn('Api名称不是有效字符串');\n                if (name == 'start') return Logger.warn('start方法不可重复执行');\n                if (typeof Owl[name] != 'function') return Logger.warn(name + '\\u4E0D\\u662F\\u6709\\u6548\\u7684Api');\n\n                try {\n                    var params = args.slice(1); // api params\n                    return Owl[name].apply(Owl, params);\n                } catch (e) {\n                    Logger.warn(name + ' Api\\u6267\\u884C\\u62A5\\u9519');\n                    Logger.warn(e);\n                    Util.reportSysWarn(e);\n                }\n            } else {\n                Logger.warn('Api调用未传入有效参数');\n            }\n        } catch (e) {\n            Util.reportSysWarn(e);\n        }\n    };\n    var queue = window.owl && window.owl.q;\n    if (queue && queue.length) {\n        for (var i = 0; i < queue.length; i++) {\n            handleApiCall(queue[i]);\n        }\n    }\n    window.owl = function () {\n        var args = [].slice.call(arguments);\n        return handleApiCall(args);\n    };\n\n    var preLoadName = '_Owl_';\n    if (window[preLoadName]) {\n        window[preLoadName].isReady = true;\n\n        var _window$preLoadName = window[preLoadName],\n            preTasks = _window$preLoadName.preTasks,\n            dataSet = _window$preLoadName.dataSet;\n\n        if (preTasks && preTasks.length) {\n            // sync execute api tasks\n            preTasks.forEach(function (task) {\n                Owl[task.api] && Owl[task.api].apply(Owl, task.data);\n            });\n            window[preLoadName].preTasks = [];\n        }\n\n        setTimeout(function () {\n            // async report pre-catch data\n            if (dataSet && dataSet.length) {\n                dataSet.forEach(function (item) {\n                    try {\n                        if (item.type === 'jsError' && captureCfg.js) {\n                            var name = item.data && item.data[0].type === 'unhandledrejection' ? 'parsePromiseUnhandled' : 'parseWindowError';\n                            Owl.errManager[name].apply(Owl.errManager, item.data);\n                        } else if (item.type === 'resError' && captureCfg.resource) {\n                            Owl.resManager.handleResourceLoadError.apply(Owl.resManager, item.data);\n                        } else if (item.type === 'resTime') {\n                            Owl.resManager.handleResourceTiming.apply(Owl.resManager, item.data);\n                        } else if (item.type === 'pageTime') {\n                            Owl.pageManager.parsePageTime.apply(Owl.pageManager, item.data);\n                        }\n                    } catch (e) {}\n                });\n            }\n            window[preLoadName].dataSet = [];\n        }, 0);\n    }\n\n    this.errManager.checkCache();\n\n    // report Owl version\n    var versionReport = require('./version');\n    versionReport('owl_sdk', Owl);\n\n    // capture Owl self metrics\n    var urlPrefix = Util.getProtocol() + '//www.dpfile.com/app/owl/static/owl_';\n    this.SDKMetrics({\n        project: 'owl',\n        userProject: project,\n        version: version,\n        url: [urlPrefix + 'latest.js', urlPrefix + version + '.js']\n    });\n};\n\nif (!(window.Owl instanceof OWL)) {\n    window.Owl = Owl;\n}\n\n// 首先执行start方法，在start方法内处理其他的API调用\nvar queue = window.owl && window.owl.q;\nif (queue && queue.length) {\n    var item = queue[0];\n    if (item && item[0] === 'start') {\n        Owl.start(item[1]);\n    }\n}\n\nmodule.exports = Owl;","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Extend = require('./util/extend');\nvar Logger = require('./util/logger');\nvar Url = require('./util/url');\nvar guid = require('./util/pageid');\nvar sdkVersion = require('./constant/version').version;\nvar protocol = require('./constant/protocol');\nvar EXT = ['region', 'operator', 'network', 'container', 'os', 'unionId'];\nvar urlProduct = protocol + '//catfront.dianping.com';\nvar urlBeta = protocol + '//catfront.51ping.com';\n\n// 配置管理类\n\nvar CfgManager = function () {\n    function CfgManager(config) {\n        _classCallCheck(this, CfgManager);\n\n        this._config = {\n            devMode: false,\n            project: '',\n            pageUrl: '',\n            webVersion: '',\n            autoCatch: {\n                page: true,\n                ajax: true,\n                fetch: false,\n                resource: true,\n                js: true,\n                console: false,\n                pv: true\n            },\n            page: {\n                sample: 0.5,\n                auto: true,\n                sensoryIndex: true,\n                disableSensoryImageIndex: true,\n                interactToStopObserver: true,\n                noCheckOuterMutaCount: false,\n                fstPerfSample: 0.5,\n                fstPerfAnalysis: false,\n                logSlowView: false,\n                delay: 0,\n                logFirstScreen: false,\n                ignoreIframe: true,\n                mainResourceNumber: 5,\n                timeThreshold: 5\n            },\n            SPA: {\n                autoPV: false,\n                getFST: false\n            },\n            resource: {\n                sample: 0.1,\n                sampleApi: 0.1,\n                combo: true,\n                delay: 1000,\n                catchAbort: true,\n                catchTimeout: false,\n                enableStatusCheck: false,\n                ignoreMTSIForbidRequest: true\n            },\n            resourceReg: /(.51ping|.dianping|.dpfile|.meituan|.sankuai|.kuxun|.maoyan|.neixin|.mobike|.dper.com)/,\n            enableLogTrace: false,\n            ajax: {\n                invalid: true,\n                flag: false,\n                duration: 2000,\n                autoBusinessCode: false,\n                parseResponse: function parseResponse(res) {\n                    if (!res || (typeof res === 'undefined' ? 'undefined' : _typeof(res)) !== 'object') return {};\n                    return {\n                        code: res.code || res.status\n                    };\n                }\n            },\n            invalid: {\n                ajax: true\n            },\n            image: {\n                flag: false,\n                duration: 5000,\n                fileSize: 100,\n                filter: false\n            },\n            error: {\n                sample: 1,\n                delay: 1000,\n                combo: false,\n                maxSize: 1024 * 10,\n                maxNum: 100,\n                maxTime: 60 * 1000,\n                formatUnhandledRejection: false\n            },\n            useSendBeacon: false,\n            disableCache: true,\n            noScriptError: true,\n            metric: {\n                sample: 0.5,\n                combo: true,\n                delay: 1500\n            },\n            logan: {\n                enable: false\n            },\n            ignoreList: {\n                js: ['Illegal invocation'],\n                ajax: ['https?://report.meituan.com/', 'https?://logan.sankuai.com/'],\n                resource: ['https?://hls.dianping.com/', 'https?://frep.meituan.net/']\n            },\n            disabledFilters: [],\n            pageId: 'owl-' + guid()\n        };\n        this.baseQuery = {\n            v: 1,\n            sdk: sdkVersion\n        };\n        this.apiPaths = {\n            log: '/api/log',\n            error: '/api/log',\n            page: '/api/speed',\n            resource: '/batch',\n            metric: '/api/metric',\n            pv: '/api/pv',\n            fstInfo: '/raptorapi/fstSpeed',\n            fstLog: '/raptorapi/fstLog'\n        };\n        this.userConfig = {};\n        this.config = {};\n        this.extensions = {};\n        this.filters = [];\n        this.url = urlProduct;\n\n        if (config) {\n            this.set(config);\n        } else {\n            this.config = this._config;\n        }\n    }\n\n    _createClass(CfgManager, [{\n        key: 'get',\n        value: function get(key) {\n            return key ? this.config[key] : this.config;\n        }\n    }, {\n        key: 'set',\n        value: function set(data) {\n            for (var key in data) {\n                if (data.hasOwnProperty(key)) {\n                    var val = data[key];\n                    if (key === 'devMode') {\n                        this.setApiDomain(val);\n                        if (val) {\n                            Logger.setDebug();\n                        }\n                    }\n                    if (key === 'webVersion' && val) {\n                        this.baseQuery['webVersion'] = val;\n                    }\n                    if (key === 'ext') {\n                        this.setExtension(val);\n                    }\n                    if (key === 'resource' && val) {\n                        val.sample = undefined;\n                    }\n                    try {\n                        if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) !== 'object' || val instanceof RegExp || val instanceof Array) {\n                            this.userConfig[key] = key !== 'resourceReg' ? val : new RegExp(val);\n                        } else if (key !== 'pageUrl') {\n                            this.userConfig[key] = Extend(this.userConfig[key], val);\n                        }\n                    } catch (e) {\n                        Logger.ignore(e);\n                    }\n                }\n            }\n            this.update();\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            this.config = this._config;\n            for (var key in this.userConfig) {\n                var data = this.userConfig[key];\n                if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) != 'object' || data instanceof RegExp || data instanceof Array) {\n                    this.config[key] = data;\n                } else {\n                    this.config[key] = Extend(this.config[key], this.userConfig[key]);\n                }\n            }\n        }\n    }, {\n        key: 'setApiDomain',\n        value: function setApiDomain(isDev) {\n            this.url = isDev ? urlBeta : urlProduct;\n        }\n    }, {\n        key: 'getExtension',\n        value: function getExtension(key) {\n            return key ? this.extensions[key] : this.extensions;\n        }\n    }, {\n        key: 'setExtension',\n        value: function setExtension(exts) {\n            if (!exts) return;\n            for (var key in exts) {\n                if (exts.hasOwnProperty(key)) {\n                    var value = exts[key];\n                    if (key == 'latlng') {\n                        // 修改url参数, 声明使用经纬度替换region\n                        this.extensions['region'] = value;\n                        this.baseQuery['useLatlng'] = true;\n                    } else if (EXT.indexOf(key) > -1) {\n                        this.extensions[key] = value;\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'addFilter',\n        value: function addFilter(key, fn) {\n            if (key && fn instanceof Function && this.config.disabledFilters && this.config.disabledFilters.indexOf(key) === -1) {\n                var filterIndex = -1;\n                for (var i = 0; i < this.filters.length; i++) {\n                    var filter = this.filters[i];\n                    if (filter.key === key) {\n                        filterIndex = i;\n                        filter.fn = fn;\n                        break;\n                    }\n                }\n                if (filterIndex === -1) {\n                    this.filters.push({ key: key, fn: fn });\n                }\n            }\n        }\n    }, {\n        key: 'removeFilter',\n        value: function removeFilter(key) {\n            for (var i = 0; i < this.filters.length; i++) {\n                var filter = this.filters[i];\n                if (filter.key === key) {\n                    this.filters.splice(i, 1);\n                    return;\n                }\n            }\n        }\n    }, {\n        key: 'getApiPath',\n        value: function getApiPath(key) {\n            var path = this.apiPaths[key];\n            return Url.stringify(this.url + path, this.baseQuery);\n        }\n    }]);\n\n    return CfgManager;\n}();\n\nmodule.exports = CfgManager;","\"use strict\";\n\nmodule.exports = function extend(target, source) {\n    var ret = {};\n    if (target) {\n        for (var key in target) {\n            ret[key] = target[key];\n        }\n    }\n    if (source) {\n        for (var _key in source) {\n            if (source.hasOwnProperty(_key) && source[_key] !== undefined) {\n                ret[_key] = source[_key];\n            }\n        }\n    }\n    return ret;\n};","'use strict';\n\nmodule.exports = {\n    devMode: false,\n    setDebug: function setDebug() {\n        this.devMode = true;\n    },\n    ignore: function ignore() {\n        if (window.Owl && window.Owl.debugLog) {\n            window.console.log('【OWL日志:】');\n            window.console.log && window.console.log.apply(window.console, arguments);\n        }\n    },\n    log: function log(msg) {\n        this.devMode && console.log('[Owl]', msg);\n    },\n    warn: function warn(msg) {\n        this.devMode && console.warn('[Owl]', msg);\n    },\n    logScreen: function logScreen() {\n        if (window.Owl && window.Owl.cfgManager.get('page').logFirstScreen) {\n            console.log.apply(console, arguments);\n        }\n    }\n};","'use strict';\n\nmodule.exports = {\n    stringify: function stringify(url, data) {\n        if (!data) return url;\n\n        var param = [];\n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                param.push(key + '=' + data[key]);\n            }\n        }\n\n        return ~url.indexOf('?') ? url + '&' + param.join('&') : url + '?' + param.join('&');\n    },\n    // 1. url中有name参数, value不为空, 更新参数\n    // 2. url中有name参数, value为空, 删除参数\n    // 3. url中无name参数, value不为空, 增加参数\n    replaceParam: function replaceParam(url, name, value) {\n        if (!url || !name) return url;\n\n        try {\n            var pattern = new RegExp('(&' + name + '=)' + '([^\\\\?&]+)(&?)'); // eg: /(&webVersion=)([^\\?&]+)(&?)/\n            if (pattern.test(url)) {\n                if (value) {\n                    url = url.replace(pattern, '$1' + value + '$3');\n                } else {\n                    url = url.replace(pattern, '$3');\n                }\n            } else if (value) {\n                var temp = {};\n                temp[name] = value;\n                url = this.stringify(url, temp);\n            }\n        } catch (e) {}\n\n        return url;\n    }\n};","'use strict';\n\nfunction S4() {\n    return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n}\n\nfunction guid() {\n    return S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + Date.now();\n}\n\nmodule.exports = guid;","'use strict';\n\nexports.version = '1.11.1';","'use strict';\n\nvar protocol = window.location.protocol ? window.location.protocol : 'http:';\nprotocol = new RegExp('http').test(protocol) ? protocol : 'http:';\n\nmodule.exports = protocol;","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Ajax = require('../xhr');\nvar extend = require('../util/extend');\nvar EM = require('./model');\nvar DB = require('../util/db');\nvar Category = require('../constant/category');\nvar Level = require('../constant/level');\nvar Logger = require('../util/logger');\nvar Util = require('../util/index');\nvar Url = require('../util/url');\nvar Logan = require('../util/logan');\nvar Version = require('../constant/version').version;\nvar NAME = 'error';\n\nvar encodeDataBeforeSend = function encodeDataBeforeSend(data) {\n    return 'c=' + encodeURIComponent(JSON.stringify(data));\n};\n\nvar doSend = function doSend(opts) {\n    if (opts && opts.data) {\n        return Ajax({\n            url: opts.url,\n            type: 'POST',\n            header: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            data: encodeDataBeforeSend(opts.data),\n            success: opts.success,\n            fail: opts.fail,\n            xhrRewritten: opts.xhrRewritten\n        });\n    }\n};\n\n// Owl 错误管理类\n\nvar ErrorManager = function () {\n    function ErrorManager(cfgManager) {\n        _classCallCheck(this, ErrorManager);\n\n        this.cfgManager = cfgManager;\n        this.cache = [];\n        this.cacheSending = {};\n        this.comboTimeout = 0;\n        this.timeLimit = Date.now();\n        this.errorCount = 0;\n        this.isTimeLimit = false;\n        this.detectLeave();\n    }\n    // 解析 window.onerror 采集到的 JS 错误\n\n\n    _createClass(ErrorManager, [{\n        key: 'parseWindowError',\n        value: function parseWindowError(msg, url, line, col, error) {\n            try {\n                if (error && error.stack) {\n                    // this.push(error)\n                    error = this._processError(error);\n                    if (error.sec_category !== 'Invalid_Error') {\n                        error.rowNum = error.rowNum || line;\n                        error.colNum = error.colNum || col;\n                        error.resourceUrl = error.resourceUrl || url;\n                    }\n                    this._push(error);\n                } else if (typeof msg === 'string') {\n                    this._push({\n                        category: Category.SCRIPT,\n                        sec_category: msg,\n                        resourceUrl: url,\n                        rowNum: line,\n                        colNum: col\n                    });\n                }\n            } catch (e) {\n                this.reportSystemError(e);\n            }\n        }\n        // 处理 unhandledrejection 错误\n\n    }, {\n        key: 'parsePromiseUnhandled',\n        value: function parsePromiseUnhandled(event) {\n            if (!(event && event.type === 'unhandledrejection')) return;\n\n            try {\n                var reason = event.reason;\n                if (reason) {\n                    var name = 'unhandledrejection';\n                    var stack = '';\n                    if (reason instanceof Error) {\n                        var errName = reason.message || reason.name || '';\n                        if (errName && this.cfgManager.get(NAME).formatUnhandledRejection) {\n                            name = '[unhandledrejection] ' + errName;\n                        }\n                        stack = reason.stack || reason.toString() || '';\n                    } else {\n                        stack = reason;\n                    }\n                    this._push({\n                        category: Category.SCRIPT,\n                        sec_category: name,\n                        content: stack\n                    });\n                }\n            } catch (e) {\n                this.reportSystemError(e);\n            }\n        }\n    }, {\n        key: 'parseConsoleError',\n        value: function parseConsoleError() {\n            try {\n                var args = Array.prototype.slice.call(arguments);\n                if (!(args && args.length)) return;\n\n                var contents = [];\n                for (var i = 0; i < args.length; i++) {\n                    var arg = args[i];\n                    if (arg) {\n                        var msg = '';\n                        if (typeof arg === 'string') {\n                            msg = arg;\n                        } else if (arg instanceof window.Error) {\n                            msg = arg.stack || arg.message || '';\n                        } else if (arg instanceof window.ErrorEvent) {\n                            msg = arg.error && (arg.error.stack || arg.error.message) || arg.message || '';\n                        } else {\n                            msg = JSON.stringify(arg);\n                        }\n                        contents.push(msg);\n                    }\n                }\n\n                if (contents && contents.length) {\n                    this._push({\n                        category: Category.SCRIPT,\n                        sec_category: 'consoleError',\n                        content: contents.join(' ')\n                    });\n                }\n            } catch (e) {\n                this.reportSystemError(e);\n            }\n        }\n        // 监听页面卸载事件, 异步上报或存储还未上报的异常\n\n    }, {\n        key: 'detectLeave',\n        value: function detectLeave() {\n            var _this = this;\n\n            try {\n                var origin = window.onbeforeunload;\n                window.onbeforeunload = function () {\n                    var cacheDisabled = _this.cfgManager.get('disableCache') || window.Owl && window.Owl.cfgManager.get('disableCache');\n                    var useSendBeacon = _this.cfgManager.get('useSendBeacon') && window.navigator && window.navigator.sendBeacon;\n                    if (!cacheDisabled || useSendBeacon) {\n                        var cacheCombined = _this.addCacheExtension(); // 1.未进入上报流程\n                        var cacheSending = _this.cacheSending; // 2.上报流程未结束\n                        if (cacheSending && Object.keys(cacheSending).length) {\n                            for (var key in cacheSending) {\n                                try {\n                                    if (cacheSending.hasOwnProperty(key) && cacheSending[key]) {\n                                        var _cacheSending$key = cacheSending[key],\n                                            xhr = _cacheSending$key.xhr,\n                                            cache = _cacheSending$key.cache;\n\n                                        xhr.abort();\n                                        if (cache instanceof Array && cache.length) {\n                                            cacheCombined = cacheCombined.concat(cache);\n                                        }\n                                    }\n                                } catch (e) {\n                                    Logger.ignore(e);\n                                }\n                            }\n                        }\n                        if (cacheCombined && cacheCombined.length) {\n                            if (useSendBeacon) {\n                                var url = Url.stringify(_this.cfgManager.getApiPath(NAME), {\n                                    pageId: _this.cfgManager.get('pageId'),\n                                    beacon: 1\n                                });\n                                window.navigator.sendBeacon(url, encodeDataBeforeSend(cacheCombined));\n                            } else if (!cacheDisabled) {\n                                DB.add(cacheCombined, _this.cfgManager.get('webVersion'));\n                            }\n                        }\n                    }\n                    origin && origin.call();\n                };\n            } catch (e) {\n                Logger.ignore(e);\n            }\n        }\n        // 读取并上报 localStorage 中历史上报失败后存储的异常\n\n    }, {\n        key: 'checkCache',\n        value: function checkCache() {\n            var _this2 = this;\n\n            setTimeout(function () {\n                var preCache = DB.get();\n                DB.clearAll();\n                if ((typeof preCache === 'undefined' ? 'undefined' : _typeof(preCache)) === 'object' && Object.keys(preCache).length) {\n                    var cfgManager = _this2.cfgManager;\n                    var currVer = cfgManager.get('webVersion') || '';\n                    var originUrl = cfgManager.getApiPath(NAME);\n                    for (var key in preCache) {\n                        try {\n                            var data = preCache[key];\n                            if (data instanceof Array && data.length) {\n                                var cacheVer = key === 'no-version' ? '' : key;\n                                var url = cacheVer !== currVer ? Url.replaceParam(originUrl, 'webVersion', cacheVer) : originUrl;\n                                doSend({\n                                    url: url,\n                                    data: data,\n                                    xhrRewritten: cfgManager.get('autoCatch').ajax ? true : false\n                                });\n                            }\n                        } catch (e) {\n                            _this2.reportSystemError(e);\n                        }\n                    }\n                }\n            }, 4000);\n        }\n    }, {\n        key: 'reportSystemError',\n        value: function reportSystemError(err) {\n            var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n            if (!err) return;\n            try {\n                this.cache.push(new EM({\n                    project: 'owl',\n                    pageUrl: 'version_' + Version,\n                    category: opts.category || Category.SCRIPT,\n                    level: opts.level || Level.ERROR,\n                    realUrl: Util.getHref(),\n                    sec_category: err.message || err.name || 'parseError',\n                    content: err.stack ? JSON.stringify(err.stack) : err.toString && err.toString() || ''\n                }));\n                this.send(true);\n            } catch (e) {}\n        }\n    }, {\n        key: 'reportSystemWarn',\n        value: function reportSystemWarn(err, opts) {\n            if (!err) return;\n            opts = opts || {};\n            opts.level = Level.WARN;\n            this.reportSystemError(err, opts);\n        }\n    }, {\n        key: '_processError',\n        value: function _processError(errObj) {\n            var doFallback = function doFallback(err) {\n                var name = err.message || err.name || 'Invalid_Error';\n                var content = err instanceof Error ? err.toString() : JSON.stringify(err);\n                return {\n                    category: Category.SCRIPT,\n                    sec_category: name,\n                    content: content\n                };\n            };\n\n            var doParse = function doParse(err) {\n                if (err.stack) {\n                    var info = err.stack.match('https?://[^\\n]+');\n                    info = info ? info[0] : '';\n                    var jsReg = /https?:\\/\\/(\\S)+\\.js/;\n                    var scriptUrl = jsReg.test(info) ? info.match(jsReg)[0] : '';\n                    var rowCols = info.match(':(\\\\d+):(\\\\d+)');\n                    if (!rowCols) {\n                        rowCols = [0, 0, 0];\n                    }\n\n                    return {\n                        category: Category.SCRIPT,\n                        sec_category: err.message || err.name || '',\n                        content: err.stack,\n                        resourceUrl: scriptUrl,\n                        rowNum: rowCols[1],\n                        colNum: rowCols[2]\n                    };\n                } else {\n                    return doFallback(err);\n                }\n            };\n\n            try {\n                return doParse(errObj);\n            } catch (e) {\n                this.reportSystemError(e);\n                return doFallback(errObj);\n            }\n        }\n    }, {\n        key: '_push',\n        value: function _push(error, opts) {\n            error = this.parse(error);\n            this.push(new EM(error), opts);\n        }\n        // 向错误队列增加资源错误 resourceError\n\n    }, {\n        key: '_pushResource',\n        value: function _pushResource() {\n            if (Math.random() > this.cfgManager.get('resource').sample) return;\n            this._push.apply(this, arguments);\n        }\n        // 统一处理错误属性\n\n    }, {\n        key: 'parse',\n        value: function parse(error) {\n            if (!error.project) {\n                error.project = this.cfgManager.get('project');\n            }\n            if (!error.pageUrl) {\n                error.pageUrl = this.cfgManager.get('pageUrl') || 'default';\n            }\n            if (!error.unionId) {\n                error.unionId = this.cfgManager.getExtension('unionId');\n            }\n            error.realUrl = Util.getHref();\n\n            return error;\n        }\n        // 格式化错误信息并 push 至错误队列中\n\n    }, {\n        key: 'push',\n        value: function push(error, opts) {\n            var cfgManager = this.cfgManager;\n            var errCfg = cfgManager.get(NAME);\n            if (!error || Math.random() > errCfg.sample) return;\n\n            // format as ErrorModel\n            if (!(error instanceof EM)) {\n                if (error instanceof Error) {\n                    error = this._processError(error);\n                } else if (typeof error === 'string') {\n                    error = { sec_category: error };\n                } else if ((typeof error === 'undefined' ? 'undefined' : _typeof(error)) === 'object') {\n                    error = {\n                        sec_category: error.name || '',\n                        content: error.msg || ''\n                    };\n                }\n                error = this.parse(error);\n                error = new EM(error);\n            }\n            if (error.content && error.content.length >= errCfg.maxSize) return;\n\n            error.update(opts);\n            try {\n                var seen = [];\n                var logInfo = JSON.stringify(error.toLoganJson(), function (k, v) {\n                    if ((typeof v === 'undefined' ? 'undefined' : _typeof(v)) === 'object' && v !== null) {\n                        if (seen.indexOf(v) >= 0) {\n                            return;\n                        }\n                        seen.push(v);\n                    }\n                    return v;\n                });\n                Logan._log('[Error]:' + logInfo, 'owl', error.level, [error.category]);\n            } catch (e) {\n                this.reportSystemError(e);\n            }\n\n            // 异常过滤策略 (Script error / filters / ignoreList.js)\n            var isValid = true;\n            if (cfgManager.get('noScriptError') && error.sec_category.indexOf('Script error') === 0) {\n                return isValid = false;\n            }\n            var filters = cfgManager.filters;\n            if (filters && filters.length) {\n                for (var i = 0; i < filters.length; i++) {\n                    var filter = filters[i];\n                    if (!filter.fn(error)) {\n                        return isValid = false;\n                    }\n                }\n            }\n            var ignoreErrors = cfgManager.get('ignoreList').js;\n            if (ignoreErrors && ignoreErrors.length) {\n                for (var _i = 0; _i < ignoreErrors.length; _i++) {\n                    if (error.sec_category.indexOf(ignoreErrors[_i]) === 0) {\n                        isValid = false;\n                        break;\n                    }\n                }\n            }\n            if (!isValid) return;\n\n            // 广播自定义事件, 告知外部采集到了有效的异常信息\n            try {\n                if (window && window.dispatchEvent && error && error.getEventInfo) {\n                    var eventInfo = error.getEventInfo({\n                        'pageId': cfgManager.get('pageId') || ''\n                    });\n                    var errEvent = void 0;\n                    if (typeof window.CustomEvent === 'function') {\n                        errEvent = new CustomEvent('owlErrDetected', { 'detail': eventInfo });\n                    } else if (document && typeof document.createEvent === 'function') {\n                        // polyfill CustomEvent for IE9+\n                        var evt = document.createEvent('CustomEvent');\n                        if (typeof evt.initCustomEvent === 'function') {\n                            errEvent = evt.initCustomEvent('owlErrDetected', false, false, eventInfo);\n                        }\n                    }\n                    errEvent && window.dispatchEvent(errEvent);\n                }\n            } catch (e) {\n                this.reportSystemError(e);\n            }\n\n            if (!this.isExist(error)) {\n                error = this._handleError(error);\n                if (error) {\n                    this.cache.push(error);\n                    this.send();\n                }\n            }\n        }\n        // 判断错误是否已存在当前错误队列中\n\n    }, {\n        key: 'isExist',\n        value: function isExist(error) {\n            for (var i = 0; i < this.cache.length; i++) {\n                var element = this.cache[i];\n                if (!(element instanceof EM)) {\n                    element = new EM(element);\n                }\n                if (element.isEqual(error)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        // 异常上报前的拦截处理\n\n    }, {\n        key: '_handleError',\n        value: function _handleError(instance) {\n            try {\n                var hook = this.cfgManager.get('onErrorPush');\n                if (hook instanceof Function) {\n                    instance = hook(instance);\n                }\n                if (instance instanceof EM || instance === undefined) {\n                    return instance;\n                } else {\n                    Logger.ignore('onErrorPush 方法的返回值仅能为ErrorModel实例或undefined');\n                }\n            } catch (e) {\n                Logger.ignore('onErrorPush 方法处理有误', e);\n                return instance;\n            }\n        }\n    }, {\n        key: 'report',\n        value: function report() {\n            this.push.apply(this, arguments);\n            this.send(true);\n        }\n        // 异常上报流程\n\n    }, {\n        key: 'send',\n        value: function send(isReportNow) {\n            var _this3 = this;\n\n            var cfgManager = this.cfgManager;\n            var errCfg = cfgManager.get(NAME);\n            var comboTimeout = this.comboTimeout;\n\n            // 限制 maxTime 内上报的异常数不能超过 maxNum\n            var maxError = errCfg.maxNum || 100;\n            var maxTime = errCfg.maxTime || 60 * 1000;\n            var timeLimit = Date.now() - this.timeLimit;\n            if (!this.isTimeLimit) {\n                this.timeLimit = Date.now();\n            }\n            this.isTimeLimit = true;\n\n            var comboReport = function comboReport() {\n                if (!_this3.cache.length) return;\n\n                clearTimeout(comboTimeout);\n                comboTimeout = 0;\n\n                try {\n                    _this3.errorCount += _this3.cache.length;\n                    if (timeLimit <= maxTime) {\n                        if (_this3.errorCount >= maxError) return;\n                    } else {\n                        _this3.isTimeLimit = false;\n                        _this3.errorCount = 0;\n                    }\n                } catch (e) {\n                    Logger.ignore(e);\n                }\n\n                var cache = _this3.addCacheExtension();\n                var ts = +new Date();\n                var xhr = doSend({\n                    url: cfgManager.getApiPath(NAME) + ('&pageId=' + cfgManager.get('pageId')),\n                    data: cache,\n                    success: function success() {\n                        _this3.cacheSending[ts] = undefined;\n                    },\n                    fail: function fail() {\n                        try {\n                            if (!(cfgManager.get('disableCache') || window.Owl && window.Owl.cfgManager.get('disableCache'))) {\n                                var record = _this3.cacheSending[ts];\n                                if (record && record.cache && record.cache.length) {\n                                    DB.add(record.cache, cfgManager.get('webVersion'));\n                                }\n                            }\n                            _this3.cacheSending[ts] = undefined;\n                        } catch (e) {\n                            _this3.cacheSending[ts] = undefined;\n                            Logger.ignore(e);\n                        }\n                    },\n                    xhrRewritten: cfgManager.get('autoCatch').ajax ? true : false\n                });\n                _this3.cacheSending[ts] = { xhr: xhr, cache: cache };\n                _this3.cache = [];\n            };\n\n            var delay = errCfg.delay;\n            if (isReportNow) {\n                comboReport();\n            } else if (!comboTimeout && delay !== -1) {\n                comboTimeout = setTimeout(comboReport, delay);\n            }\n        }\n        // 绑定 Extension 扩展信息\n\n    }, {\n        key: 'addCacheExtension',\n        value: function addCacheExtension() {\n            var cache = this.cache;\n            var ret = [];\n            if (!(cache && cache.length)) return ret;\n\n            var ext = this.cfgManager.getExtension();\n            for (var i = 0; i < cache.length; i++) {\n                var error = cache[i];\n                if (ext && (typeof ext === 'undefined' ? 'undefined' : _typeof(ext)) === 'object') {\n                    error = extend(error.toJson(), ext);\n                }\n                ret.push(error);\n            }\n            return ret;\n        }\n    }]);\n\n    return ErrorManager;\n}();\n\nmodule.exports = ErrorManager;","'use strict';\n\nvar Util = require('./util/index');\nvar NOOP = function NOOP() {};\n\n// 封装 AJAX 接口\nmodule.exports = function (opts) {\n    if (!opts) return;\n\n    var UA = Util.getUserAgent();\n    var browserName = Util.getAppName();\n    var isIE89 = browserName.indexOf('Microsoft Internet Explorer') !== -1 && (UA.indexOf('MSIE 8.0') !== -1 || UA.indexOf('MSIE 9.0') !== -1);\n    var useXDomainRequest = isIE89 && window.XDomainRequest;\n\n    var req = void 0;\n    if (useXDomainRequest) {\n        req = new XDomainRequest();\n    } else {\n        req = new XMLHttpRequest();\n    }\n\n    req.open(opts.type || 'GET', opts.url, true);\n    req.success = opts.success || NOOP;\n    req.fail = opts.fail || NOOP;\n\n    var _handleXhrEvent = function _handleXhrEvent(event) {\n        if (event && /catfront.(dianping|51ping).com/.test(opts.url)) {\n            if (event.currentTarget.status === 200) {\n                req.success && req.success();\n            } else {\n                req.fail && req.fail();\n            }\n        }\n    };\n\n    // 当设置了 autoCatch.ajax 为false时，也需要支持 success/fail 回调\n    if (opts.xhrRewritten === false && !useXDomainRequest) {\n        if ('addEventListener' in req) {\n            req.addEventListener('load', _handleXhrEvent);\n            req.addEventListener('error', _handleXhrEvent);\n            req.addEventListener('abort', _handleXhrEvent);\n        } else {\n            var _originStateChange = req.onreadystatechange;\n            req.onreadystatechange = function (event) {\n                if (this.readyState === 4) {\n                    _handleXhrEvent(event);\n                }\n                if (_originStateChange) {\n                    _originStateChange.apply(this, arguments);\n                }\n            };\n        }\n    }\n\n    if (opts.type === 'POST') {\n        if (opts.header && !useXDomainRequest) {\n            for (var key in opts.header) {\n                if (opts.header.hasOwnProperty(key)) {\n                    req.setRequestHeader(key, opts.header[key]);\n                }\n            }\n        }\n        req.send(opts.data);\n    } else {\n        req.send();\n    }\n\n    return req;\n};","'use strict';\n\nvar Event = require('./event');\nvar spiderList = ['baiduspider', 'googlebot', 'bingbot', 'yammybot', '360spider', 'haosouspider', 'youdaobot', 'sogou news spider', 'yisouspider', 'mtdp-infosec', 'mtdp-searchspider', 'yandexbot', 'yandexmobilebot'];\nvar _int64Convert = require('int64-convert');\nvar uuid = require('uuid');\nvar _uuid = uuid && uuid.__esModule ? uuid : { default: uuid };\n\nmodule.exports = {\n    // 复写History对象方法以实现路由变化的监听\n    hackHistoryStateFuncs: function hackHistoryStateFuncs() {\n        if (this.historyStateHacked) return;\n\n        var ADD_EVENT = window.addEventListener || window.attachEvent;\n        var that = this;\n        ADD_EVENT('hashchange', function (event) {\n            try {\n                var newURL = event && event.newURL || '';\n                var oldURL = event && event.oldURL || '';\n                var curPath = that.parseRoutePath(newURL);\n                var prePath = that.parseRoutePath(oldURL);\n                if (curPath && prePath && curPath !== prePath) {\n                    // 路由路径发生了变化\n                    Event.trigger('validStateChange', { path: curPath });\n                }\n            } catch (e) {\n                that.reportSysError(e);\n            }\n        });\n\n        try {\n            this.hackStateFunc('pushState');\n            this.hackStateFunc('replaceState');\n        } catch (e) {\n            this.reportSysWarn(e);\n        }\n\n        this.historyStateHacked = true;\n    },\n    hackStateFunc: function hackStateFunc(name) {\n        var oldFunc = window.history[name];\n        if (typeof oldFunc == 'function') {\n            var that = this;\n            window.history[name] = function (state, title, url) {\n                var preHref = location.href;\n                var result = oldFunc.apply(window.history, [].slice.call(arguments));\n                var curHref = location.href; // location.href 已完成变更\n                if (!url || typeof url != 'string' || curHref === preHref) return result;\n\n                try {\n                    var prePath = that.parseRoutePath(preHref);\n                    var curPath = that.parseRoutePath(curHref);\n                    if (curPath && prePath && curPath !== prePath) {\n                        // 路由路径发生了变化\n                        Event.trigger('validStateChange', { path: curPath });\n                    }\n                } catch (e) {\n                    that.reportSysError(e);\n                }\n\n                return result;\n            };\n        }\n    },\n    // 解析出url的路径部分\n    parseRoutePath: function parseRoutePath(url) {\n        if (url && typeof url == 'string') {\n            var path = url.replace(/^(https?:)?(\\/\\/[^\\/]*)?/, '');\n            var query = path.match(/\\?.*$/) && path.match(/\\?.*$/)[0] || '';\n            var hashAfterQuery = query.match(/\\#.*$/) && query.match(/\\#.*$/)[0] || '';\n            return path.replace(/\\?.*$/, '') + hashAfterQuery;\n        } else {\n            return '';\n        }\n    },\n    getHref: function getHref() {\n        return location && location.href || '';\n    },\n    getProtocol: function getProtocol() {\n        return location && location.protocol || 'https:';\n    },\n    getOrigin: function getOrigin() {\n        return location.origin || location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');\n    },\n    getPageUrl: function getPageUrl() {\n        return this.getHref().replace(/\\?.*(?=(\\#))/, '').replace(/\\?.*/, '');\n    },\n    getPerfTiming: function getPerfTiming() {\n        return window.performance && window.performance.timing;\n    },\n    getConnectionType: function getConnectionType() {\n        var connection = window.navigator && window.navigator.connection;\n        return connection ? connection.effectiveType || connection.type || '' : '';\n    },\n    reportSysError: function reportSysError(err) {\n        var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        var errManager = window.Owl && window.Owl.errManager;\n        if (errManager && typeof errManager.reportSystemError === 'function') {\n            errManager.reportSystemError(err, opts);\n        }\n    },\n    reportSysWarn: function reportSysWarn(err, opts) {\n        opts = opts || {};\n        opts.level = 'warn';\n        this.reportSysError(err, opts);\n    },\n    getUserAgent: function getUserAgent() {\n        return window.navigator && window.navigator.userAgent || '';\n    },\n    getAppName: function getAppName() {\n        return window.navigator.appName;\n    },\n    checkIsSpider: function checkIsSpider() {\n        try {\n            var ua = this.getUserAgent().toLowerCase();\n            for (var i = 0; i < spiderList.length; i++) {\n                if (ua.indexOf(spiderList[i]) > -1) return true;\n            }\n        } catch (e) {\n            this.reportSysError(e);\n        }\n        return false;\n    },\n    getFullUrl: function getFullUrl(url) {\n        if (url.indexOf('//') === 0) {\n            url = this.getProtocol() + url;\n        } else if (url.indexOf('/') === 0) {\n            url = this.getOrigin() + url;\n        }\n        return url;\n    },\n    checkSameOrigin: function checkSameOrigin(url) {\n        var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n        origin = origin || this.getOrigin();\n        if (!(url && origin)) return false;\n\n        url = this.getFullUrl(url);\n        return url.indexOf(origin) === 0;\n    },\n    traceid: function traceid() {\n        try {\n            var uu = _uuid.default.v1().replace(/-/g, '');\n            var f16 = uu.slice(0, 16);\n            var l16 = uu.slice(16);\n            var hex = Array(16).fill(0).map(function (_, i) {\n                return parseInt(f16[15 - i], 16) ^ parseInt(l16[15 - i], 16);\n            }).map(function (it) {\n                return it.toString(16);\n            }).join('');\n            return (0, _int64Convert.signedHexToDec)(hex);\n        } catch (e) {\n            this.reportSysError(e);\n            return '';\n        }\n    },\n    getXPath: function getXPath(node) {\n        var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;\n\n        try {\n            var id = node.id ? '#' + node.id : '';\n            var className = 'string' === typeof node.className && node.className ? '.' + node.className.split(' ').join('.') : '';\n            var nodeName = 'string' === typeof node.nodeName ? node.nodeName.toLowerCase() : '';\n            var path = nodeName + id + className;\n            return node.parentNode && node.parentNode.nodeName && count - 1 > 0 ? this.getXPath(node.parentNode, count - 1) + ' > ' + path : path;\n        } catch (e) {\n            return '';\n        }\n    }\n};","\"use strict\";\n\nmodule.exports = {\n    on: function on(name, listener) {\n        if (!name || !listener) return;\n\n        this._events_ = this._events_ || {};\n        this._events_[name] = this._events_[name] || [];\n        this._events_[name].push(listener);\n    },\n    trigger: function trigger(name) {\n        var events = this._events_;\n        if (!name || !events || !events[name]) return;\n\n        var queue = events[name];\n        var args = [].slice.call(arguments, 1);\n        for (var i = 0; i < queue.length; i++) {\n            queue[i].apply(this, args);\n        }\n    }\n};","'use strict';\n\n(function () {\n  /*\n   * @desc trim number string, remove front zero\n   * @params {String} number string\n   * @return {String} trimed number string\n   */\n  function trim(str) {\n    while(str[0] === '0' && str.length > 1) {\n      str = str.slice(1);\n    }\n    return str;\n  }\n  /*\n   * @desc polish number string, add front zero\n   * @params {String} number string\n   * @params {Number} target length\n   * @return {String} polished number string\n   */\n  function polish(str, len) {\n    while(str.length < len) {\n      str = '0' + str;\n    }\n    return str;\n  }\n  /*\n   * @desc convert char to number\n   * @params {String} number char\n   * @params {Number} scale\n   * @return {Number} polished number string\n   */\n  function toNumber(char, scale) {\n    if (!char) {\n      return 0;\n    }\n    var num = parseInt(char, scale);\n    if (isNaN(num)) {\n      throw new Error(\"parse char '\" + char + \"' to number(\" + scale + \") failed\");\n    }\n    return num;\n  }\n  /*\n   * @desc compare two number string\n   * @params {String} first number string\n   * @params {String} second number string\n   * @params {Number} scale\n   * @return {Number} 1 0 -1\n   */\n  function compare(firstr, secstr, scale) {\n    if (firstr.length > secstr.length) {\n      return 1;\n    } else if (firstr.length < secstr.length) {\n      return -1;\n    } else {\n      var i = 0;\n      while(i < firstr.length) {\n        var fn = toNumber(firstr[i], scale);\n        var sn = toNumber(secstr[i], scale)\n        if (fn > sn) {\n          return 1;\n        } else if (fn < sn) {\n          return -1;\n        }\n        i++;\n      }\n    }\n    return 0;\n  }\n  /*\n   * @desc add two number string\n   * @params {String} first number string\n   * @params {String} second number string\n   * @params {Number} scale\n   * @return {String} added number string\n   */\n  function add(firstr, secstr, scale) {\n    var result = '';\n    var firlen = firstr.length;\n    var seclen = secstr.length;\n    var n;\n    var carry = 0;\n    var remainder;\n    var i = 0;\n    while(i < firlen || i < seclen) {\n      i++;\n      n = toNumber(firstr[firlen - i], scale) + toNumber(secstr[seclen - i], scale) + carry;\n      carry = Math.floor(n / scale);\n      remainder = n % scale;\n      result = remainder.toString(scale) + result;\n    }\n    while(carry > 0) {\n      remainder = carry % scale;\n      result = remainder.toString(scale) + result;\n      carry = Math.floor(carry / scale);\n    }\n    return result;\n  }\n  /*\n   * @desc sub two number string\n   * @params {String} first number string\n   * @params {String} second number string\n   * @params {Number} scale\n   * @return {String} subed number string\n   */\n  function sub(firstr, secstr, scale) {\n    if (compare(firstr, secstr, scale) < 0) {\n      return sub(secstr, firstr, scale);\n    }\n    var result = '';\n    var firlen = firstr.length;\n    var seclen = secstr.length;\n    var n;\n    var carry = 0;\n    var i = 0;\n    while(i < firlen) {\n      i++;\n      n = toNumber(firstr[firlen - i], scale) - toNumber(secstr[seclen - i], scale) + carry;\n      if (n < 0) {\n        carry = -1;\n        n = n + scale;\n      }\n      result = n.toString(scale) + result;\n    }\n    return trim(result);\n  }\n\n  /*\n   * @desc multiply number string\n   * @params {String} number string multiplicand\n   * @params {Number} multiplier\n   * @params {Number} scale\n   * @return {String} multiplied number string\n   */\n  function multiply(str, multiplier, scale) {\n    var result = '';\n    var n;\n    var carry = 0;\n    var remainder;\n    var i = str.length;\n    while(--i >= 0) {\n      n = toNumber(str[i], scale) * multiplier + carry;\n      carry = Math.floor(n / scale);\n      remainder = n % scale;\n      result = remainder.toString(scale) + result;\n    }\n    while(carry > 0) {\n      remainder = carry % scale;\n      result = remainder.toString(scale) + result;\n      carry = Math.floor(carry / scale);\n    }\n    return result;\n  }\n  /*\n   * @desc convert number string from scale to scale\n   * @params {String} number string\n   * @params {Number} from scale\n   * @params {Number} to scale\n   * @params {Boolean} fullfill int64 value\n   * @return {String} converted number string\n   */\n  function convert(src, fromScale, toScale, polishLen) {\n    src = trim(src);\n    fromScale = fromScale || 10;\n    toScale = toScale || 16;\n    var result = '0';\n    var n;\n    var rate = '1';\n    var i = 0;\n    while(i++ < src.length) {\n      n = multiply(rate, toNumber(src[src.length - i], fromScale), toScale);\n      result = add(result, n, toScale);\n      rate = multiply(rate, fromScale, toScale);\n    }\n    if (polishLen) {\n      return polish(result, polishLen);\n    }\n    return result;\n  }\n\n  convert.signedHexToDec = function (src) {\n    var negate = src.length > 15 && toNumber(src[0], 16) >= 8;\n    var result = convert(negate ? sub('10000000000000000', src, 16) : src, 16, 10);\n    return negate ? '-' + result : result;\n  }\n\n  convert.signedDecToHex = function (src, polishLen) {\n    var negate = src[0] === '-';\n    var result = convert(negate ? src.slice(1) : src, 10, 16, polishLen)\n    return negate ? sub('10000000000000000', result, 16) : result;\n  }\n  /*\n   * @export\n   */\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = convert;\n  } else if ( typeof define === \"function\" && define.amd ) {\n    define(\"convert\", [], function () { return convert; })\n  } else {\n    window.convert = convert;\n  }\n})();","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Util = require('../util/index');\nvar extend = require('../util/extend');\nvar Category = require('../constant/category');\nvar Level = require('../constant/level');\nvar errKeys = ['project', 'pageUrl', 'realUrl', 'resourceUrl', 'category', 'sec_category', 'level', 'unionId', 'timestamp', 'content', 'traceid'];\nvar VALID_ATTR = ['rowNum', 'colNum', 'tags'].concat(errKeys);\nvar eventKeys = ['project', 'pageUrl', 'category', 'sec_category', 'level', 'unionId'];\n\n/**\n * 异常数据模型\n *\n * @param {string} project - 错误所在项目\n * @param {string} pageUrl - 错误聚合页面地址\n * @param {string} realUrl - 错误真实地址\n * @param {string} [resourceUrl] - 错误资源地址\n * @param {string} category - 错误类型jsError, resourceError, ajaxError\n * @param {string} sec_category - 错误名称，用户错误聚合\n * @param {string} level - 错误程度, 默认error, 分类info, debug, error, warn\n * @param {string} [content] - 错误详细日志信息\n * @param {Number} [rowNum] - 错误行\n * @param {Number} [colNum] - 错误列\n * @param {Number} timestamp - 时间戳\n * @param {string} unionId - unionId\n * @param {Object} [tags] - 其他用户自定义信息\n */\n\nvar OwlError = function () {\n    function OwlError(data) {\n        _classCallCheck(this, OwlError);\n\n        if (!data) return;\n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                this[key] = data[key];\n            }\n        }\n        this.parse(data);\n    }\n\n    _createClass(OwlError, [{\n        key: 'parse',\n        value: function parse() {\n            this.category = this.category || Category.SCRIPT;\n            this.level = this.level || Level.ERROR;\n            this.timestamp = this.timestamp || +new Date();\n            this.sec_category = this.sec_category || 'default';\n        }\n    }, {\n        key: 'isEqual',\n        value: function isEqual(other) {\n            return this.sec_category === other.sec_category && this.resourceUrl === other.resourceUrl && this.colNum === other.colNum && this.rowNum === other.rowNum && this.content === other.content;\n        }\n    }, {\n        key: 'update',\n        value: function update(data) {\n            if (data) {\n                for (var key in data) {\n                    if (data[key] !== undefined && VALID_ATTR.indexOf(key) > -1) {\n                        this[key] = data[key];\n                    }\n                }\n            }\n            return this;\n        }\n    }, {\n        key: 'updateTags',\n        value: function updateTags(obj) {\n            this.tags = extend(this.tags || {}, obj);\n            return this;\n        }\n    }, {\n        key: 'toJson',\n        value: function toJson() {\n            var _this = this;\n\n            var str = {};\n            errKeys.map(function (key) {\n                if (_this[key] !== undefined) {\n                    str[key] = _this[key];\n                }\n            });\n\n            var rowNum = this.rowNum;\n            var colNum = this.colNum;\n            if (str.category === Category.SCRIPT && rowNum && colNum) {\n                str.dynamicMetric = { rowNum: rowNum, colNum: colNum };\n            }\n            if (this.tags) {\n                str.dynamicMetric = extend(str.dynamicMetric || {}, this.tags);\n            }\n\n            return str;\n        }\n    }, {\n        key: 'toLoganJson',\n        value: function toLoganJson() {\n            var _this2 = this;\n\n            var info = {};\n            VALID_ATTR.map(function (key) {\n                if (_this2[key] !== undefined) {\n                    info[key] = _this2[key];\n                }\n            });\n\n            try {\n                var content = info.content || '';\n                if (typeof content !== 'string') {\n                    content = JSON.stringify(content);\n                }\n                info.content = content.substr && content.substr(0, 200) || '';\n            } catch (e) {\n                info.content = '';\n                Util.reportSysError(e);\n            }\n\n            return info;\n        }\n    }, {\n        key: 'getEventInfo',\n        value: function getEventInfo() {\n            var _this3 = this;\n\n            var ext = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n            var temp = {};\n            eventKeys.map(function (key) {\n                if (_this3[key] !== undefined) {\n                    temp[key] = _this3[key];\n                }\n            });\n            for (var key in ext) {\n                if (ext.hasOwnProperty(key)) {\n                    temp[key] = ext[key];\n                }\n            }\n            return temp;\n        }\n    }]);\n\n    return OwlError;\n}();\n\nOwlError.LEVEL = Level;\nOwlError.CATEGORY = Category;\n\nmodule.exports = OwlError;","'use strict';\n\nmodule.exports = {\n    SCRIPT: 'jsError',\n    AJAX: 'ajaxError',\n    RESOURCE: 'resourceError'\n};","'use strict';\n\nmodule.exports = {\n  ERROR: 'error',\n  INFO: 'info',\n  WARN: 'warn',\n  DEBUG: 'debug'\n};","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar isSupport = require('./ls');\nvar Logger = require('./logger');\nvar LS_KEY = 'owl_cache';\nvar LS_KEY_V2 = 'owl_cache_v2';\n\nmodule.exports = {\n    isSupport: isSupport(),\n    get: function get() {\n        if (!this.isSupport) return;\n        var data = {};\n        try {\n            var rawV2 = localStorage.getItem(LS_KEY_V2); // new storage format - Object\n            if (rawV2) {\n                var tempV2 = JSON.parse(rawV2);\n                if ((typeof tempV2 === 'undefined' ? 'undefined' : _typeof(tempV2)) === 'object' && Object.keys(tempV2).length) {\n                    data = tempV2;\n                }\n            }\n        } catch (e) {\n            this.clear(LS_KEY_V2);\n            Logger.ignore(e);\n        }\n        try {\n            var raw = localStorage.getItem(LS_KEY); // history storage format - Array\n            if (raw) {\n                var temp = JSON.parse(raw);\n                if (temp instanceof Array) {\n                    data['no-version'] = temp.concat(data['no-version'] || []);\n                }\n            }\n        } catch (e) {\n            this.clear(LS_KEY);\n            Logger.ignore(e);\n        }\n        return data;\n    },\n    add: function add(cache, version) {\n        if (!this.isSupport) return;\n        try {\n            if (cache instanceof Array) {\n                version = version || 'no-version';\n                var preCache = this.get();\n                if (preCache[version] instanceof Array) {\n                    preCache[version] = cache.concat(preCache[version]);\n                } else {\n                    preCache[version] = cache;\n                }\n                localStorage.setItem(LS_KEY_V2, JSON.stringify(preCache));\n            }\n        } catch (e) {\n            Logger.ignore(e);\n        }\n    },\n    clear: function clear(key) {\n        if (!this.isSupport) return;\n        try {\n            key = key || LS_KEY;\n            localStorage.removeItem(key);\n        } catch (e) {\n            Logger.ignore(e);\n        }\n    },\n    clearAll: function clearAll() {\n        if (!this.isSupport) return;\n        try {\n            localStorage.removeItem(LS_KEY);\n            localStorage.removeItem(LS_KEY_V2);\n        } catch (e) {}\n    },\n    clearItem: function clearItem(version) {\n        if (!this.isSupport) return;\n        try {\n            var preCache = this.get();\n            if ((typeof preCache === 'undefined' ? 'undefined' : _typeof(preCache)) === 'object' && preCache.hasOwnProperty(version)) {\n                delete preCache[version];\n                if (Object.keys(preCache).length) {\n                    localStorage.setItem(LS_KEY_V2, JSON.stringify(preCache));\n                } else {\n                    localStorage.removeItem(LS_KEY_V2);\n                }\n                if (version === 'no-version') {\n                    localStorage.removeItem(LS_KEY);\n                }\n            }\n        } catch (e) {\n            Logger.ignore(e);\n        }\n    }\n};","'use strict';\n\nmodule.exports = function () {\n    var testKey = 'owl_local_test';\n    try {\n        localStorage.setItem(testKey, 1);\n        localStorage.removeItem(testKey);\n    } catch (e) {\n        return false;\n    }\n    return true;\n};","'use strict';\n\nvar loadScript = require('./load').loadScript;\nvar prefixV1 = '//www.dpfile.com/app/dp-logan-web/logan_';\nvar prefixV2 = '//s3.meituan.net/v1/mss_eb9ea9cfff9840198c3ae909b17b4270/production/logan-websdk/logan_';\nvar Logan = void 0;\nvar enable = false;\n\nmodule.exports = {\n    queue: [],\n    ready: function ready() {\n        var _this = this;\n\n        var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var LoganAPI = config.LoganAPI,\n            project = config.project,\n            pageUrl = config.pageUrl,\n            loganConfig = config.loganConfig,\n            version = config.version;\n\n        enable = true;\n\n        var doTask = function doTask() {\n            if (!Logan) return;\n            if (loganConfig) Logan = Logan.config(loganConfig);\n\n            Logan.log('[Session]:' + JSON.stringify({ project: project, pageUrl: pageUrl }), 'owl', 'info', ['session']);\n\n            while (_this.queue.length) {\n                Logan.log(_this.queue.shift(), 'owl');\n            }\n        };\n\n        if (LoganAPI) {\n            Logan = LoganAPI;\n            doTask();\n        } else {\n            try {\n                if (window.Logan) {\n                    Logan = window.Logan;\n                    doTask();\n                } else {\n                    var url = (version.indexOf('1.') === 0 ? prefixV1 : prefixV2) + version + '.js';\n                    loadScript(url, function () {\n                        Logan = window.Logan;\n                        doTask();\n                    });\n                }\n            } catch (e) {\n                console.log('logan 加载失败');\n            }\n        }\n    },\n    log: function log(msg) {\n        var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        if (!enable) return;\n\n        var type = opts.noType ? 'default' : 'owl';\n        if (Logan) {\n            Logan.log(msg, type);\n        } else {\n            this.queue.push(msg);\n        }\n    },\n    _log: function _log() {\n        try {\n            if (Logan && Logan.log) {\n                Logan.log.apply(Logan, arguments);\n            }\n        } catch (e) {}\n    }\n};","'use strict';\n\nvar cached = [];\n\nexports.loadScript = function (src, cb) {\n    if (~cached.indexOf(src)) {\n        cb();\n        return;\n    }\n\n    var ele = document.createElement('script');\n    ele.src = src;\n    ele.onload = function () {\n        cached.push(src);\n        cb();\n    };\n\n    document.getElementsByTagName('head')[0].appendChild(ele);\n};","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Ajax = require('../xhr');\nvar Url = require('../util/url');\nvar Extend = require('../util/extend');\nvar Logan = require('../util/logan');\nvar Logger = require('../util/logger');\nvar CanIUse = require('../util/caniuse');\n\nvar _require = require('../constant/patterns'),\n    jsPattern = _require.jsPattern,\n    cssPattern = _require.cssPattern,\n    imgPattern = _require.imgPattern,\n    urlPattern = _require.urlPattern;\n\nvar FirstScreenManager = require('./firstScreen');\nvar parseInt = Number.parseInt || window.parseInt;\nvar NAME = 'page';\n\nvar parseTime = function parseTime(time) {\n    var temp = Math && Math.round ? Math.round(time) : time;\n    return parseInt(temp);\n};\n\nvar PageManager = function () {\n    function PageManager(cfgManager, errManager) {\n        _classCallCheck(this, PageManager);\n\n        this.cfgManager = cfgManager;\n        this.errManager = errManager;\n        this.points = [];\n        this.pointsCustom = [];\n        this.noCache = 'false';\n        this.titansTags = {};\n    }\n    //因为FST指标是load后计算，期间用户可能跳转页面或对config进行设置，所以预先存储pageUrl和project\n\n\n    _createClass(PageManager, [{\n        key: 'setInitConfig',\n        value: function setInitConfig() {\n            this.initialPage = this.cfgManager.get('pageUrl');\n            this.initialProject = this.cfgManager.get('project');\n        }\n        // custom points ready\n\n    }, {\n        key: 'setUserReady',\n        value: function setUserReady() {\n            if (this.cfgManager.get(NAME).auto) return;\n            this.cfgManager.set({ page: { auto: true } });\n        }\n    }, {\n        key: 'getUserReady',\n        value: function getUserReady() {\n            return this.cfgManager.get(NAME).auto;\n        }\n        // default points ready\n\n    }, {\n        key: 'setReady',\n        value: function setReady() {\n            this.isReady = true;\n        }\n    }, {\n        key: 'getReady',\n        value: function getReady() {\n            return this.isReady;\n        }\n    }, {\n        key: 'getPerformaceTiming',\n        value: function getPerformaceTiming() {\n            return {\n                perf: window.performance && window.performance.timing,\n                paint: window.performance && window.performance.getEntriesByType && window.performance.getEntriesByType('paint')\n            };\n        }\n        // get resource timing of critical resources\n\n    }, {\n        key: 'getMainResourceTiming',\n        value: function getMainResourceTiming() {\n            var resourceTiming = window.performance && window.performance.getEntriesByType && window.performance.getEntriesByType('resource');\n            var filter = this.cfgManager.get(NAME).isMainResource;\n            var mainResourceTiming = [];\n            try {\n                if (!resourceTiming) return;\n\n                if (typeof filter === 'function') {\n                    for (var i = 0; i < resourceTiming.length; i++) {\n                        var item = resourceTiming[i];\n                        if (filter(item)) {\n                            mainResourceTiming.push(item);\n                        }\n                    }\n                    return mainResourceTiming;\n                } else {\n                    for (var _i = 0; _i < resourceTiming.length; _i++) {\n                        var resource = resourceTiming[_i];\n                        if (resource.initiatorType === 'link' || resource.initiatorType === 'script') {\n                            mainResourceTiming.push(resource);\n                        }\n                    }\n                    var size = this.cfgManager.get(NAME).mainResourceNumber;\n                    if (mainResourceTiming.length <= size) {\n                        return mainResourceTiming;\n                    } else {\n                        return mainResourceTiming.splice(0, size);\n                    }\n                }\n            } catch (e) {\n                Logger.ignore(e);\n            }\n        }\n        // 启动首屏时间 FST 的计算\n\n    }, {\n        key: 'sensoryObserver',\n        value: function sensoryObserver() {\n            this.firstScreenManager = new FirstScreenManager(this.cfgManager, this);\n            this.firstScreenManager.mutaObserver();\n        }\n    }, {\n        key: 'getRouteFst',\n        value: function getRouteFst(path, prevPath) {\n            if (this.firstScreenManager && path) {\n                if (prevPath) {\n                    this.firstScreenManager.stopRouteMutaObserver(prevPath);\n                }\n                if (Math.random() < this.cfgManager.get(NAME).sample) {\n                    this.firstScreenManager.startRouteMutaObserver(path);\n                }\n            }\n        }\n    }, {\n        key: 'reportRouteFst',\n        value: function reportRouteFst(result, pageUrl) {\n            var _this = this;\n\n            var cfgManager = this.cfgManager;\n            setTimeout(function () {\n                var points = [];\n                points[27] = result;\n                var data = Extend({\n                    project: cfgManager.get('project'),\n                    pageurl: encodeURIComponent(pageUrl),\n                    speed: encodeURIComponent(points.join('|')),\n                    customspeed: '',\n                    timestamp: +new Date(),\n                    noCache: _this.noCache,\n                    pageId: cfgManager.get('pageId')\n                }, cfgManager.getExtension());\n                var url = Url.stringify(cfgManager.getApiPath(NAME), data);\n                Ajax({\n                    url: url,\n                    method: 'GET'\n                });\n            }, 0);\n        }\n    }, {\n        key: 'parsePageTimeWithDefer',\n        value: function parsePageTimeWithDefer() {\n            var _this2 = this;\n\n            setTimeout(function () {\n                try {\n                    if (_this2.cfgManager.get(NAME).sensoryIndex) {\n                        _this2.firstScreenManager.getSensoryIndex(function (senseTime) {\n                            _this2.parsePageTime(senseTime); // W3C points and paint time (FST, FP, FCP)\n                            _this2.parseFirstScreenPerf(senseTime); // first screen performance analysis\n                        });\n                    } else {\n                        _this2.parsePageTime();\n                    }\n                } catch (e) {\n                    _this2.parsePageTime();\n                }\n            }, 0);\n        }\n    }, {\n        key: 'parsePageTime',\n        value: function parsePageTime(senseTime) {\n            var _getPerformaceTiming = this.getPerformaceTiming(),\n                perf = _getPerformaceTiming.perf,\n                paint = _getPerformaceTiming.paint;\n\n            if (!perf) return this.setReady();\n\n            var navStart = perf.navigationStart;\n            var perfMap = {\n                unloadEventStart: 1,\n                unloadEventEnd: 2,\n                redirectStart: 3,\n                redirectEnd: 4,\n                fetchStart: 5,\n                domainLookupStart: 6,\n                domainLookupEnd: 7,\n                connectStart: 8,\n                // secureConnectionStart\n                connectEnd: 9,\n                requestStart: 10,\n                responseStart: 11,\n                responseEnd: 12,\n                domLoading: 13,\n                domInteractive: 14,\n                domContentLoadedEventStart: 15,\n                domContentLoadedEventEnd: 16,\n                domComplete: 17,\n                loadEventStart: 18,\n                loadEventEnd: 19\n            };\n            for (var key in perfMap) {\n                var value = perf[key] || 0;\n                this.points[perfMap[key]] = value ? value - navStart : 0;\n            }\n            this.points[20] = perf.domainLookupEnd - perf.domainLookupStart; // dns\n            this.points[21] = perf.connectEnd - perf.connectStart; // tcp\n            this.points[22] = perf.responseEnd - perf.requestStart; // download\n\n            var firstPaint = 0;\n            var firstContentfulPaint = 0;\n            if (paint && paint.length) {\n                for (var i = 0; i < paint.length; i++) {\n                    var item = paint[i];\n                    if (item.name === 'first-paint') {\n                        firstPaint = parseInt(item.startTime);\n                    } else if (item.name === 'first-contentful-paint') {\n                        firstContentfulPaint = parseInt(item.startTime);\n                    }\n                }\n                if (firstPaint && firstContentfulPaint) {\n                    this.points[23] = firstPaint;\n                    this.points[24] = firstContentfulPaint;\n                }\n            }\n            if (senseTime) {\n                this.points[25] = senseTime.FST && senseTime.FST > firstContentfulPaint ? senseTime.FST : firstContentfulPaint;\n                this.points[26] = senseTime.FCP || firstContentfulPaint || this.points[15];\n            }\n            if (window.Owl && window.Owl.fstInfo) {\n                window.Owl.fstInfo.FST = this.points[25];\n            }\n\n            try {\n                // handle titans perf timing\n                var titansData = window.titansReport;\n                if (!titansData && window.KNBTitansXSync && typeof window.KNBTitansXSync.getTitansReport === 'function') {\n                    var result = window.KNBTitansXSync.getTitansReport();\n                    titansData = result && JSON.parse(result);\n                }\n                if (titansData) {\n                    if (titansData.h5Env) {\n                        var envInfo = titansData.h5Env;\n                        if (envInfo.timestamp && envInfo.timestamp.h5EnvInit) {\n                            this.points[28] = perf.loadEventStart - envInfo.timestamp.h5EnvInit;\n                        }\n                        if (envInfo.timing) {\n                            this.points[29] = envInfo.timing.h5EnvPrepare;\n                            this.points[30] = envInfo.timing.pagePreprocess;\n                            this.points[31] = envInfo.timing.webviewPrepare;\n                        }\n                        if (envInfo.tag && typeof envInfo.tag.isWebViewInitialed != 'undefined') {\n                            this.titansTags.isWebViewInitialed = envInfo.tag.isWebViewInitialed ? 'true' : 'false';\n                        }\n                    }\n                    if (titansData.urlPreprocess) {\n                        var urlPreInfo = titansData.urlPreprocess;\n                        if (urlPreInfo.timing) {\n                            this.points[32] = urlPreInfo.timing.urlPreprocess;\n                        }\n                        if (urlPreInfo.tag && typeof urlPreInfo.tag.isInterJump != 'undefined') {\n                            this.titansTags.isInterJump = urlPreInfo.tag.isInterJump ? 'true' : 'false';\n                        }\n                    }\n                    if (titansData.commonTag && titansData.commonTag.titansCoreVersion) {\n                        this.titansTags.titansCoreVersion = titansData.commonTag.titansCoreVersion;\n                    }\n                }\n            } catch (e) {\n                this.errManager.reportSystemWarn(e);\n            }\n\n            for (var _i2 = 0; _i2 < this.points.length; _i2++) {\n                if (isNaN(this.points[_i2]) || this.points[_i2] < 0) {\n                    this.points[_i2] = 0;\n                }\n            }\n            var cfgManager = this.cfgManager;\n            var logInfo = {\n                project: cfgManager.get('project'),\n                pageUrl: cfgManager.get('pageUrl'),\n                start: this.points[11],\n                dcl: this.points[16],\n                load: this.points[18],\n                fst: this.points[25] || 0\n            };\n            Logan._log('[Performance]:' + JSON.stringify(logInfo), 'owl', 'info', ['perf']);\n\n            // is cache hit\n            var resTiming = this.getMainResourceTiming();\n            if (resTiming) {\n                var timeThreshold = cfgManager.get(NAME).timeThreshold;\n                for (var _i3 = 0; _i3 < resTiming.length; _i3++) {\n                    var res = resTiming[_i3];\n                    if (res.transferSize !== undefined) {\n                        if (res.transferSize !== 0) this.noCache = 'true';\n                    } else if (res.duration !== undefined) {\n                        if (res.duration > timeThreshold) this.noCache = 'true';\n                    }\n                }\n            }\n\n            this.setReady();\n            this.report();\n        }\n        // handle custom points\n\n    }, {\n        key: 'push',\n        value: function push(point) {\n            if (!point || typeof point.position != 'number' || point.position < 0 || point.position > 31) return;\n            this.pointsCustom[point.position] = point.duration || 0;\n            this.report();\n        }\n    }, {\n        key: 'clearTimeout',\n        value: function (_clearTimeout) {\n            function clearTimeout() {\n                return _clearTimeout.apply(this, arguments);\n            }\n\n            clearTimeout.toString = function () {\n                return _clearTimeout.toString();\n            };\n\n            return clearTimeout;\n        }(function () {\n            clearTimeout(this.timeout);\n            this.timeout = undefined;\n        })\n    }, {\n        key: 'report',\n        value: function report(reportNow) {\n            var _this3 = this;\n\n            var cfgManager = this.cfgManager;\n            var catchPage = cfgManager.get('autoCatch').page;\n            if (catchPage && !this.getReady()) return;\n            if (!this.getUserReady()) return;\n            if (!this.points.length && !this.pointsCustom.length) return;\n            if (Math.random() > cfgManager.get(NAME).sample) return;\n\n            try {\n                if (this.timeout) {\n                    this.clearTimeout();\n                } else if (this.pendingAjax && typeof this.pendingAjax.abort === 'function') {\n                    this.pendingAjax.abort();\n                }\n            } catch (e) {\n                this.errManager.reportSystemError(e);\n            }\n\n            var doSend = function doSend() {\n                _this3.clearTimeout();\n                if (!_this3.points.length && !_this3.pointsCustom.length) return;\n\n                // 默认性能指标上报至最先设置的pageUrl内容\n                var pageUrl = _this3.points.length && _this3.initialPage || cfgManager.get('pageUrl');\n                var project = _this3.points.length && _this3.initialProject || cfgManager.get('project');\n                var ext = cfgManager.getExtension();\n                var data = Extend({\n                    project: project,\n                    pageurl: encodeURIComponent(pageUrl),\n                    speed: encodeURIComponent(_this3.points.join('|')),\n                    customspeed: encodeURIComponent(_this3.pointsCustom.join('|')),\n                    timestamp: +new Date(),\n                    noCache: _this3.noCache,\n                    pageId: cfgManager.get('pageId')\n                }, ext);\n                data = Extend(data, _this3.titansTags);\n                var url = Url.stringify(cfgManager.getApiPath(NAME), data);\n                _this3.pendingAjax = Ajax({\n                    method: 'GET',\n                    url: url,\n                    success: function success() {\n                        _this3.points = [];\n                        _this3.pointsCustom = [];\n                        _this3.pendingAjax = undefined;\n                    },\n                    xhrRewritten: cfgManager.get('autoCatch').ajax ? true : false\n                });\n            };\n\n            var delay = cfgManager.get(NAME).delay || 0;\n            if (reportNow) {\n                doSend();\n            } else if (delay >= 0) {\n                this.timeout = setTimeout(function () {\n                    doSend();\n                }, delay);\n            }\n        }\n        // 解析并上报页面首屏的性能指标及慢访问个案数据\n\n    }, {\n        key: 'parseFirstScreenPerf',\n        value: function parseFirstScreenPerf(senseTime) {\n            var _this4 = this;\n\n            var cfgManager = this.cfgManager;\n            var pageConfig = cfgManager.get(NAME);\n            // 确保测速点上报之后再开始解析首屏性能指标\n            var delay = pageConfig.delay || 0;\n            setTimeout(function () {\n                if (pageConfig.fstPerfAnalysis === true && senseTime && senseTime.FST) {\n                    var resEntries = window.performance && window.performance.getEntriesByType && window.performance.getEntriesByType('resource');\n                    if (resEntries && resEntries.length) {\n                        var fst = parseInt(senseTime.FST || 0);\n                        var random = Math.random();\n                        var logSumInfo = random < pageConfig.fstPerfSample;\n                        // 首屏时间超过 1s 且命中采样率时上报慢访问的个案数据, 暂不支持不同区间内采样率的可配置\n                        var sampleRate = fst < 2000 ? 0.05 : 0.1;\n                        var logSlowView = pageConfig.logSlowView === true && fst > 1000 && random < sampleRate;\n                        if (logSumInfo) {\n                            // 首屏性能指标汇总数据\n                            var sumInfo = {\n                                picCount: 0,\n                                picSize: 0,\n                                jsCount: 0,\n                                jsSize: 0,\n                                cssCount: 0,\n                                cssSize: 0,\n                                ajaxCount: 0\n                                // 慢访问个案数据\n                            };var resList = {\n                                js: {},\n                                css: {},\n                                img: {},\n                                ajax: {}\n                                // initiatorType 不能代表请求资源的类型, 需要进一步通过以下正则做匹配\n                            };var time = void 0,\n                                start = void 0,\n                                stalled = void 0,\n                                dns = void 0,\n                                tcp = void 0,\n                                ssl = void 0,\n                                ttfb = void 0,\n                                load = void 0,\n                                hit = void 0,\n                                logStr = void 0;\n                            try {\n                                resEntries.filter(function (res) {\n                                    // 筛选 fetchStart 在 fst 之前的资源请求\n                                    return res.fetchStart && res.fetchStart < fst;\n                                }).forEach(function (res) {\n                                    var type = '';\n                                    var name = res.name || '';\n                                    var initType = res.initiatorType || '';\n                                    var size = res.transferSize || 0;\n                                    if (name && initType) {\n                                        if (initType === 'img' || name.match(imgPattern)) {\n                                            type = 'img';\n                                            sumInfo.picCount++;\n                                            sumInfo.picSize += size;\n                                        } else if (initType === 'script' || initType === 'link' && name.match(jsPattern)) {\n                                            type = 'js';\n                                            sumInfo.jsCount++;\n                                            sumInfo.jsSize += size;\n                                        } else if (initType === 'css' || initType === 'link' && name.match(cssPattern)) {\n                                            type = 'css';\n                                            sumInfo.cssCount++;\n                                            sumInfo.cssSize += size;\n                                        } else if (initType === 'xmlhttprequest' || initType === 'fetch' || initType === 'beacon') {\n                                            type = 'ajax';\n                                            sumInfo.ajaxCount++;\n                                        }\n                                    }\n\n                                    if (logSlowView && type && name) {\n                                        var matches = name.match(urlPattern);\n                                        if (matches && matches[1] && matches[2]) {\n                                            var bodySize = res.decodedBodySize || 0;\n                                            var duration = res.duration || 0;\n                                            time = parseTime(res.responseEnd - res.fetchStart);\n                                            start = parseTime(res.fetchStart);\n                                            stalled = parseTime(res.domainLookupStart - res.fetchStart);\n                                            dns = parseTime(res.domainLookupEnd - res.domainLookupStart);\n                                            tcp = parseTime(res.connectEnd - res.connectStart);\n                                            ssl = parseTime(res.connectEnd - res.secureConnectionStart);\n                                            ttfb = parseTime(res.responseStart - res.requestStart);\n                                            load = parseTime(res.responseEnd - res.responseStart);\n                                            hit = (size > 0 ? false : bodySize > 0 ? true : duration < 30) ? 1 : 0;\n                                            logStr = '' + size + ',' + time + ',' + start + ',' + dns + ',' + tcp + ',' + ssl + ',' + ttfb + ',' + load + ',' + stalled + ',' + hit;\n                                            if (resList[type][matches[1]] instanceof Array) {\n                                                resList[type][matches[1]].push([matches[2], logStr]);\n                                            } else {\n                                                resList[type][matches[1]] = [[matches[2], logStr]];\n                                            }\n                                        }\n                                    }\n                                });\n\n                                // 上报首屏性能的汇总数据\n                                var url = Url.stringify(cfgManager.getApiPath('fstInfo'));\n                                var data = Extend({\n                                    p: _this4.initialProject || cfgManager.get('project'),\n                                    page: _this4.initialPage || cfgManager.get('pageUrl'),\n                                    ts: Date.now(),\n                                    pageId: cfgManager.get('pageId'),\n                                    unionId: cfgManager.getExtension('unionId'),\n                                    respTime: fst\n                                }, sumInfo);\n                                Ajax({\n                                    type: 'POST',\n                                    url: url,\n                                    header: {\n                                        'Content-Type': 'application/x-www-form-urlencoded'\n                                    },\n                                    data: 'data=' + encodeURIComponent(JSON.stringify(data))\n                                });\n                                // 上报慢访问个案数据\n                                if (logSlowView) {\n                                    var _url = Url.stringify(cfgManager.getApiPath('fstLog'));\n                                    var _data = {\n                                        p: _this4.initialProject || cfgManager.get('project'),\n                                        page: _this4.initialPage || cfgManager.get('pageUrl'),\n                                        ts: Date.now(),\n                                        pageId: cfgManager.get('pageId'),\n                                        unionId: cfgManager.getExtension('unionId'),\n                                        respTime: fst,\n                                        content: JSON.stringify(resList)\n                                    };\n                                    Ajax({\n                                        type: 'POST',\n                                        url: _url,\n                                        header: {\n                                            'Content-Type': 'application/x-www-form-urlencoded'\n                                        },\n                                        data: 'data=' + encodeURIComponent(JSON.stringify(_data))\n                                    });\n                                }\n                                // 首屏最后一次DOM变更的时间及其Xpath路径\n                            } catch (e) {\n                                _this4.errManager.reportSystemError(e);\n                            }\n                        }\n                    }\n                }\n            }, delay);\n        }\n    }, {\n        key: 'manualReportFST',\n        value: function manualReportFST() {\n            var _this5 = this;\n\n            var pageConfig = this.cfgManager.get(NAME);\n            if (pageConfig.sensoryIndex || !pageConfig.manualReportFST || this.firstScreenManager) return;\n            if (!CanIUse.PerformanceNow()) return;\n\n            // 清空数据\n            this.points = [];\n            this.pointsCustom = [];\n            if (window._Owl_ && window._Owl_.pageData) {\n                window._Owl_.pageData = [];\n            }\n            // 设置计时起点\n            var time = parseInt(performance.now());\n            // 开启 FST 的监听计算\n            this.sensoryObserver();\n            // 等待 FST 计算完成并上报\n            setTimeout(function () {\n                try {\n                    if (pageConfig && pageConfig.manualReportFST) {\n                        _this5.firstScreenManager.getSensoryIndex(function (senseTime) {\n                            _this5.parseAsyncFST(senseTime, time);\n                        });\n                    }\n                } catch (e) {\n                    Logger.ignore(e);\n                }\n            }, 0);\n        }\n    }, {\n        key: 'parseAsyncFST',\n        value: function parseAsyncFST(senseTime, startTime) {\n            if (senseTime) {\n                var fst = parseInt(senseTime.FST || 0) - startTime;\n                var fcp = parseInt(senseTime.FCP || 0) - startTime;\n                if (fst > 0) {\n                    this.points[25] = fst;\n                    this.points[26] = fcp > 0 ? fcp : 0;\n                }\n            }\n\n            // 其他默认测速点置为 0\n            for (var i = 0; i < this.points.length; i++) {\n                if (isNaN(this.points[i])) {\n                    this.points[i] = 0;\n                }\n            }\n\n            this.setReady();\n            this.report();\n        }\n    }]);\n\n    return PageManager;\n}();\n\nmodule.exports = PageManager;","'use strict';\n\nvar Util = require('./index');\n\nmodule.exports = {\n    PerformanceObserver: function PerformanceObserver() {\n        if (window.PerformanceObserver) {\n            try {\n                var chromeVersionReg = /Chrome\\/(\\d+)/;\n                var UA = Util.getUserAgent();\n                if (chromeVersionReg.test(UA)) {\n                    var version = UA.match(chromeVersionReg)[1];\n                    if (parseInt(version) > 59) return true;\n                } else {\n                    return true;\n                }\n            } catch (e) {}\n        }\n    },\n    MutationObserver: function MutationObserver() {\n        if (window.MutationObserver) {\n            try {\n                // 处理IE11下开启首屏后的模板渲染异常问题\n                var IEVersion = -1;\n                var UA = Util.getUserAgent();\n                if (UA.indexOf('compatible') > -1 && UA.indexOf('MSIE') > -1) {\n                    new RegExp('MSIE (\\\\d+\\\\.\\\\d+);').test(UA);\n                    IEVersion = parseFloat(RegExp['$1']);\n                } else if (UA.indexOf('Trident') > -1 && UA.indexOf('rv:11.0') > -1) {\n                    IEVersion = 11;\n                }\n\n                if (IEVersion === -1 || IEVersion > 11) return true;\n            } catch (e) {}\n        }\n    },\n    PerformanceNow: function PerformanceNow() {\n        return window.performance && window.performance.now && typeof window.performance.now === 'function' ? true : false;\n    },\n    GetEntries: function GetEntries() {\n        return window.performance && typeof window.performance.getEntries === 'function' ? true : false;\n    }\n};","\"use strict\";\n\nmodule.exports = {\n    jsPattern: /\\.js$/i,\n    cssPattern: /\\.css$/i,\n    imgPattern: /\\.(png|jpg|jpeg|gif|webp|ico|bmp|tiff|svg)$/i,\n    urlPattern: /^(https?:\\/\\/[^/\\r\\n]+)(\\/[^\\r\\n]*)?$/\n};","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ImgUtils = require('../util/img');\nvar Logger = require('../util/logger');\nvar CanIUse = require('../util/caniuse');\nvar Util = require('../util/index');\n\nvar mutaRecords = []; // 记录 mutation 新增节点及其对应时间\nvar domTimer = null; // DOM 变化监听计时器\nvar perfTimer = null; // 资源请求监听计时器\nvar domDone = false; // DOM 变化监听结束标记\nvar perfDone = false; // 资源请求监听结束标记\nvar senseTime = void 0; // 存放 FST 和 FCP 时间\nvar FCP = -1; // 模拟的 first contentful paint 时间\nvar ignoreFirstScreenImg = void 0; // 是否忽略首屏内图片的加载\nvar outCount = 0; // 记录检测到首屏外 mutation 的次数\nvar scrollDom = void 0;\n\nvar MaxOutCount = 15; // 检测到首屏外 mutation 次数阈值\nvar STOPTIME = 3000; // 默认的停止监听超时阈值\nvar MinScore = 3; // 有效 DOM 变更的最小权重阈值\nvar ELEMENT_WEIGHT = 1; // 元素权重的基本权重\nvar DEP_WEIGHT = 0; // 元素权重的深度权重\nvar NodesFilter = ['HTML', 'HEAD', 'META', 'LINK', 'SCRIPT', 'STYLE', 'NOSCRIPT']; // 非视觉元素\n\nvar ArraySlice = Array.prototype.slice;\nvar parseInt = Number.parseInt || window.parseInt;\nvar windowSize = getViewportSize();\nvar windowHeight = windowSize.height;\nvar windowWidth = windowSize.width;\nvar NAME = 'page';\n\nvar FirstScreenManager = function () {\n    function FirstScreenManager(cfgManager, pageManager) {\n        _classCallCheck(this, FirstScreenManager);\n\n        this.cfgManager = cfgManager;\n        this.pageManager = pageManager;\n        this.pageData = [];\n        this.observer = null;\n        this.disableMutaObserver = false;\n        var pageCfg = cfgManager.get(NAME);\n        var mutaStopTime = parseInt(pageCfg.mutaStopTime || 0);\n        this.mutaStopTime = mutaStopTime > STOPTIME ? mutaStopTime : STOPTIME;\n        this.perfObserver = null;\n        this.ignoreDom = pageCfg.ignoreAttr || 'owl-ignore';\n        this.imgPattern = /(\\.)(png|jpg|jpeg|gif|webp|ico|bmp|tiff|svg)/i;\n        this.noCheckOuterMutaCount = pageCfg.noCheckOuterMutaCount;\n        this.canStartObserver = CanIUse.PerformanceNow() && CanIUse.MutationObserver();\n        this.spaRoutesData = {};\n        scrollDom = pageCfg.scrollDom;\n        if (window._Owl_) {\n            this.pageData = window._Owl_.pageData;\n            this.observer = window._Owl_.observer;\n            this.disableMutaObserver = window._Owl_.disableMutaObserver;\n        }\n        // 要求算法开始前body已存在, 新的observer能以body作为目标, 取代document来缩小监听范围\n        if (this.disableMutaObserver || !document.body) {\n            domDone = true;\n            perfDone = true;\n            try {\n                this.observer && this.observer.disconnect();\n            } catch (e) {}\n        }\n    }\n    /**\n     * 配置 DOM 变化和资源请求的监听及回调\n     *\n     * @memberof FirstScreenManager\n     */\n\n\n    _createClass(FirstScreenManager, [{\n        key: 'mutaObserver',\n        value: function mutaObserver() {\n            var _this = this;\n\n            if (!this.canStartObserver || domDone) return;\n\n            if (this.observer && this.observer.disconnect) {\n                // 关闭预采集模块中创建的observer并处理之前记录的mutation\n                try {\n                    this.observer.disconnect();\n                    this.observer = null;\n                    if (this.pageData && this.pageData.length) {\n                        this.pageData.forEach(function (item) {\n                            _this.mutaCallback(item.mutations, item.startTime, false);\n                        });\n                        // clear this.pageData\n                    }\n                } catch (e) {\n                    console.log('observer disconnect err');\n                }\n            }\n\n            var pageConfig = this.cfgManager.get(NAME);\n            try {\n                // 创建新的observer, 以body为目标来缩小监听范围\n                this.observer = new MutationObserver(function (mutations) {\n                    var time = performance.now();\n                    _this.mutaCallback(mutations, time, true);\n                });\n                this.observer.observe(document.body, {\n                    childList: true,\n                    subtree: true\n                });\n                this.resetTimer(true);\n\n                // 页面加载完成之后, 响应用户交互来停止DOM变化监听\n                if (pageConfig.interactToStopObserver === true && document && document.addEventListener) {\n                    if (document.readyState === 'complete') {\n                        this.interactToStopObserver();\n                    } else {\n                        var ADD_EVENT = window.addEventListener || window.attachEvent;\n                        ADD_EVENT('load', function () {\n                            _this.interactToStopObserver();\n                        });\n                    }\n                }\n            } catch (e) {\n                console.log('observer observe err');\n            }\n\n            // 忽略首屏内图片的加载请求\n            ignoreFirstScreenImg = pageConfig.disableSensoryImageIndex;\n            perfDone = ignoreFirstScreenImg || perfDone;\n            if (!perfDone) {\n                this.registerPerfObserver();\n            }\n        }\n        /**\n         * 开启资源请求的监听\n         *\n         * @memberof FirstScreenManager\n         */\n\n    }, {\n        key: 'registerPerfObserver',\n        value: function registerPerfObserver() {\n            var _this2 = this;\n\n            var disablePerfObserver = this.cfgManager.get('resource').disablePerformanceObserver || false;\n            if (CanIUse.PerformanceObserver() && disablePerfObserver !== true) {\n                // 8s图片监听超时时间, 防止perfDone不会变成true, 导致无法进入最终的回调\n                var perTimer = setTimeout(function () {\n                    _this2.perfObserverStop();\n                }, 8000);\n                this.perfObserver = new window.PerformanceObserver(function () {\n                    clearTimeout(perfTimer);\n                    perfTimer = setTimeout(function () {\n                        clearTimeout(perTimer);\n                        _this2.perfObserverStop();\n                    }, STOPTIME);\n                });\n                this.perfObserver.observe({ entryTypes: ['resource'] });\n            } else {\n                perfDone = true;\n            }\n        }\n    }, {\n        key: 'getSensoryIndex',\n        value: function getSensoryIndex(callback) {\n            var _this3 = this;\n\n            var doneTimer = 0;\n            // 8s超时监听, 防止无法执行callback并导致不上报测速点\n            var fstTimer = setTimeout(function () {\n                clearInterval(doneTimer);\n                _this3.mutaObserverStop();\n                _this3.perfObserverStop();\n                callback(senseTime);\n            }, 8000);\n\n            var getSense = function getSense() {\n                if (domDone && perfDone) {\n                    clearInterval(doneTimer);\n                    clearTimeout(fstTimer);\n                    if (senseTime) {\n                        if (!ignoreFirstScreenImg) {\n                            caculateImageTiming(_this3.ignoreDom, _this3.imgPattern);\n                        }\n                        callback(senseTime);\n                    } else {\n                        callback();\n                    }\n                }\n            };\n            doneTimer = setInterval(getSense, 500);\n        }\n    }, {\n        key: 'resetTimer',\n        value: function resetTimer(newTimer) {\n            var _this4 = this;\n\n            if (domTimer) clearTimeout(domTimer);\n\n            if (newTimer) {\n                domTimer = setTimeout(function () {\n                    Logger.logScreen(_this4.mutaStopTime + 'ms\\u65F6\\u95F4\\u5185\\u6CA1\\u6709\\u76D1\\u542C\\u5230\\u65B0\\u7684DOM\\u53D8\\u5316, \\u505C\\u6B62DOM\\u53D8\\u5316\\u76D1\\u542C');\n                    _this4.mutaObserverStop();\n                }, this.mutaStopTime);\n            }\n        }\n        /*\n        * mutation 回调: 记录变更时间和元素集合, 存储到 mutaRecords, 用于 FST 的计算\n        * @param mutations\n        * @param startTime\n        * @param reset 是否重置计时器\n        */\n\n    }, {\n        key: 'mutaCallback',\n        value: function mutaCallback(mutations, startTime, reset) {\n            var _this5 = this;\n\n            if (reset) this.resetTimer(true);\n            startTime = startTime || performance.now();\n\n            // 为什么要用那么多个setTimeout？是否形成了多个闭包从而影响了性能？\n            setTimeout(function () {\n                // 已达到停止DOM变化监听的条件后, 不再处理还未处理的mutations\n                if (domDone) return;\n\n                Logger.logScreen('DOM原始变更:', startTime, mutations);\n                // 筛选有效的MutationRecord\n                mutations.filter(function (mutation) {\n                    var targetNodeName = (mutation.target.nodeName || '').toUpperCase();\n                    return mutation.type === 'childList' && targetNodeName && NodesFilter.indexOf(targetNodeName) < 0 && mutation.addedNodes && mutation.addedNodes.length;\n                }).forEach(function (mutation) {\n                    if (domDone) return;\n\n                    // 筛选有效的新增节点\n                    var addedNodes = ArraySlice.call(mutation.addedNodes, 0).filter(function (node) {\n                        var nodeName = (node.nodeName || '').toUpperCase();\n                        return node.nodeType === 1 // 忽略非元素节点\n                        && nodeName && NodesFilter.indexOf(nodeName) < 0 // 忽略非视觉元素\n                        && nodeName !== 'IFRAME' // 忽略iframe\n                        && node.isConnected !== false // 忽略未挂载至DOM树的元素\n                        && !shouldIgnoreNode(node, _this5.ignoreDom); // 忽略业务手动配置的元素\n                    });\n                    if (!(addedNodes && addedNodes.length && addedNodes[0])) return;\n\n                    // 记录筛选后的新增节点及其对应时间, 用于之后FST的计算\n                    mutaRecords.push({\n                        nodes: addedNodes,\n                        startTime: startTime\n                    });\n\n                    var firstNode = addedNodes[0];\n                    // 模拟白屏时间 FCP - first contentful paint\n                    if (FCP < 0) {\n                        calcuFCP(firstNode, startTime);\n                    }\n\n                    // 检测到有效的首屏外mutation的次数达到阈值时, 停止DOM变化监听\n                    // 此处的rect可以记录下来供后面使用, 减少getBoundingClientRect的执行次数(important)\n                    try {\n                        if (!_this5.noCheckOuterMutaCount) {\n                            var rect = firstNode.getBoundingClientRect && firstNode.getBoundingClientRect();\n                            if (rect && rect.width && rect.height && rect.top >= windowHeight) {\n                                // 此处的判断逻辑是否应该加强？\n                                Logger.logScreen('\\u68C0\\u6D4B\\u5230\\u9996\\u5C4F\\u5916\\u8282\\u70B9\\u6B21\\u6570: ' + ++outCount + '\\u6B21, \\u8282\\u70B9\\u5185\\u5BB9\\u4E3A:', addedNodes);\n                                if (outCount >= MaxOutCount) {\n                                    Logger.logScreen('\\u68C0\\u6D4B\\u5230\\u9996\\u5C4F\\u5916mutation\\u8FBE\\u5230 ' + MaxOutCount + ' \\u6B21, \\u505C\\u6B62DOM\\u53D8\\u5316\\u76D1\\u542C');\n                                    _this5.mutaObserverStop();\n                                }\n                            }\n                        }\n                    } catch (e) {\n                        Util.reportSysWarn(e);\n                    }\n\n                    // 支持自定义响应用户交互后停止DOM变化监听\n                    if (document && document.querySelectorAll) {\n                        addedNodes.forEach(function (node) {\n                            _this5.addEventToStopObserver(node);\n                        });\n                    }\n                });\n            }, 0);\n        }\n        /**\n         * 关闭MutationObserver, 并开始进行计算\n         *\n         * @memberof FirstScreenManager\n         */\n\n    }, {\n        key: 'mutaObserverStop',\n        value: function mutaObserverStop() {\n            if (this.observer && this.observer.disconnect) {\n                try {\n                    this.observer.disconnect();\n                    this.observer = null;\n\n                    var config = this.cfgManager.get(NAME);\n                    markMeasure(config.sensoryIndex || config.manualReportFST);\n\n                    this.resetTimer(false);\n                } catch (e) {\n                    console.log('observer disconnect err');\n                }\n            }\n        }\n    }, {\n        key: 'perfObserverStop',\n        value: function perfObserverStop() {\n            try {\n                if (this.perfObserver && this.perfObserver.disconnect) {\n                    this.perfObserver.disconnect();\n                    this.perfObserver = null;\n                }\n                perfDone = true;\n            } catch (e) {\n                console.log('perfObserver disconnect err');\n            }\n        }\n        // 支持业务自定义响应用户交互以停止DOM变化监听\n\n    }, {\n        key: 'addEventToStopObserver',\n        value: function addEventToStopObserver(node) {\n            var _this6 = this;\n\n            ArraySlice.call(node.querySelectorAll('[interactive]'), 0).forEach(function (eventNode) {\n                var type = eventNode.getAttribute('interactive') || 'click';\n                var callback = function callback() {\n                    _this6.mutaObserverStop();\n                    eventNode.removeEventListener(type, callback);\n                };\n                eventNode.addEventListener(type, callback);\n            });\n        }\n        // 全局响应用户交互以停止DOM变化监听\n\n    }, {\n        key: 'interactToStopObserver',\n        value: function interactToStopObserver() {\n            var _this7 = this;\n\n            if (domDone) return;\n\n            var callback = function callback() {\n                if (domDone) {\n                    removeListener();\n                    return;\n                }\n\n                Logger.logScreen('onload后响应到用户交互事件, 停止DOM变化监听');\n                _this7.mutaObserverStop();\n                removeListener();\n            };\n\n            var removeListener = function removeListener() {\n                document.removeEventListener('click', callback);\n                document.removeEventListener('wheel', callback);\n                document.removeEventListener('touchmove', callback);\n            };\n\n            document.addEventListener('click', callback);\n            document.addEventListener('wheel', callback);\n            document.addEventListener('touchmove', callback);\n        }\n    }, {\n        key: 'startRouteMutaObserver',\n        value: function startRouteMutaObserver(path) {\n            var _this8 = this;\n\n            if (!domDone || !this.canStartObserver || !document.body) return;\n\n            // 初始化路由页面的首屏计算信息\n            var start = performance.now();\n            var routeInfo = {\n                start: start,\n                pageUrl: '',\n                observer: null,\n                mutaRecords: [],\n                domTimer: null,\n                domDone: false,\n                outCount: 0,\n                fst: 0,\n                interactCallback: null\n            };\n            this.spaRoutesData[path] = routeInfo;\n            Logger.logScreen('[' + path + '] ' + start + ' \\u65F6\\u523B\\u5F00\\u59CB\\u9996\\u5C4F\\u8BA1\\u7B97');\n\n            try {\n                routeInfo.observer = new MutationObserver(function (mutations) {\n                    _this8.routeMutaCallback(path, mutations);\n                });\n                routeInfo.observer.observe(document.body, {\n                    childList: true,\n                    subtree: true\n                });\n                this.resetRouteTimer(path, true);\n                setTimeout(function () {\n                    _this8.interactToStopRouteObserver(path);\n                }, 0);\n            } catch (e) {}\n        }\n    }, {\n        key: 'stopRouteMutaObserver',\n        value: function stopRouteMutaObserver(prevPath) {\n            var routeInfo = this.spaRoutesData[prevPath];\n            if (routeInfo && !routeInfo.domDone) {\n                // 上一页面尚未停止 DOM 变化的监听\n                routeInfo.domDone = true;\n                this.removeRouteInteractListener(prevPath);\n                this.resetRouteTimer(prevPath, false);\n                routeInfo.observer.disconnect();\n                routeInfo.observer = null;\n            }\n        }\n    }, {\n        key: 'resetRouteTimer',\n        value: function resetRouteTimer(path, newTimer) {\n            var _this9 = this;\n\n            var routeInfo = this.spaRoutesData[path];\n            if (routeInfo) {\n                routeInfo.domTimer && clearTimeout(routeInfo.domTimer);\n                if (newTimer) {\n                    routeInfo.domTimer = setTimeout(function () {\n                        Logger.logScreen('[' + path + '] ' + _this9.mutaStopTime + 'ms\\u5185\\u65E0\\u65B0\\u7684DOM\\u53D8\\u5316, \\u505C\\u6B62\\u76D1\\u542C');\n                        _this9.routeMutaStop(path);\n                    }, this.mutaStopTime);\n                } else {\n                    routeInfo.domTimer = null;\n                }\n            }\n        }\n    }, {\n        key: 'routeMutaCallback',\n        value: function routeMutaCallback(path, mutations) {\n            var _this10 = this;\n\n            var routeInfo = this.spaRoutesData[path];\n            if (!routeInfo || routeInfo.domDone) return;\n\n            var startTime = performance.now();\n            this.resetRouteTimer(path, true);\n\n            Logger.logScreen('[' + path + '] DOM\\u53D8\\u5316\\u539F\\u59CB\\u5185\\u5BB9: ', startTime, mutations);\n            mutations.filter(function (mutation) {\n                var targetNodeName = (mutation.target.nodeName || '').toUpperCase();\n                return mutation.type === 'childList' && targetNodeName && NodesFilter.indexOf(targetNodeName) < 0 && mutation.addedNodes && mutation.addedNodes.length;\n            }).forEach(function (mutation) {\n                if (!routeInfo || routeInfo.domDone) return;\n\n                var addedNodes = ArraySlice.call(mutation.addedNodes, 0).filter(function (node) {\n                    var nodeName = (node.nodeName || '').toUpperCase();\n                    return node.nodeType === 1 && nodeName && NodesFilter.indexOf(nodeName) < 0 && nodeName != 'IFRAME' && node.isConnected !== false && !shouldIgnoreNode(node, _this10.ignoreDom);\n                });\n                if (!(addedNodes && addedNodes.length && addedNodes[0])) return;\n\n                routeInfo.mutaRecords.push({\n                    nodes: addedNodes,\n                    startTime: startTime\n                });\n\n                try {\n                    var rect = addedNodes[0].getBoundingClientRect();\n                    if (rect && rect.width && rect.height && rect.top >= windowHeight) {\n                        Logger.logScreen('[' + path + '] \\u68C0\\u6D4B\\u5230\\u9996\\u5C4F\\u5916mutation ' + ++routeInfo.outCount + '\\u6B21: ', addedNodes);\n                        if (routeInfo.outCount >= MaxOutCount) {\n                            Logger.logScreen('[' + path + '] \\u68C0\\u6D4B\\u5230\\u9996\\u5C4F\\u5916mutation\\u8FBE\\u5230 ' + MaxOutCount + '\\u6B21, \\u505C\\u6B62\\u76D1\\u542C');\n                            _this10.routeMutaStop(path);\n                        }\n                    }\n                } catch (e) {}\n            });\n        }\n    }, {\n        key: 'routeMutaStop',\n        value: function routeMutaStop(path) {\n            try {\n                var routeInfo = this.spaRoutesData[path];\n                if (!routeInfo || routeInfo.domDone) return;\n\n                routeInfo.domDone = true;\n                routeInfo.observer && routeInfo.observer.disconnect();\n                routeInfo.observer = null;\n                this.removeRouteInteractListener(path);\n                this.resetRouteTimer(path, false);\n\n                var validRecords = [];\n                Logger.logScreen('[' + path + '] \\u7B5B\\u9009\\u540E\\u7684\\u6709\\u6548DOM\\u53D8\\u5316: ', routeInfo.mutaRecords);\n                routeInfo.mutaRecords.forEach(function (_ref) {\n                    var nodes = _ref.nodes,\n                        startTime = _ref.startTime;\n\n                    var validNodes = [];\n                    nodes.forEach(function (node) {\n                        var _ref2 = node.style || {},\n                            visibility = _ref2.visibility,\n                            display = _ref2.display;\n\n                        if (visibility != 'hidden' && display != 'none') {\n                            var rect = node.getBoundingClientRect && node.getBoundingClientRect();\n                            if (inViewPort(rect)) {\n                                validNodes.push({ node: node, rect: rect });\n                            }\n                        }\n                    });\n                    if (validNodes.length) {\n                        var score = calScore(validNodes);\n                        if (score) {\n                            validRecords.push({ score: score, startTime: startTime, validNodes: validNodes });\n                            Logger.logScreen('[' + path + '] \\u6709\\u6548\\u7684\\u9996\\u5C4F\\u65B0\\u589E\\u8282\\u70B9, \\u6743\\u91CD\\u53CA\\u65F6\\u523B: ', validNodes, score, startTime);\n                        }\n                    }\n                });\n                routeInfo.mutaRecords = [];\n\n                var routeFstEnd = getFST(validRecords, path);\n                var result = parseInt(routeFstEnd - routeInfo.start);\n                Logger.logScreen('[' + path + '] DOM\\u9996\\u5C4F\\u65F6\\u95F4\\u7684\\u8BA1\\u7B97\\u7ED3\\u679C\\u4E3A: ' + result);\n                if (result > 0) {\n                    routeInfo.fst = result;\n                    routeInfo.pageUrl = this.cfgManager.get('pageUrl');\n                    this.pageManager.reportRouteFst(result, routeInfo.pageUrl);\n                }\n            } catch (e) {}\n        }\n    }, {\n        key: 'removeRouteInteractListener',\n        value: function removeRouteInteractListener(path) {\n            var routeInfo = this.spaRoutesData[path];\n            if (!routeInfo || !routeInfo.interactCallback) return;\n\n            document.removeEventListener('click', routeInfo.interactCallback);\n            document.removeEventListener('wheel', routeInfo.interactCallback);\n            document.removeEventListener('touchmove', routeInfo.interactCallback);\n        }\n    }, {\n        key: 'interactToStopRouteObserver',\n        value: function interactToStopRouteObserver(path) {\n            var _this11 = this;\n\n            var routeInfo = this.spaRoutesData[path];\n            if (!routeInfo || routeInfo.domDone) return;\n\n            routeInfo.interactCallback = function () {\n                Logger.logScreen('[' + path + '] \\u54CD\\u5E94\\u5230\\u7528\\u6237\\u4EA4\\u4E92\\u4E8B\\u4EF6, \\u505C\\u6B62\\u76D1\\u542C');\n                _this11.routeMutaStop(path);\n            };\n            document.addEventListener('click', routeInfo.interactCallback);\n            document.addEventListener('wheel', routeInfo.interactCallback);\n            document.addEventListener('touchmove', routeInfo.interactCallback);\n        }\n    }]);\n\n    return FirstScreenManager;\n}();\n\n// 视口viewport尺寸计算\n\n\nfunction getViewportSize() {\n    return {\n        height: window.innerHeight || 0,\n        width: window.innerWidth || 0\n    };\n}\n\n// 使用HTML标签属性自定义忽略一些元素\nfunction shouldIgnoreNode(node, ignoreDom) {\n    var ignore = false;\n    if (ignoreDom) {\n        ignore = !!(node.closest && node.closest('[' + ignoreDom + ']')) || node.hasAttribute && node.hasAttribute(ignoreDom);\n    }\n    if (ignore) {\n        Logger.logScreen('自定义忽略元素: ', node);\n    }\n    return ignore;\n}\n\n// 模拟计算首次内容绘制时间\nfunction calcuFCP(node, time) {\n    // 浏览器支持Paint Timing时模拟时间置为0\n    if (performance && performance.getEntriesByType && performance.getEntriesByType('paint') && document && document.body && document.body.innerText !== '') {\n        FCP = 0;\n    } else if (node && (node.nodeType === 3 || node.innerText !== '') || document.querySelector && document.querySelector('img')) {\n        FCP = parseInt(time || 0);\n    }\n}\n\nfunction markMeasure(fstFlag) {\n    if (domDone) return;\n    calcuFST(fstFlag);\n}\n\nfunction calcuFST(flag) {\n    var validRecords = [];\n    if (flag) {\n        Logger.logScreen('\\u7B5B\\u9009\\u540E\\u7684\\u6709\\u6548DOM\\u53D8\\u66F4:', mutaRecords);\n        mutaRecords.forEach(function (_ref3) {\n            var nodes = _ref3.nodes,\n                startTime = _ref3.startTime;\n\n            var validNodes = [];\n            nodes.forEach(function (node) {\n                // 筛选首屏内可见节点\n                var _ref4 = node.style || {},\n                    visibility = _ref4.visibility,\n                    display = _ref4.display;\n\n                if (visibility !== 'hidden' && display !== 'none') {\n                    var rect = node.getBoundingClientRect && node.getBoundingClientRect(); // [text]元素无此方法\n                    if (inViewPort(rect)) {\n                        validNodes.push({ node: node, rect: rect });\n                    }\n                }\n            });\n            if (validNodes.length) {\n                var score = calScore(validNodes);\n                if (score) {\n                    validRecords.push({ score: score, startTime: startTime, validNodes: validNodes });\n                    Logger.logScreen('\\u6709\\u6548\\u7684\\u9996\\u5C4F\\u5185\\u65B0\\u589E\\u8282\\u70B9:', validNodes, '\\u65B0\\u589E\\u8282\\u70B9\\u7684\\u6743\\u91CD\\u548C\\u53D1\\u751F\\u65F6\\u95F4:', score, startTime);\n                }\n            }\n        });\n    }\n\n    domDone = true;\n    mutaRecords = [];\n    var FST = getFST(validRecords);\n    senseTime = { FST: FST, FCP: FCP || 0 };\n    Logger.logScreen('最终DOM首屏时间的计算结果为: ', FST);\n}\n\n// 判断节点是否在视口范围内\nfunction inViewPort(rect) {\n    var _ref5 = rect || {},\n        width = _ref5.width,\n        height = _ref5.height,\n        top = _ref5.top,\n        right = _ref5.right,\n        bottom = _ref5.bottom,\n        left = _ref5.left;\n    // 节点在视口外的条件: 节点和视口无重合区域\n\n\n    return width > 0 && height > 0 && bottom > 0 && top < windowHeight && right > 0 && left < windowWidth;\n}\n\n// 计算新增节点的权重和\nfunction calScore(wrapedNodes) {\n    return wrapedNodes.reduce(function (score, it) {\n        return score + depScore(it, 0);\n    }, 0);\n}\n\n// 遍历子节点计算权重 (深度优先)\nfunction depScore(wrapedNode, dep) {\n    // 优先使用缓存数据\n    var node = wrapedNode.node,\n        rect = wrapedNode.rect;\n\n    var _ref6 = node.style || {},\n        visibility = _ref6.visibility,\n        display = _ref6.display;\n\n    // 1.隐藏元素直接返回\n\n\n    if (visibility === 'hidden' || display === 'none') return 0;\n\n    // 2.文本元素: 首字符非回车换行 (浏览器注入较多空白文本元素)\n    if (node.nodeType === 3) {\n        if (node.textContent) {\n            var firstChar = node.textContent.charCodeAt(0);\n            if (firstChar !== 10 && firstChar !== 13) {\n                return dep + ELEMENT_WEIGHT;\n            }\n        }\n        return 0;\n    }\n\n    // 3.遍历子元素: 若子元素均不可见则退化为叶节点\n    if (node.childNodes && node.childNodes.length) {\n        var subScore = ArraySlice.call(node.childNodes, 0).reduce(function (score, node) {\n            return score + depScore({ node: node }, dep + DEP_WEIGHT);\n        }, 0);\n        if (subScore > 0) return subScore + ELEMENT_WEIGHT;\n    }\n\n    // 4.叶节点\n\n    var _ref7 = rect || { width: node.clientWidth, height: node.clientHeight },\n        width = _ref7.width,\n        height = _ref7.height;\n\n    return width > 0 && height > 0 ? dep + ELEMENT_WEIGHT : 0;\n}\n\n// 选取权重大于阈值的最后一次变更\nfunction getFST(records, routePath) {\n    if (!(records && records.length)) return 0;\n\n    // 合并同时或紧邻的两次记录 (startTime差小于1)\n    var batchRecords = records.reduce(function (tempArr, current) {\n        var prev = tempArr[tempArr.length - 1];\n        if (prev && current.startTime - prev.startTime < 1) {\n            prev.score += current.score;\n        } else {\n            tempArr.push({ score: current.score, startTime: current.startTime, nodes: current.validNodes });\n        }\n        return tempArr;\n    }, []);\n    Logger.logScreen('合并后的首屏新增节点权重记录:', batchRecords);\n\n    // 选择最后一次有效的首屏内DOM变更记录 (最后一次新增节点权重大于阈值3的变更)\n    var bestMatch = batchRecords.reduce(function (prev, current) {\n        return !prev || current.score > Math.min(prev.score, MinScore) ? current : prev;\n    }, null);\n    var result = parseInt(bestMatch && bestMatch.startTime || 0);\n\n    if (!routePath && window.Owl && bestMatch) {\n        window.Owl.fstInfo = {\n            domFST: result,\n            decisiveNode: bestMatch.nodes && bestMatch.nodes[0] ? bestMatch.nodes[0].node : ''\n        };\n    }\n\n    return result;\n}\n\nfunction caculateImageTiming(ignoreTag, imgPattern) {\n    var inScreenImgTimes = ImgUtils.getImageTimingsInFirstScreen(ignoreTag, imgPattern, scrollDom);\n    if (senseTime && inScreenImgTimes.length) {\n        var imageFST = Math.round(inScreenImgTimes[0]);\n        senseTime.FST = Math.max(senseTime.FST, imageFST);\n        Logger.logScreen('首屏图片时间: ', imageFST);\n        Logger.logScreen('最终首屏时间: ', senseTime.FST);\n        if (window.Owl && window.Owl.fstInfo) {\n            window.Owl.fstInfo.imgFST = imageFST;\n        }\n    }\n}\n\nmodule.exports = FirstScreenManager;","'use strict';\n\nvar Logger = require('./logger');\n\nfunction isBase64Img(src) {\n    return src && src.slice(0, 10) === 'data:image';\n}\n\nfunction formatImageUrl(src) {\n    var link = document.createElement('a');\n    link.href = src;\n    return link.href;\n}\n\n/**\n * extract img src from background prop\n * @param {*} src\n */\nfunction getImgSrcFromBackground(src, imgPattern) {\n    var imgSrc = void 0;\n    var matches = src.match(/url\\(.*?\\)/g);\n    if (matches && matches.length) {\n        // use the last one\n        var urlStr = matches[matches.length - 1];\n        var innerUrl = urlStr.replace(/^url\\([\\'\\\"]?/, '').replace(/[\\'\\\"]?\\)$/, '');\n        // only url has .[img] extensions, but not base64\n        if (imgPattern.test(innerUrl) && !isBase64Img(innerUrl)) {\n            imgSrc = innerUrl;\n        }\n    }\n    return imgSrc;\n}\n\n/**\n * filter both img and node with background-image prop setted\n * @param {*} node\n */\nfunction getImgSourceFromDom(node, imgPattern) {\n    if (node.nodeName.toUpperCase() === 'IMG') {\n        // also include img with data-srcset attribute\n        return node.getAttribute('data-srcset') || node.getAttribute('src');\n    } else {\n        var computedStyle = window.getComputedStyle(node);\n        var backgroundProp = computedStyle.getPropertyValue('background-image') || computedStyle.getPropertyValue('background');\n        return getImgSrcFromBackground(backgroundProp, imgPattern);\n    }\n}\n\n/**\n * using NodeIterator to filter all dom element, including elements with background-image setted.\n * but node with @ignoreTag attribute specified will be ignored\n * @param {*} ignoreTag\n */\nfunction getDomImgs(ignoreTag, imgPattern, scrollDom) {\n    var domImages = [];\n    try {\n        var iterator = document.createNodeIterator(document.body, NodeFilter.SHOW_ELEMENT, function (node) {\n            if (node && node.getAttribute && !node.hasAttribute('' + ignoreTag)) {\n                return NodeFilter.FILTER_ACCEPT;\n            }\n        }, false);\n        var currentNode = iterator.nextNode();\n        while (currentNode) {\n            var imgSrc = getImgSourceFromDom(currentNode, imgPattern);\n            if (!imgSrc) {\n                currentNode = iterator.nextNode();\n                continue;\n            }\n            if (isInFirstScreen(currentNode, scrollDom) && !isBase64Img(imgSrc)) {\n                domImages.push(formatImageUrl(imgSrc));\n            }\n            currentNode = iterator.nextNode();\n        }\n    } catch (e) {\n        console.log('getDomImgs err');\n    }\n\n    return domImages;\n}\n\n/**\n * judge whether a node is in first screen area (top: 0, left: 0, width: 100vw, height: 100vh)\n * @param {*} currentNode\n */\nfunction isInFirstScreen(currentNode, scrollDom) {\n    if (!currentNode) {\n        return false;\n    }\n\n    var _currentNode$getBound = currentNode.getBoundingClientRect(),\n        top = _currentNode$getBound.top,\n        left = _currentNode$getBound.left,\n        right = _currentNode$getBound.right,\n        bottom = _currentNode$getBound.bottom;\n    // display:none element\n\n\n    if (!top && !bottom) {\n        return false;\n    }\n\n    // 如果在结构上的首屏内（上下、左右）\n    // 当整体页面有绝对定位时，则选实际滚动的DOM作为标准，window的滚动已经失效\n    var scrollTop = void 0;\n    if (scrollDom) {\n        scrollTop = document.getElementById(scrollDom).scrollTop;\n    } else {\n        scrollTop = window.scrollY || window.pageYOffset;\n    }\n    if (scrollTop + top < window.innerHeight && right > 0 && left < window.innerWidth) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * filter img timing resource that only in first screen, excluding ignored element\n * @param {*} ignoreTag\n */\nfunction getImageTimingsInFirstScreen(ignoreTag, imgPattern, scrollDom) {\n    // only when performance supported\n    if (!window.performance || !window.performance.getEntriesByType) {\n        return [];\n    }\n    var result = [];\n    try {\n        // retrieve img resource timing\n        var imageResources = window.performance.getEntriesByType('resource')\n        // filter img and background image timing resource\n        .filter(function (s) {\n            return s.initiatorType === 'img' || s.initiatorType === 'css';\n        }).map(function (s) {\n            return {\n                name: s.name.split(':')[1] || s.name, // escape protocol\n                responseEnd: s.responseEnd,\n                connectEnd: s.connectEnd,\n                duration: s.duration\n            };\n        });\n        // filter first screen img resource\n        var domImages = getDomImgs(ignoreTag, imgPattern, scrollDom).join('###');\n        // filter first screen img timing, in descend order\n        result = imageResources.filter(function (img) {\n            return domImages.indexOf(img.name) !== -1;\n        }).map(function (s) {\n            var time = s.responseEnd || s.connectEnd + s.duration;\n            return {\n                name: s.name,\n                time: time\n            };\n        }).sort(function (s1, s2) {\n            return s2.time - s1.time;\n        });\n        Logger.logScreen('首屏内图片的加载时间', result);\n        return result.map(function (img) {\n            return img.time;\n        });\n    } catch (err) {\n        result = [];\n    }\n    return result;\n}\n\nmodule.exports = {\n    getImageTimingsInFirstScreen: getImageTimingsInFirstScreen,\n    isInFirstScreen: isInFirstScreen\n};","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Ajax = require('../xhr');\nvar RM = require('./model');\nvar Category = require('../constant/category');\n\nvar _require = require('../constant/patterns'),\n    jsPattern = _require.jsPattern,\n    cssPattern = _require.cssPattern,\n    imgPattern = _require.imgPattern;\n\nvar Util = require('../util/index');\nvar Event = require('../util/event');\nvar Logger = require('../util/logger');\nvar Logan = require('../util/logan');\nvar protocol = require('../constant/protocol');\nvar canIUse = require('../util/caniuse');\nvar CACHE_SEND_TRIGGER = 10;\nvar parseInt = Number.parseInt || window.parseInt;\nvar NAME = 'resource';\n\nvar getImageDomain = function getImageDomain(url) {\n    var arr = url.split('//');\n    if (arr && arr.length > 1) {\n        return arr[0] + '//' + arr[1].split('/')[0] + '/images';\n    }\n};\n\nvar ResManager = function () {\n    function ResManager(cfgManager, errManager) {\n        _classCallCheck(this, ResManager);\n\n        this.cfgManager = cfgManager;\n        this.errManager = errManager;\n        this.cache = [];\n        this.entryCache = [];\n        this.comboTimeout = 0;\n        this.isSupportGetEntries = canIUse.GetEntries();\n    }\n    // parse xhr info\n\n\n    _createClass(ResManager, [{\n        key: 'parseAjax',\n        value: function parseAjax(event) {\n            try {\n                if (!event || !event.currentTarget || isNaN(event.duration)) return;\n\n                var state = event.type;\n                var duration = event.duration;\n                var byte = event.total;\n                var currTarget = event.currentTarget;\n                var statusCode = currTarget.status;\n                var url = Util.getFullUrl(currTarget.responseURL || currTarget.url);\n\n                if (!this.checkUrlValid(url)) return;\n                if (this.checkMTSIForbid(currTarget)) return;\n\n                var cfgManager = this.cfgManager;\n                var resReg = cfgManager.get('resourceReg');\n                var isUrlValid = cfgManager.get('devMode') || resReg instanceof RegExp && resReg.test(url);\n                var ajaxConfig = cfgManager.get('ajax');\n                var config = cfgManager.get(NAME);\n\n                var responsetime = duration.toString();\n                var traceid = currTarget.traceid || '';\n                var logInfo = {\n                    project: cfgManager.get('project'),\n                    url: url,\n                    method: currTarget.method || '',\n                    duration: responsetime,\n                    traceid: traceid,\n                    timestamp: +new Date()\n                };\n                if (isUrlValid) {\n                    if (!ajaxConfig.flag || duration < ajaxConfig.duration) {\n                        var isSuccess = void 0;\n                        var httpCode = void 0;\n                        var businessCode = void 0;\n                        var content = '';\n                        if (config.enableStatusCheck) {\n                            httpCode = statusCode || (state === 'load' ? 200 : 500);\n                            isSuccess = (state === 'load' || state === 'readystatechange') && (httpCode >= 200 && httpCode < 300 || httpCode === 304);\n                            if (!isSuccess) {\n                                content = state === 'load' ? '' : 'from: xhr ' + state + '.';\n                                content += currTarget.statusText ? httpCode + ' ' + currTarget.statusText : '';\n                            }\n                        } else {\n                            isSuccess = state === 'load' || state === 'readystatechange' && statusCode === 200;\n                            httpCode = isSuccess ? 200 : 500;\n                            content = isSuccess ? '' : 'from: xhr ' + state;\n                        }\n                        if (isSuccess && ajaxConfig.autoBusinessCode && typeof currTarget.getResponseHeader === 'function' && typeof ajaxConfig.parseResponse === 'function') {\n                            try {\n                                var contentType = currTarget.getResponseHeader('Content-Type');\n                                if (!contentType || !/(text)|(json)/.test(contentType)) return;\n                                var responseType = currTarget.responseType;\n                                var response = void 0;\n                                if (!responseType || responseType === 'text') {\n                                    response = currTarget.responseText;\n                                } else if (responseType === 'json') {\n                                    response = currTarget.response;\n                                }\n                                try {\n                                    response = response && typeof response == 'string' ? JSON.parse(response) : response;\n                                } catch (e) {}\n                                var result = ajaxConfig.parseResponse(response);\n                                businessCode = result.code;\n                            } catch (e) {\n                                Util.reportSysError(e);\n                            }\n                        }\n                        this.pushApi({\n                            type: 'ajax',\n                            resourceUrl: url,\n                            connectType: this.getConnectTypeByUrl(url),\n                            responsetime: responsetime,\n                            responsebyte: byte && byte.toString() ? byte.toString() : '0',\n                            statusCode: httpCode + '|' + (typeof businessCode === 'undefined' ? '' : businessCode),\n                            firstCategory: isSuccess ? '' : Category.AJAX,\n                            logContent: content,\n                            traceid: traceid\n                        });\n                        logInfo.code = httpCode;\n                        var logLevel = 'info';\n                        var logTag = 'ajax';\n                        if (!isSuccess) {\n                            logInfo.error = { type: 'default', content: content };\n                            logLevel = 'error';\n                            logTag = 'ajaxError';\n                        }\n                        Logan._log('[Ajax]:' + JSON.stringify(logInfo), 'owl', logLevel, [logTag]);\n                    } else if (Math.random() < config.sampleApi) {\n                        var msg = 'ajax\\u8BF7\\u6C42\\u65F6\\u95F4\\u8D85\\u8FC7\\u8BBE\\u5B9A ' + url;\n                        this.errManager.push({ name: 'TIMEOUT_AJAX', msg: msg }, { category: Category.AJAX });\n                        logInfo.error = { type: 'timeout', content: msg };\n                        Logan._log('[Ajax]:' + JSON.stringify(logInfo), 'owl', 'error', ['ajaxError']);\n                    }\n                } else if (cfgManager.get('invalid').ajax && ajaxConfig.invalid && Math.random() < config.sample) {\n                    this.errManager.push({ name: 'INVALID_AJAX', msg: url }, { category: Category.AJAX });\n                    logInfo.error = { type: 'invalidUrl', content: url };\n                    Logan._log('[Ajax]:' + JSON.stringify(logInfo), 'owl', 'error', ['ajaxError']);\n                }\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n        }\n        // parse fetch info\n\n    }, {\n        key: 'parseFetch',\n        value: function parseFetch(info) {\n            try {\n                var url = info.url,\n                    duration = info.duration,\n                    isSuccess = info.isSuccess;\n\n                if (!url || isNaN(duration) || isSuccess === undefined) return;\n\n                url = Util.getFullUrl(url);\n                if (!this.checkUrlValid(url)) return;\n\n                var cfgManager = this.cfgManager;\n                var ajaxConfig = cfgManager.get('ajax');\n                var resReg = cfgManager.get('resourceReg');\n                if (!(cfgManager.get('devMode') || resReg instanceof RegExp && resReg.test(url))) return;\n\n                if (cfgManager.get(NAME).ignoreMTSIForbidRequest && info.xForbidReason && info.statusCode === 403) return;\n\n                Logan.log('[Fetch]:' + JSON.stringify(info), 'owl', 'error', ['ajaxError']);\n\n                var statusCode = void 0;\n                var firstCategory = void 0;\n                var logContent = void 0;\n                var businessCode = void 0;\n                var response = info.response;\n                if (isSuccess) {\n                    var ok = info.ok ? true : false;\n                    var defaultCode = ok ? 200 : 404;\n                    statusCode = info.statusCode || defaultCode;\n                    firstCategory = ok ? '' : Category.AJAX;\n                    logContent = ok ? '' : statusCode + ' ' + (info.statusText || '');\n                    if (ajaxConfig.autoBusinessCode) {\n                        try {\n                            response = response && typeof response == 'string' ? JSON.parse(response) : response;\n                            var result = ajaxConfig.parseResponse(response);\n                            businessCode = result.code;\n                        } catch (e) {}\n                    }\n                } else {\n                    statusCode = '500';\n                    firstCategory = Category.AJAX;\n                    logContent = info.errMsg || info.errName || '';\n                }\n\n                this.pushApi({\n                    type: 'fetch',\n                    resourceUrl: url,\n                    connectType: this.getConnectTypeByUrl(url),\n                    responsetime: duration.toString() || '0',\n                    responsebyte: '0',\n                    statusCode: statusCode + '|' + (typeof businessCode === 'undefined' ? '' : businessCode),\n                    firstCategory: firstCategory,\n                    logContent: logContent,\n                    traceid: info.traceid\n                });\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n        }\n    }, {\n        key: 'checkUrlValid',\n        value: function checkUrlValid(url) {\n            try {\n                var ignoreList = this.cfgManager.get('ignoreList').ajax || [];\n                for (var i = 0; i < ignoreList.length; i++) {\n                    var urlReg = new RegExp(ignoreList[i]);\n                    if (urlReg.test(url)) return false;\n                }\n            } catch (e) {\n                Util.reportSysError(e);\n                return false;\n            }\n            return true;\n        }\n        // 过滤 MTSI 反爬拦截的请求\n\n    }, {\n        key: 'checkMTSIForbid',\n        value: function checkMTSIForbid(target) {\n            if (!target || !this.cfgManager.get(NAME).ignoreMTSIForbidRequest) return false;\n\n            try {\n                if (target.status === 403 && typeof target.getAllResponseHeaders === 'function') {\n                    var headers = target.getAllResponseHeaders();\n                    if (headers && headers.indexOf('x-forbid-reason') > -1) {\n                        return true;\n                    }\n                }\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n\n            return false;\n        }\n    }, {\n        key: 'parseType',\n        value: function parseType(type) {\n            var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n            if (!(type && url)) return '';\n            // type: script link img css\n            if (type === 'img' || url.match(imgPattern)) {\n                type = 'image';\n            } else if (type === 'script' || type === 'link' && url.match(jsPattern)) {\n                type = 'js';\n            } else if (type === 'css' || type === 'link' && url.match(cssPattern)) {\n                type = 'css';\n            }\n            return type;\n        }\n    }, {\n        key: 'filterResource',\n        value: function filterResource(url) {\n            try {\n                var filters = this.cfgManager.get('ignoreList').resource;\n                for (var i = 0; i < filters.length; i++) {\n                    var tempReg = new RegExp(filters[i]);\n                    if (tempReg.test(url)) return false;\n                }\n                return true;\n            } catch (e) {\n                Util.reportSysError(e);\n                return false;\n            }\n        }\n        // 解析性能条目的列表数据\n\n    }, {\n        key: 'parsePerformanceEntries',\n        value: function parsePerformanceEntries(entries) {\n            entries = this.filterEntries(entries);\n            if (!(entries && entries.length)) return;\n\n            var cfgManager = this.cfgManager;\n            var devMode = cfgManager.get('devMode');\n            var resReg = cfgManager.get('resourceReg');\n            var imgConfig = cfgManager.get('image');\n            var entryCache = this.entryCache;\n            for (var i = 0; i < entries.length; i++) {\n                var entry = entries[i];\n                var url = entry.name;\n                var urlValid = this.filterResource(url);\n                if (!(urlValid && (devMode || resReg instanceof RegExp && resReg.test(url)))) continue;\n\n                entryCache.push(url);\n                var hasError = false;\n                var type = this.parseType(entry.initiatorType, url);\n                var isImg = type === 'image';\n                var duration = parseInt(entry.duration || 0) || 0;\n                if (imgConfig.flag && isImg) {\n                    var filter = imgConfig.filter;\n                    if (!filter || typeof filter === 'function' && !filter(url)) {\n                        var sec_category = void 0;\n                        var size = entry.transferSize;\n                        if (size && size > imgConfig.fileSize * 1000) {\n                            sec_category = 'IMAGE_SIZE_EXCEED';\n                        } else if (duration && duration > imgConfig.duration) {\n                            sec_category = 'IMAGE_DURATION_EXCEED';\n                        }\n                        if (sec_category) {\n                            hasError = true;\n                            this.errManager._pushResource({\n                                category: Category.RESOURCE,\n                                sec_category: sec_category,\n                                content: url\n                            });\n                        }\n                    }\n                }\n                if (!hasError) {\n                    this.push({\n                        type: type,\n                        connectType: this.getConnectTypeByUrl(url),\n                        resourceUrl: isImg ? getImageDomain(url) : url,\n                        responsetime: duration.toString() || '0',\n                        responsebyte: entry.transferSize && entry.transferSize.toString() || '0',\n                        statusCode: '200|',\n                        logContent: isImg ? url : ''\n                    });\n                }\n            }\n            this.triggerReport();\n        }\n    }, {\n        key: 'filterEntries',\n        value: function filterEntries(entries) {\n            // 筛选静态资源类型\n            var ret = [];\n            var validList = ['link', 'script', 'img', 'css'];\n            for (var i = 0; i < entries.length; i++) {\n                var entry = entries[i];\n                if (validList.indexOf(entry.initiatorType) > -1) {\n                    ret.push(entry);\n                }\n            }\n            return ret;\n        }\n        // 资源加载的动态监测\n\n    }, {\n        key: 'observeResourceTiming',\n        value: function observeResourceTiming() {\n            var _this = this;\n\n            if (this.resTimingObserved) return;\n\n            this.resTimingObserved = true;\n\n            var disableObserver = this.cfgManager.get(NAME).disablePerformanceObserver || false;\n            if (!disableObserver && canIUse.PerformanceObserver()) {\n                var observer = new window.PerformanceObserver(function (list) {\n                    try {\n                        var entries = list.getEntries();\n                        _this.parsePerformanceEntries(entries);\n                    } catch (e) {\n                        Util.reportSysError(e);\n                    }\n                });\n                observer.observe({ entryTypes: ['resource'] });\n            } else {\n                // 通过响应 ajax 请求实现动态监测\n                Event.on('ajaxCall', function () {\n                    setTimeout(function () {\n                        var entryCache = _this.entryCache;\n                        var nextEntries = window.performance.getEntries();\n                        if (nextEntries.length === entryCache.length) {\n                            return;\n                        } else if (nextEntries.length > entryCache.length) {\n                            var diffEntries = [];\n                            for (var i = 0; i < nextEntries.length; i++) {\n                                if (entryCache.indexOf(nextEntries[i].name) === -1) {\n                                    diffEntries.push(nextEntries[i]);\n                                }\n                            }\n                            entryCache = nextEntries;\n                            _this.parsePerformanceEntries(diffEntries);\n                        }\n                    }, 1500);\n                });\n            }\n        }\n    }, {\n        key: 'handleResourceTiming',\n        value: function handleResourceTiming() {\n            try {\n                if (this.isSupportGetEntries) {\n                    var entries = window.performance.getEntries();\n                    this.parsePerformanceEntries(entries);\n                    this.observeResourceTiming();\n                }\n            } catch (e) {\n                Util.reportSysWarn(e);\n            }\n        }\n    }, {\n        key: 'handleResourceLoadError',\n        value: function handleResourceLoadError(event) {\n            var _this2 = this;\n\n            var target = event.target || event.srcElement;\n\n            var doTask = function doTask() {\n                var url = target.src || target.href;\n                var href = Util.getHref();\n                if (!url || !href || href.indexOf(url) === 0) return; // 过滤图片懒加载触发的error (url等于前部分href)\n\n                var sec_category = (target.nodeName || '').toLowerCase();\n                if (!sec_category) return;\n\n                var urlShort = sec_category === 'img' ? getImageDomain(url) : url;\n                if (!urlShort) return;\n\n                var urlValid = _this2.filterResource(urlShort);\n                if (!urlValid) return;\n\n                if (jsPattern.test(url)) {\n                    Logan._log('[Error]:' + JSON.stringify({ type: 'js', url: url }), 'owl', 'error', ['resourceError']);\n                }\n\n                var xpath = Util.getXPath(target);\n                var content = url + (xpath ? '\\n' + xpath : '');\n                if (_this2.isSupportGetEntries) {\n                    _this2.pushApi({\n                        type: _this2.parseType(sec_category, url),\n                        resourceUrl: urlShort,\n                        connectType: _this2.getConnectTypeByUrl(urlShort),\n                        responsetime: '0',\n                        statusCode: '500|',\n                        firstCategory: Category.RESOURCE,\n                        secondCategory: sec_category,\n                        logContent: content\n                    });\n                } else {\n                    _this2.errManager._pushResource({\n                        category: Category.RESOURCE,\n                        sec_category: sec_category,\n                        content: content\n                    });\n                }\n            };\n\n            try {\n                if (target instanceof HTMLScriptElement || target instanceof HTMLLinkElement || target instanceof HTMLImageElement) {\n                    doTask();\n                }\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n        }\n    }, {\n        key: '_stringify',\n        value: function _stringify() {\n            var cache = this.cache;\n            if (!(cache && cache.length)) return;\n\n            var ext = this.cfgManager.getExtension();\n            var ret = {\n                region: '',\n                operator: '',\n                network: '',\n                container: '',\n                os: '',\n                unionId: ''\n            };\n            for (var key in ret) {\n                if (ret.hasOwnProperty(key)) {\n                    ret[key] = ext[key] || '';\n                }\n            }\n\n            var infos = [];\n            for (var i = 0; i < cache.length; i++) {\n                infos.push(cache[i]);\n            }\n            ret['infos'] = infos;\n\n            return ret;\n        }\n    }, {\n        key: 'doBatchPush',\n        value: function doBatchPush(data) {\n            data = this.parse(data);\n            var instance = new RM(data);\n            var shouldPush = true;\n            var onBatchPush = this.cfgManager.get('onBatchPush');\n            if (typeof onBatchPush === 'function') {\n                try {\n                    shouldPush = onBatchPush(instance);\n                } catch (e) {\n                    Logger.ignore(e);\n                }\n            }\n            if (!shouldPush) return;\n            this.cache.push(instance);\n        }\n    }, {\n        key: 'push',\n        value: function push(resource) {\n            if (Math.random() > this.cfgManager.get(NAME).sample) return;\n            this.doBatchPush(resource);\n            if (this.cache.length >= CACHE_SEND_TRIGGER) {\n                this.report(true);\n            } else {\n                this.triggerReport();\n            }\n        }\n    }, {\n        key: 'parse',\n        value: function parse(res) {\n            res.pageUrl = res.pageUrl || this.cfgManager.get('pageUrl');\n            res.project = res.project || this.cfgManager.get('project');\n            res.realUrl = res.realUrl || location.href;\n            return res;\n        }\n    }, {\n        key: 'pushApi',\n        value: function pushApi(api) {\n            if (Math.random() > this.cfgManager.get(NAME).sampleApi) return;\n            this.doBatchPush(api);\n            this.triggerReport();\n        }\n    }, {\n        key: 'report',\n        value: function report() {\n            this.triggerReport(true);\n        }\n    }, {\n        key: 'triggerReport',\n        value: function triggerReport(reportNow) {\n            var _this3 = this;\n\n            if (!this.cache.length) return;\n\n            var comboReport = function comboReport() {\n                clearTimeout(_this3.comboTimeout);\n                _this3.comboTimeout = 0;\n                _this3.send();\n            };\n\n            var delay = this.cfgManager.get(NAME).delay;\n            if (reportNow) {\n                this.send();\n            } else if (!this.comboTimeout && delay !== -1) {\n                this.comboTimeout = setTimeout(comboReport, delay);\n            }\n        }\n    }, {\n        key: 'send',\n        value: function send() {\n            var data = this._stringify();\n            if (!data) return;\n\n            var apiPath = this.cfgManager.getApiPath(NAME);\n            Ajax({\n                type: 'POST',\n                url: apiPath + ('&pageId=' + this.cfgManager.get('pageId')),\n                data: JSON.stringify(data)\n            });\n\n            this.cache = [];\n        }\n    }, {\n        key: 'getConnectTypeByUrl',\n        value: function getConnectTypeByUrl(url) {\n            if (url.indexOf('https') === 0) {\n                return 'https';\n            } else if (url.indexOf('http') === 0) {\n                return 'http';\n            }\n            return protocol.indexOf('https') === 0 ? 'https' : 'http';\n        }\n    }]);\n\n    return ResManager;\n}();\n\nmodule.exports = ResManager;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar keys = ['resourceUrl', 'connectType', 'type', 'timestamp', 'requestbyte', 'responsebyte', 'responsetime', 'project', 'pageUrl', 'realUrl', 'statusCode', 'firstCategory', 'secondCategory', 'logContent', 'traceid'];\nvar uploadKeys = keys;\n\n/**\n * 资源信息数据模型\n * \n * @param {string} project - 资源所在项目\n * @param {string} pageUrl - 资源聚合页面地址\n * @param {string} realUrl - 页面真实地址\n * @param {string} resourceUrl - 资源的名称，通常是url，也可以是其他字符串\n * @param {String} type - 资源类型,包括link,script,img,ajax,api\n * @param {Number} timestamp - 时间戳\n * @param {Number} requestbyte - 资源请求大小\n * @param {Number} responsebyte - 资源响应大小\n * @param {Number} responsetime - 资源响应时间\n * @param {string} statusCode - 资源状态码, 格式为：'网络状态码|业务状态码', 一般有一个状态码即可\n * @param {string} firstCategory - 资源出错时的错误分类\n * @param {string} secondCategory - 资源出错时的子分类\n * @param {string} logContent - 资源出错时的详情\n * @param {string} traceid\n * \n * @class ResourceModel\n */\n\nvar ResourceModel = function () {\n    function ResourceModel(data) {\n        var _this = this;\n\n        _classCallCheck(this, ResourceModel);\n\n        keys.forEach(function (key) {\n            _this[key] = data[key];\n        });\n        this.parse();\n    }\n\n    _createClass(ResourceModel, [{\n        key: 'parse',\n        value: function parse() {\n            this.timestamp = this.timestamp || Date.now().toString();\n            this.requestbyte = this.requestbyte || '0';\n            this.responsebyte = this.responsebyte || '0';\n        }\n    }, {\n        key: 'update',\n        value: function update(obj) {\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key) && keys.indexOf(key) > -1) {\n                    this[key] = obj[key];\n                }\n            }\n        }\n    }, {\n        key: 'stringify',\n        value: function stringify() {\n            var _this2 = this;\n\n            var ret = uploadKeys.map(function (key) {\n                return _this2[key];\n            });\n            return ret.join('\\t');\n        }\n    }]);\n\n    return ResourceModel;\n}();\n\nmodule.exports = ResourceModel;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar extend = require('../util/extend');\nvar Ajax = require('../xhr');\nvar Logger = require('../util/logger');\nvar Url = require('../util/url');\nvar NAME = 'metric';\n\nvar MetricManager = function () {\n    function MetricManager(cfgManager) {\n        _classCallCheck(this, MetricManager);\n\n        this.cfgManager = cfgManager;\n        this.tags = {};\n        this.kvs = {};\n        this.extraData = '';\n    }\n    /**\n     * 设置维度信息\n     * \n     * @param {Object} tags - key为维度名称，value为维度数据\n     * @memberof MetricManager\n     */\n\n\n    _createClass(MetricManager, [{\n        key: 'setTags',\n        value: function setTags(tags) {\n            this.tags = extend(this.tags, tags);\n        }\n    }, {\n        key: 'getTags',\n        value: function getTags(tagName) {\n            return tagName ? this.tags[tagName] : this.tags;\n        }\n        /**\n         * 增加metric数据\n         * \n         * @param {string} name - metric名称 \n         * @param {number} value  - metric值\n         * @memberof MetricManager\n         */\n\n    }, {\n        key: 'setMetric',\n        value: function setMetric(name, value) {\n            var _this = this;\n\n            if (typeof name !== 'string') {\n                return Logger.log('metric名称必须是string类型');\n            }\n            if (typeof value !== 'number') {\n                return Logger.log('metric\\u503C\\u5FC5\\u987B\\u662Fnumber\\u7C7B\\u578B,\\u5F53\\u524D\\u4E3A' + name + '-' + value);\n            }\n\n            if (!this.kvs[name]) {\n                this.kvs[name] = [];\n            }\n            this.kvs[name].push(value);\n\n            try {\n                if (this.cfgManager.get(NAME).combo) {\n                    if (this.timeout) {\n                        clearTimeout(this.timeout);\n                        this.timeout = null;\n                    }\n\n                    this.timeout = setTimeout(function () {\n                        _this.report();\n                    }, this.cfgManager.get(NAME).delay || 1500);\n                }\n            } catch (e) {}\n        }\n    }, {\n        key: 'setExtraData',\n        value: function setExtraData(msg) {\n            this.extraData = msg || '';\n        }\n    }, {\n        key: 'getMetric',\n        value: function getMetric(name) {\n            return name ? this.kvs[name] : this.kvs;\n        }\n    }, {\n        key: 'clearMetric',\n        value: function clearMetric() {\n            this.kvs = {};\n        }\n    }, {\n        key: '_rollbackMetric',\n        value: function _rollbackMetric(preMetric) {\n            if (preMetric) {\n                for (var name in preMetric) {\n                    if (preMetric.hasOwnProperty(name)) {\n                        this.kvs[name] = preMetric[name].concat(this.kvs[name] || []);\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'report',\n        value: function report() {\n            var _this2 = this;\n\n            if (!this.kvs || Object.keys(this.kvs).length === 0) return;\n\n            var data = {\n                kvs: this.kvs,\n                tags: this.tags,\n                ts: parseInt(+new Date() / 1000),\n                extraData: this.extraData\n            };\n            var preMetric = this.kvs;\n            this.clearMetric();\n\n            var cfgManager = this.cfgManager;\n            var url = Url.stringify(cfgManager.getApiPath(NAME), {\n                p: cfgManager.get('project'),\n                pageId: cfgManager.get('pageId'),\n                unionId: cfgManager.getExtension('unionId')\n            });\n\n            Ajax({\n                url: url,\n                type: 'POST',\n                header: {\n                    'Content-Type': 'application/x-www-form-urlencoded'\n                },\n                data: 'data=' + encodeURIComponent(JSON.stringify(data)),\n                fail: function fail() {\n                    _this2._rollbackMetric(preMetric);\n                }\n            });\n        }\n    }]);\n\n    return MetricManager;\n}();\n\nmodule.exports = MetricManager;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Ajax = require('../xhr');\nvar Url = require('../util/url');\nvar NAME = 'pv';\n\nvar PvManager = function () {\n    function PvManager(cfgManager) {\n        _classCallCheck(this, PvManager);\n\n        this.cfgManager = cfgManager;\n    }\n\n    _createClass(PvManager, [{\n        key: 'report',\n        value: function report(opts) {\n            opts = opts || {};\n            var cfgManager = this.cfgManager;\n            var ext = cfgManager.getExtension();\n            var url = Url.stringify(cfgManager.getApiPath(NAME), {\n                project: opts.project || cfgManager.get('project'),\n                pageurl: encodeURIComponent(opts.pageUrl || cfgManager.get('pageUrl')),\n                pageId: opts.pageId || cfgManager.get('pageId'),\n                timestamp: Date.now(),\n                region: ext.region || '',\n                operator: ext.operator || '',\n                network: ext.network || '',\n                container: ext.container || '',\n                os: ext.os || '',\n                unionid: ext.unionId || ''\n            });\n            Ajax({\n                url: url,\n                type: 'POST',\n                header: {\n                    'Content-Type': 'application/x-www-form-urlencoded',\n                }\n            });\n        }\n    }]);\n\n    return PvManager;\n}();\n\nmodule.exports = PvManager;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Logan = require('../util/logan');\n\nvar LogManager = function () {\n    function LogManager(cfgManager) {\n        _classCallCheck(this, LogManager);\n\n        this.cfgManager = cfgManager;\n    }\n\n    _createClass(LogManager, [{\n        key: 'addLog',\n        value: function addLog(log) {\n            Logan.log('[Log]: ' + log, { noType: true });\n        }\n    }]);\n\n    return LogManager;\n}();\n\nmodule.exports = LogManager;","'use strict';\n\nvar Util = require('./util/index');\nvar getCookie = require('./util/cookie');\n\nmodule.exports = {\n    getExt: function getExt() {\n        var ret = {};\n        try {\n            var network = getCookie('network');\n            if (!network) {\n                var ua = Util.getUserAgent();\n                var reg = /NetType\\/([a-zA-Z0-9]+)/;\n                if (ua && reg.test(ua)) {\n                    network = ua.match(reg)[1];\n                }\n            }\n            network = network || Util.getConnectionType();\n            var unionId = getCookie('uuid') || getCookie('unionid') || getCookie('dpid') || getCookie('_lxsdk_cuid');\n            if (network) ret.network = network;\n            if (unionId) ret.unionId = unionId;\n        } catch (e) {}\n        return ret;\n    }\n};","'use strict';\n\n// 读取cookie值\nmodule.exports = function readCookie(name) {\n    var nameEQ = name + '=';\n    var ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) == ' ') {\n            c = c.substring(1, c.length);\n        }if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n\n    return null;\n};","'use strict';\n\nvar filterMap = require('./filter_config');\nvar Util = require('./index');\n\nmodule.exports = function configFilter(cfgManager) {\n    if (cfgManager.get('devMode')) return;\n\n    cfgManager.addFilter('base', filterMap['base']);\n\n    var UA = Util.getUserAgent();\n    if (/MicroMessenger/.test(UA)) {\n        cfgManager.addFilter('weixin', filterMap['weixin']);\n    } else if (/dp\\/com\\.dianping/.test(UA)) {\n        cfgManager.addFilter('dianping', filterMap['dianping']);\n    }\n};","\"use strict\";\n\nmodule.exports = {\n    base: function base(model) {\n        return !model.resourceUrl || /\\.(dpfile|dianping|51ping|meituan|sankuai)\\.(com|net)/.test(model.resourceUrl);\n    },\n    weixin: function weixin(model) {\n        return !/(WeixinJSBridge|_WXJS|WebViewJavascriptBridge)/.test(model.sec_category);\n    },\n    dianping: function dianping(model) {\n        return !/document.elementFromPoint/.test(model.sec_category);\n    }\n};","'use strict';\n\n// capture and report performance timing information of page loading process\nmodule.exports = function capturePerfTiming(pageManager) {\n    var cfgManager = pageManager.cfgManager;\n    var catchPage = cfgManager.get('autoCatch').page;\n    var pageConfig = cfgManager.get('page');\n\n    if (catchPage && pageConfig.sensoryIndex) {\n        pageManager.sensoryObserver();\n    } else {\n        try {\n            // disconnect MutationObserver created in pre-catch module\n            if (window._Owl_ && window._Owl_.observer && window._Owl_.observer.disconnect) {\n                window._Owl_.observer.disconnect();\n            }\n        } catch (e) {}\n    }\n\n    if (catchPage && !pageManager.getReady()) {\n        pageManager.setInitConfig();\n        if (document && document.readyState === 'complete') {\n            pageManager.parsePageTimeWithDefer();\n        } else {\n            var ADD_EVENT_FUNC = window.addEventListener || window.attachEvent;\n            var loadName = window.addEventListener ? 'load' : 'onload';\n            ADD_EVENT_FUNC(loadName, function () {\n                pageManager.parsePageTimeWithDefer();\n            });\n        }\n    }\n};","'use strict';\n\n// capture JS errors\nmodule.exports = function (errManager) {\n    var captureCfg = errManager.cfgManager.get('autoCatch');\n    if (captureCfg.js) {\n        // global JS error\n        var origin = window.onerror;\n        window.onerror = function () {\n            errManager.parseWindowError.apply(errManager, arguments);\n            origin && origin.apply(window, arguments);\n        };\n\n        // unhandled promise rejection\n        var ADD_EVENT = window.addEventListener || window.attachEvent;\n        ADD_EVENT('unhandledrejection', function () {\n            errManager.parsePromiseUnhandled.apply(errManager, arguments);\n        });\n    }\n\n    // console.error\n    if (captureCfg.console && window.console && window.console.error) {\n        var consoleError = window.console.error;\n        window.console.error = function () {\n            errManager.parseConsoleError.apply(errManager, arguments);\n            consoleError && consoleError.apply(window.console, arguments);\n        };\n    }\n};","'use strict';\n\nvar Event = require('../util/event');\nvar interceptAjax = require('./ajax');\nvar interceptFetch = require('./fetch');\n\n// capture performance and errors of Ajax (xhr & fetch) and static resources\nmodule.exports = function (resManager) {\n    var cfgManager = resManager.cfgManager;\n    var captureCfg = cfgManager.get('autoCatch');\n    var enableLogTrace = cfgManager.get('enableLogTrace') || false;\n    var project = cfgManager.get('project');\n    var resCfg = cfgManager.get('resource');\n    if (captureCfg.ajax) {\n        // rewrite and monitor stage change of xhr instance\n        interceptAjax(enableLogTrace, project, resCfg.catchAbort, resCfg.catchTimeout);\n        Event.on('ajaxCall', function () {\n            resManager.parseAjax.apply(resManager, arguments);\n        });\n    }\n\n    if (captureCfg.fetch) {\n        interceptFetch(enableLogTrace, project);\n        Event.on('fetchCall', function () {\n            resManager.parseFetch.apply(resManager, arguments);\n        });\n    }\n\n    if (captureCfg.resource) {\n        var EVENT_LISTEN_FUNC = window.addEventListener || window.attachEvent;\n        var loadName = window.addEventListener ? 'load' : 'onload';\n        var errName = window.addEventListener ? 'error' : 'onerror';\n        // get all static resources after page load\n        if (document && document.readyState === 'complete') {\n            resManager.handleResourceTiming.apply(resManager);\n        } else {\n            EVENT_LISTEN_FUNC(loadName, function () {\n                resManager.handleResourceTiming.apply(resManager);\n            });\n        }\n\n        // capture static resources load error\n        EVENT_LISTEN_FUNC(errName, function (event) {\n            if (event) {\n                resManager.handleResourceLoadError.apply(resManager, arguments);\n            }\n        }, true);\n    }\n};","'use strict';\n\nvar Util = require('../util/index');\nvar Event = require('../util/event');\nvar xhr = window.XMLHttpRequest;\n\nmodule.exports = function interceptAjax() {\n    var enableLogTrace = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var project = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var catchAbort = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    var catchTimeout = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n    if (!xhr || xhr._owl) return;\n    xhr._owl = true;\n\n    if (window.location && window.location.protocol === 'file:') return;\n\n    try {\n        var _open = xhr.prototype.open;\n        var _send = xhr.prototype.send;\n        var origin = Util.getOrigin();\n\n        xhr.prototype.open = function (method, url) {\n            this._startTime = +new Date();\n            this.method = method;\n            this.url = url;\n            _open && _open.apply(this, arguments);\n\n            try {\n                // setRequestHeader should be after xhr.open\n                if (enableLogTrace && project && Util.checkSameOrigin(url, origin) && typeof this.setRequestHeader === 'function') {\n                    var id = Util.traceid();\n                    if (id) {\n                        this.setRequestHeader('M-TRACEID', id);\n                        this.setRequestHeader('M-APPKEY', 'fe_' + project);\n                        this.traceid = id;\n                    }\n                }\n            } catch (e) {\n                Util.reportSysError(e);\n            }\n        };\n\n        xhr.prototype.send = function () {\n            var _this = this,\n                _arguments = arguments;\n\n            var EVENT_LISTENER = 'addEventListener';\n            var STATE_CHANGE = 'onreadystatechange';\n            var _dispatchEvent = function _dispatchEvent(event) {\n                if (!event) return;\n\n                if (/catfront.(dianping|51ping).com/.test(_this.url)) {\n                    try {\n                        var response = void 0;\n                        if (_this.getAllResponseHeaders('content-type').indexOf('application/json') !== -1) {\n                            response = JSON.parse(event.currentTarget.response);\n                        }\n                        // callback of Owl report requests\n                        if (event.currentTarget.status === 200) {\n                            _this.success && _this.success(response);\n                        } else {\n                            _this.fail && _this.fail(response);\n                        }\n                    } catch (e) {}\n                } else {\n                    event.duration = +new Date() - _this._startTime;\n                    Event.trigger('ajaxCall', event);\n                }\n            };\n\n            if (EVENT_LISTENER in this) {\n                this[EVENT_LISTENER]('load', _dispatchEvent);\n                this[EVENT_LISTENER]('error', _dispatchEvent);\n                catchAbort && this[EVENT_LISTENER]('abort', _dispatchEvent);\n                catchTimeout && this[EVENT_LISTENER]('timeout', _dispatchEvent);\n            } else {\n                var _originStateChange = this[STATE_CHANGE];\n                this[STATE_CHANGE] = function (event) {\n                    if (_this.readyState === 4) {\n                        _dispatchEvent(event);\n                    }\n                    _originStateChange && _originStateChange.apply(_this, _arguments);\n                };\n            }\n\n            return _send && _send.apply(this, arguments);\n        };\n    } catch (e) {\n        Util.reportSysError(e);\n    }\n};","'use strict';\n\nvar Event = require('../util/event');\nvar Util = require('../util/index');\n\nmodule.exports = function interceptFetch() {\n    var enableLogTrace = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    var project = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n    if (typeof window.fetch !== 'function' || window.fetch._owl) return;\n\n    var protocol = window.location && window.location.protocol;\n    if (protocol === 'file:') return;\n\n    var _fetch = window.fetch;\n    window.fetch = function (input) {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var fetchUrl = (input && typeof input !== 'string' ? input.url : input) || '';\n        var init = args[1] || {};\n        var origin = Util.getOrigin();\n        if (init.method === 'HEAD' || init.mode === 'no-cors') return _fetch.apply(window, args);\n\n        var traceid = void 0;\n        try {\n            if (enableLogTrace && Util.checkSameOrigin(fetchUrl, origin) && project) {\n                traceid = Util.traceid();\n                init.headers = new Headers(init.headers);\n                init.headers.append('M-TRACEID', traceid);\n                init.headers.append('M-APPKEY', 'fe_' + project);\n                args[1] = init;\n            }\n        } catch (e) {\n            Util.reportSysError(e);\n        }\n\n        var startTime = +new Date();\n        return _fetch && _fetch.apply(window, args).then(function (res) {\n            try {\n                if (!res || typeof res.clone !== 'function') return res;\n\n                var copy = res.clone();\n                var resHeaders = copy.headers;\n                var xForbidReason = '';\n                if (resHeaders && typeof resHeaders.get === 'function') {\n                    var contentType = resHeaders.get('content-type');\n                    if (contentType && !/(text)|(json)/.test(contentType)) return res;\n\n                    xForbidReason = resHeaders.get('x-forbid-reason') || '';\n                }\n                copy.text().then(function (response) {\n                    Event.trigger('fetchCall', {\n                        url: fetchUrl,\n                        duration: +new Date() - startTime,\n                        isSuccess: true,\n                        ok: copy.ok,\n                        response: response,\n                        statusCode: copy.status,\n                        statusText: copy.statusText,\n                        xForbidReason: xForbidReason,\n                        traceid: traceid\n                    });\n                });\n\n                return res;\n            } catch (e) {\n                Util.reportSysError(e);\n                return res;\n            }\n        }).catch(function (err) {\n            Event.trigger('fetchCall', {\n                url: fetchUrl,\n                duration: +new Date() - startTime,\n                isSuccess: false,\n                errName: err.name,\n                errMsg: err.stack || err.message,\n                traceid: traceid\n            });\n\n            throw err;\n        });\n    };\n\n    window.fetch._owl = true;\n};","'use strict';\n\nvar Ajax = require('./xhr');\nvar Url = require('./util/url');\nvar version = require('./constant/version.js').version;\nvar Logger = require('./util/logger');\n\nvar RATE = 0.01;\n\n/**\n * Owl 版本号上报\n * \n * @param {string} name\n * @param {OWL} Owl\n */\nmodule.exports = function (name, Owl) {\n    if (!name || !Owl) return;\n    if (Math.random() > RATE) return;\n\n    var ge = function ge(v1, v2) {\n        try {\n            v1 = v1.split('.').map(function (value) {\n                return parseInt(value);\n            });\n            v2 = v2.split('.').map(function (value) {\n                return parseInt(value);\n            });\n            var ret = void 0;\n            if (v1[0] !== v2[0]) {\n                ret = v1[0] - v2[0];\n            } else if (v1[1] !== v2[1]) {\n                ret = v1[1] - v2[1];\n            } else {\n                ret = v1[2] - v2[2];\n            }\n            return ret >= 0 ? true : false;\n        } catch (e) {\n            Logger.ignore(e);\n            return false;\n        }\n    };\n    if (ge(Owl.cfgManager.get('version'), version)) return;\n\n    var data = {\n        v: 1,\n        rate: RATE,\n        project: name,\n        version: 'v_' + version,\n        pageurl: encodeURIComponent(window.location.href),\n        count: 1\n    };\n    var url = Owl.cfgManager.url + '/api/version';\n    url = Url.stringify(url, data);\n    setTimeout(function () {\n        Ajax({\n            type: 'GET',\n            url: url\n        });\n    }, 1500);\n};","import {getDeviceInfo} from './device'\n// 状态管理类\nclass InfoManager{\n    constructor(){\n        this.info={}\n        this.supportInfo={}\n    }\n    setSupportInfo(name,supportInfo){\n            this.supportInfo[name]={\n                ...this.supportInfo[name]||{},\n                ...supportInfo\n            }\n    }\n    setInfo(newInfo){\n        for(const [key,value] of Object.entries(newInfo)){\n         this.info[key]=value\n        }\n    }\n    getInfo(key){\n        return this.info[key]\n    }\n    getFinInfo(){\n        const vm=InfoManager.Inst\n        vm.$plugins.forEach(plugin=>{\n            if(plugin.filter&&typeof plugin.filter=='function'){\n               this.supportInfo[plugin.name]=plugin\n               .filter(this.supportInfo[plugin.name]) \n            }\n        })\n        const finInfo={\n            ...this.info,\n            ...this.supportInfo,\n        }\n        const {filter}=vm.$options\n        if(filter&&typeof filter=='function'){\n            return filter(finInfo)\n        }\n        return finInfo\n    }\n}\nexport function initInfo(vm){\n    if(!vm.$info){\n        vm.$info=new InfoManager()\n        InfoManager.Inst=vm\n        vm.$info.setInfo(getDeviceInfo())\n    }\n}","export function getDeviceInfo() {\n    return {\n        os:getDeviceOS(),\n        onLine:getOnlineState(),\n        timeStamp:getCurrentTimeStamp(),\n        ...getBrowserTypeAneVersion()\n\n    }\n}\nfunction getDeviceOS() {\n  let userAgent = navigator.userAgent;\n  if (/Android/i.test(userAgent)) {\n    return \"Android\";\n  } else if (/iPhone|iPad|iPod/i.test(userAgent)) {\n    return \"IOS\";\n  } else {\n    return navigator.platform;\n  }\n}\n\nfunction getOnlineState() {\n  return navigator.onLine;\n}\n\nfunction getBrowserTypeAneVersion() {\n  let ua = navigator.userAgent.toLocaleLowerCase();\n  let version = \"\";\n  let browserType = null;\n  if (ua.match(/msie/) != null || ua.match(/trident/) != null) {\n    browserType = \"IE\";\n    version = /msie\\s(\\d+\\.\\d+)/i.exec(ua)[1];\n  } else if (ua.match(/firefox/) != null) {\n    browserType = \"firefox\";\n    version = /firefox\\/(\\d+\\.\\d+)/i.exec(ua)[1];\n  } else if (ua.match(/ucbrowser/) != null) {\n    version = /ucbrowser\\/(\\d+\\.\\d+)/i.exec(ua)[1];\n    browserType = \"UC\";\n  } else if (ua.match(/opera/) != null || ua.match(/opr/) != null) {\n    version = /opera\\/(\\d+\\.\\d+)/i.exec(ua)[1];\n    browserType = \"opera\";\n  } else if (ua.match(/metasr/) != null) {\n    version = /metasr\\/(\\d+\\.\\d+)/i.exec(ua)[1];\n    browserType = \"sougou\";\n  } else if (\n    ua.match(/tencenttraveler/) != null ||\n    ua.match(/qqbrowse/) != null\n  ) {\n    version =\n      /tencenttraveler\\/(\\d+\\.\\d+)/i.exec(ua)[1] ||\n      /qqbrowse\\/(\\d+\\.\\d+)/i.exec(ua)[1];\n    browserType = \"QQ\";\n  } else if (ua.match(/chrome/) != null) {\n    browserType = \"chrome\";\n    version = /chrome\\/(\\d+\\.\\d+)/i.exec(ua)[1];\n  } else if (ua.match(/safari/) != null) {\n    version = /safari\\/(\\d+\\.\\d+)/i.exec(ua)[1];\n    browserType = \"Safari\";\n  } else {\n    browserType = \"others\";\n  }\n  return {\n    browserType,\n    browserVersion:version\n  };\n}\n\nfunction getCurrentTimeStamp(){\n    return  new Date().getTime()\n}","\nimport { defaultCssPlugin,cssPluginOptionsExtra } from \"../adapter/css\";\nimport { defaultHtmlPlugin ,htmlPluginOptionsExtra } from \"../adapter/html\";\nimport {PLUGIN_NEED_NAME,handlerError} from '../options/error'\n// plugin格式{\n//     name:'service worker',\n//     type:'js',\n//     test:function(){\n//         return true\n//     }，  \n//     aysnc:true\n// }\n// api格式：{\n//     name:'service worker'\n//     type:'css'\n// }\n// 如果aysnc设为true，则是一个异步插件，可以异步返回检验结果\n// 这里先不处理promise，如果执行插件时返回了Promise，再执行异步逻辑\nexport function initPlugin(vm){\n    const {plugins=[],api=[]}=vm.$options\n    if(plugins.length!==0){\n        plugins.forEach(plugin => {\n            if(!plugin.name){\n                handlerError(PLUGIN_NEED_NAME)\n            }\n            if(!plugin.type){\n                plugin.type='js'\n            }\n        });\n    }\n    vm.$plugins=api.map(apiItem=>{\n        mergePluginParam(apiItem)\n        let exitsPlugin=plugins.find(plugin=>plugin.name==apiItem.name)\n        if(exitsPlugin){\n            return {\n                ...apiItem,\n                ...exitsPlugin\n            }\n        }\n            const test=createDefaultPlugin(apiItem)\n            return {\n                ...apiItem,\n                test\n            }\n    })\n}\n\nfunction createDefaultPlugin(apiItem){\n    switch (apiItem.type){\n        case 'js':{\n            return function(){\n                return Boolean(window[apiItem.name])\n            }\n        }\n        case 'css':{\n            return defaultCssPlugin(apiItem)\n        }\n        case 'html':{\n             return defaultHtmlPlugin(apiItem)\n        }\n        default:{\n            break\n        }\n    }\n}\n// 由于各种类型的插件参数有差异，因此需要在这里统一做一轮处理\nfunction mergePluginParam(plugin){\n        addPluginMethods(plugin)\n        const {type}=plugin\n        switch (type){\n            case 'js':{\n                break;\n            }\n            case 'css':{\n                cssPluginOptionsExtra(plugin)\n                break\n            }\n            case 'html':{\n                htmlPluginOptionsExtra (plugin)\n                break\n            }\n        }\n}\n\n// 给插件增加静态方法\nfunction addPluginMethods(plugin){\n    addPluginMethodsExtraData(plugin)\n}\n// 增加给插件保存和修改额外数据的方法\nfunction addPluginMethodsExtraData(plugin){\n    plugin.extra={}\n    plugin.setExtraData=function(params){\n        Object.entries(params).forEach(([key,value])=>{\n            this.extra[key]=value\n        })\n    }.bind(plugin)\n}","// 检测CSS可能传入的值有：postion:left\n// 或者可以仅仅传入potions，传入values数组来检测是否支持数组中的所有值，\n// 比如检测[left,right,top,bottom]这一组值是否都允许\n// 或者可以检测表达式是否支持，比如(--username: zhangxinxu)\n// apiOptions在type为CSS时，格式如下：\n// {\n//     name:'flex:1'| 'flex',\n//     type:'css',\n//     values:[1,2,3],\n//     expression:true  //如果开启则以表达式来解析 \n\n\n// }\nexport function defaultCssPlugin(apiOptions){\n    let {name,values,expression}=apiOptions\n    return function(){\n        // 版本较新的浏览器使用CSS API进行检测\n        // 版本较低的浏览器使用getComputedStyle方法进行polyfill\n        function CssSupportPolfill(propertyName,value){\n            if(CSS&&CSS.supports){\n                if(expression){\n                    return CSS.supports(name)\n                }\n                return CSS.supports(propertyName,value)\n            }\n            let dom=document.createElement('div')\n            dom.style[propertyName]=value\n            return window.getComputedStyle(dom)[propertyName] === value\n        }\n        // 这配置合并阶段处理过了values,values一定是一个数组\n            return values.every(val=>{\n                    return CssSupportPolfill(name,val)\n                })\n    }\n}\n\n// css插件配置扩展\nexport function cssPluginOptionsExtra(pluginOptions){\n    let values=pluginOptions.value||[]\n    const {name}=pluginOptions\n    let propertyName,value\n    // 处理类似flex:1;这样的情况\n    if(name.indexOf(':')!=-1){\n        [propertyName,value]=name.split(\":\")\n        if(value[value.length-1]==';'){\n            value=value.slice(-2);\n        }\n        values.push(value)\n    }else{\n        propertyName=name;\n    }\n    pluginOptions.values=values\n    pluginOptions.name=propertyName\n    pluginOptions.expression=pluginOptions.expression||false\n    \n}","// 检测html主要是检测一个属性是否支持\n// 由于不同属性可能不同标签支持不一样，应该允许传一个标签列表，用这些标签列表进行检测，默认只使用div检测\n// apiOptions在type为html时，格式如下：\n// {\n//     name:’placeholder‘\n//     type:'html',\n//     tags:['div','input']\n// }\nexport function defaultHtmlPlugin(apiOptions){\n    const {name,tags}=apiOptions\n    // 这里的逻辑已经在处理插件类型时处理完毕，tag一定存在且为数组\n    return function(){\n        return tags.every(tag=>{\n            const dom=document.createElement(tag)\n            return (name in dom)\n        })\n    }\n}\n// 处理html的插件类型扩展\nexport function htmlPluginOptionsExtra(pluginOptions){\n    // 没有传tag则默认为div\n    if(!pluginOptions.tags){\n        pluginOptions.tags=['div']\n    }else{\n        if(typeof pluginOptions.tags=='string'){\n            pluginOptions.tags=[pluginOptions.tags]\n        }\n        if(!Array.isArray(pluginOptions.tags)){\n            throw TypeError('tags is an array')\n        }\n    }\n}","// 这部分需要考虑异步问题，有些检测API可能是异步的，需要额外处理\nexport function collectApiSupportInfo(vm){\n    return new Promise((reslove,reject)=>{\n      const {$plugins,$info}=vm\n      const asyncCheckList=[]\n      $plugins.forEach(plugin => {\n          if(plugin.async){\n            asyncCheckList.push(plugin)\n          }else{\n            $info.setSupportInfo(plugin.name,createSupportInfo(plugin,vm))\n          }\n      });\n      if(asyncCheckList.length!==0){\n        Promise.all(asyncCheckList.map(item=>item.test.call(item,vm))).then(infoList=>{\n          asyncCheckList.forEach((plugin,index)=>{\n              $info.setSupportInfo(plugin.name,{\n                support:infoList[index],\n                ...plugin.extra\n              })\n          })\n          reslove(true)\n      })\n      }else{\n        reslove(true)\n      }\n    })\n}\n// 创建支持度信息，插件可以通过修改插件的extra属性来扩展其他需要上报的属性\nfunction createSupportInfo(plugin,vm){\n  return {\n     support:plugin.test.call(plugin,vm),\n     ...plugin.extra\n  }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(0);\n"],"names":["root","factory","exports","module","define","amd","this","ApiSupport","constructor","options","$options","mergeOptions","flowLimitController","initRequest","initPlugin","initInfo","immediate","run","filter","timeout","Promise","race","collectApiSupportInfo","reslove","setTimeout","then","info","$info","getFinInfo","requestMessage","vm","limit","Math","random","verifyTypeParams","Set","api","plugins","handlerError","NEED_API","params","Array","isArray","API_NEED_ARRAY_OR_OBJECT","type","has","NEED_VERIFY_TYPE","verifyOptions","name","useInnerPlugins","forEach","item","optionsFilter","deepMerge","defaultOptions","target","sources","length","source","shift","isObject","key","Object","assign","request","data","owlOptions","project","pageUrl","devMode","autoCatch","pv","page","ajax","resource","js","metric","combo","raptorKey","InnnerPluginMap","Map","ServiceWorkerPlugin","apis","map","plugin","addInnerPlugin","innerPlugin","pluginName","find","push","get","MESSAGE_EVENT_NAME","unUseEventData","BaseData","hitCache","hitPreload","error","errorCode","supportServiceWorker","test","initServiceWorker","serviceWorkerDataFilter","async","navigator","serviceWorker","register","registration","cb","addEventListener","event","eventType","value","setExtraData","initMessageListener","window","messageServiceWorkerErrorHandler","catch","e","console","log","support","isInit","PLUGINS_NEED_ARRAY_OR_OBJECT","PLUGIN_NEED_NAME","tips","Error","onLine","histroyDara","addHistroyData","inst","getOwlMetricInst","JSON","stringify","setMetric","report","initOwlMetricInst","useHistroyData","history","localStorage","getItem","parse","setItem","fn","removeItem","metricInst","Owl","start","_typeof","Symbol","iterator","obj","prototype","_createClass","defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","CfgManager","require","ErrManager","PageManager","ResManager","MetricManager","PvManager","LogManager","Dimns","Util","configFilter","Logger","guid","Extend","Logan","Event","category","version","EM","catchPage","catchError","catchResource","OWL","config","opts","instance","TypeError","_classCallCheck","cfgManager","errManager","pageManager","resManager","metricManager","pvManager","logManager","setExtension","getExt","noFilter","_config","set","setDebug","err","getConfig","point","undefined","position","newPoint","duration","timing","getPerfTiming","navStart","navigationStart","timeStamp","Date","setUserReady","validTypes","indexOf","networkCode","statusCode","newApi","connectType","resourceUrl","responsetime","responseTime","toString","content","firstCategory","AJAX","secondCategory","logContent","pushApi","addApi","apply","arguments","_log","_this","from","to","getPageUrl","configs","pageId","delay","resetPvTimer","clearTimeout","addFilter","removeFilter","func","context","__owl_wrapped__","__owl_wrapper__","wrapped","addError","property","hasOwnProperty","getExtension","pageCfg","sensoryIndex","manualReportFST","reportSysError","url","performance","getEntriesByName","temp","parseInt","round","isNaN","result","getResTimingInfo","createInstance","tags","userProject","setTags","pvConf","auto","sample","resConf","__version__","errorModel","checkIsSpider","isStarted","loganCfg","enable","ready","LoganAPI","loganConfig","captureCfg","reportPv","spaCfg","autoPV","getFST","hackHistoryStateFuncs","that","on","pathInfo","resetPv","document","readyState","path","prevPath","prevRoutePath","getRouteFst","reportSysWarn","handleApiCall","args","warn","slice","queue","owl","q","call","preLoadName","isReady","_window$preLoadName","preTasks","dataSet","task","handleResourceLoadError","handleResourceTiming","parsePageTime","checkCache","versionReport","urlPrefix","getProtocol","SDKMetrics","Url","sdkVersion","protocol","EXT","urlProduct","urlBeta","webVersion","fetch","disableSensoryImageIndex","interactToStopObserver","noCheckOuterMutaCount","fstPerfSample","fstPerfAnalysis","logSlowView","logFirstScreen","ignoreIframe","mainResourceNumber","timeThreshold","SPA","sampleApi","catchAbort","catchTimeout","enableStatusCheck","ignoreMTSIForbidRequest","resourceReg","enableLogTrace","invalid","flag","autoBusinessCode","parseResponse","res","code","status","image","fileSize","maxSize","maxNum","maxTime","formatUnhandledRejection","useSendBeacon","disableCache","noScriptError","logan","ignoreList","disabledFilters","baseQuery","v","sdk","apiPaths","fstInfo","fstLog","userConfig","extensions","filters","val","setApiDomain","RegExp","ignore","update","isDev","exts","Function","filterIndex","splice","ret","_key","debugLog","msg","logScreen","param","join","replaceParam","pattern","replace","S4","substring","now","location","Ajax","extend","DB","Category","Level","Version","NAME","encodeDataBeforeSend","encodeURIComponent","doSend","header","success","fail","xhrRewritten","ErrorManager","cache","cacheSending","comboTimeout","timeLimit","errorCount","isTimeLimit","detectLeave","line","col","stack","_processError","sec_category","rowNum","colNum","_push","SCRIPT","reportSystemError","reason","errName","message","contents","arg","ErrorEvent","origin","onbeforeunload","cacheDisabled","sendBeacon","cacheCombined","addCacheExtension","keys","_cacheSending$key","xhr","abort","concat","getApiPath","beacon","add","_this2","preCache","clearAll","currVer","originUrl","cacheVer","level","ERROR","realUrl","getHref","send","WARN","errObj","doFallback","match","jsReg","scriptUrl","rowCols","doParse","unionId","errCfg","seen","logInfo","toLoganJson","k","isValid","ignoreErrors","_i","dispatchEvent","getEventInfo","eventInfo","errEvent","CustomEvent","createEvent","evt","initCustomEvent","isExist","_handleError","element","isEqual","hook","isReportNow","_this3","maxError","comboReport","ts","record","ext","toJson","NOOP","UA","getUserAgent","useXDomainRequest","getAppName","XDomainRequest","req","XMLHttpRequest","open","_handleXhrEvent","currentTarget","_originStateChange","onreadystatechange","setRequestHeader","spiderList","_int64Convert","uuid","_uuid","__esModule","default","historyStateHacked","ADD_EVENT","attachEvent","newURL","oldURL","curPath","parseRoutePath","prePath","trigger","hackStateFunc","oldFunc","state","title","preHref","href","curHref","query","hashAfterQuery","getOrigin","hostname","port","getConnectionType","connection","effectiveType","userAgent","appName","ua","toLowerCase","getFullUrl","checkSameOrigin","traceid","uu","v1","f16","l16","hex","fill","_","it","signedHexToDec","getXPath","node","count","id","className","split","nodeName","parentNode","listener","_events_","events","trim","str","toNumber","char","scale","num","firstr","secstr","n","firlen","seclen","carry","floor","sub","sn","compare","multiply","multiplier","convert","src","fromScale","toScale","polishLen","rate","len","polish","negate","signedDecToHex","v4","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","buf","offset","b","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","rnds","r","byteToHex","substr","bth","ii","errKeys","VALID_ATTR","eventKeys","OwlError","timestamp","other","dynamicMetric","LEVEL","CATEGORY","RESOURCE","INFO","DEBUG","isSupport","LS_KEY","LS_KEY_V2","rawV2","tempV2","clear","raw","clearItem","testKey","loadScript","doTask","noType","cached","ele","createElement","onload","getElementsByTagName","appendChild","CanIUse","_require","jsPattern","cssPattern","imgPattern","urlPattern","FirstScreenManager","Number","parseTime","time","points","pointsCustom","noCache","titansTags","initialPage","initialProject","perf","paint","getEntriesByType","resourceTiming","isMainResource","mainResourceTiming","initiatorType","size","firstScreenManager","mutaObserver","stopRouteMutaObserver","startRouteMutaObserver","pageurl","speed","customspeed","method","getSensoryIndex","senseTime","parseFirstScreenPerf","_getPerformaceTiming","getPerformaceTiming","setReady","perfMap","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd","firstPaint","firstContentfulPaint","startTime","FST","FCP","titansData","titansReport","KNBTitansXSync","getTitansReport","h5Env","envInfo","h5EnvInit","h5EnvPrepare","pagePreprocess","webviewPrepare","tag","isWebViewInitialed","urlPreprocess","urlPreInfo","isInterJump","commonTag","titansCoreVersion","reportSystemWarn","_i2","dcl","load","fst","resTiming","getMainResourceTiming","_i3","transferSize","_clearTimeout","reportNow","getReady","getUserReady","pendingAjax","_this4","pageConfig","resEntries","logSumInfo","sampleRate","sumInfo","picCount","picSize","jsCount","jsSize","cssCount","cssSize","ajaxCount","resList","css","img","stalled","dns","tcp","ssl","ttfb","logStr","initType","matches","bodySize","decodedBodySize","secureConnectionStart","p","respTime","_url","_data","_this5","PerformanceNow","_Owl_","pageData","sensoryObserver","parseAsyncFST","fcp","PerformanceObserver","chromeVersionReg","MutationObserver","IEVersion","parseFloat","GetEntries","getEntries","ImgUtils","mutaRecords","domTimer","perfTimer","domDone","perfDone","ignoreFirstScreenImg","outCount","scrollDom","STOPTIME","MinScore","ELEMENT_WEIGHT","DEP_WEIGHT","NodesFilter","ArraySlice","windowSize","height","innerHeight","width","innerWidth","windowHeight","windowWidth","observer","disableMutaObserver","mutaStopTime","perfObserver","ignoreDom","ignoreAttr","canStartObserver","spaRoutesData","body","disconnect","mutaCallback","mutations","observe","childList","subtree","resetTimer","registerPerfObserver","disablePerfObserver","disablePerformanceObserver","perTimer","perfObserverStop","entryTypes","callback","doneTimer","fstTimer","clearInterval","mutaObserverStop","setInterval","ignoreTag","inScreenImgTimes","getImageTimingsInFirstScreen","imageFST","max","imgFST","caculateImageTiming","newTimer","reset","mutation","targetNodeName","toUpperCase","addedNodes","nodeType","isConnected","shouldIgnoreNode","nodes","firstNode","innerText","querySelector","rect","getBoundingClientRect","top","querySelectorAll","addEventToStopObserver","fstFlag","validRecords","_ref3","validNodes","_ref4","style","visibility","display","inViewPort","score","calScore","calcuFST","markMeasure","_this6","eventNode","getAttribute","removeEventListener","_this7","removeListener","_this8","routeInfo","interactCallback","routeMutaCallback","resetRouteTimer","interactToStopRouteObserver","removeRouteInteractListener","_this9","routeMutaStop","_this10","_ref","_ref2","routeFstEnd","reportRouteFst","_this11","closest","hasAttribute","_ref5","right","bottom","left","wrapedNodes","reduce","depScore","wrapedNode","dep","_ref6","textContent","firstChar","charCodeAt","childNodes","subScore","_ref7","clientWidth","clientHeight","records","routePath","batchRecords","tempArr","current","prev","bestMatch","min","domFST","decisiveNode","isBase64Img","getImgSourceFromDom","computedStyle","getComputedStyle","imgSrc","innerUrl","getImgSrcFromBackground","getPropertyValue","isInFirstScreen","currentNode","_currentNode$getBound","getElementById","scrollTop","scrollY","pageYOffset","imageResources","s","domImages","link","createNodeIterator","NodeFilter","SHOW_ELEMENT","FILTER_ACCEPT","nextNode","getDomImgs","sort","s1","s2","RM","canIUse","getImageDomain","arr","entryCache","isSupportGetEntries","byte","total","currTarget","responseURL","checkUrlValid","checkMTSIForbid","resReg","isUrlValid","ajaxConfig","isSuccess","httpCode","businessCode","statusText","getResponseHeader","contentType","responseType","response","responseText","getConnectTypeByUrl","responsebyte","logLevel","logTag","xForbidReason","ok","defaultCode","errMsg","getAllResponseHeaders","headers","entries","filterEntries","imgConfig","entry","filterResource","hasError","parseType","isImg","_pushResource","triggerReport","validList","resTimingObserved","list","parsePerformanceEntries","nextEntries","diffEntries","observeResourceTiming","srcElement","HTMLScriptElement","HTMLLinkElement","HTMLImageElement","urlShort","xpath","region","operator","network","container","os","infos","shouldPush","onBatchPush","doBatchPush","_stringify","apiPath","uploadKeys","ResourceModel","requestbyte","kvs","extraData","tagName","preMetric","clearMetric","_rollbackMetric","unionid","getCookie","reg","nameEQ","ca","cookie","c","charAt","filterMap","base","model","weixin","dianping","setInitConfig","parsePageTimeWithDefer","onerror","parseWindowError","parsePromiseUnhandled","consoleError","parseConsoleError","interceptAjax","interceptFetch","resCfg","parseAjax","parseFetch","EVENT_LISTEN_FUNC","loadName","_owl","_open","_send","_startTime","_arguments","EVENT_LISTENER","STATE_CHANGE","_dispatchEvent","_fetch","input","fetchUrl","init","mode","Headers","append","clone","copy","resHeaders","text","v2","ge","InfoManager","supportInfo","setSupportInfo","setInfo","newInfo","getInfo","Inst","$plugins","finInfo","getDeviceInfo","getDeviceOS","getBrowserTypeAneVersion","platform","toLocaleLowerCase","browserType","exec","browserVersion","apiItem","extra","addPluginMethodsExtraData","addPluginMethods","cssPluginOptionsExtra","htmlPluginOptionsExtra","mergePluginParam","exitsPlugin","Boolean","defaultCssPlugin","defaultHtmlPlugin","createDefaultPlugin","apiOptions","values","expression","every","propertyName","CSS","supports","dom","CssSupportPolfill","pluginOptions","reject","asyncCheckList","createSupportInfo","all","infoList","index","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","d","a","definition","o","prop","toStringTag"],"sourceRoot":""}